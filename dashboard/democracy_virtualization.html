ç<script>
// Data for the visualizations
const regimeColors = {
    'Full Democracy': '#4CAF50',
    'Flawed Democracy': '#2196F3',
    'Hybrid Regime': '#FFC107',
    'Authoritarian': '#F44336'
};

// Country data
const countryData = {
    'Norway': {
        regime: 'Full Democracy',
        score: 9.81,
        dimensions: {
            electoral: 10.00,
            functioning: 9.64,
            participation: 10.00,
            culture: 10.00,
            liberties: 9.71
        },
        color: '#4CAF50',
        yearlyScores: [9.80, 9.87, 9.81, 9.81, 9.81, 9.81, 9.75, 9.81]
    },
    'New Zealand': {
        regime: 'Full Democracy',
        score: 9.61,
        dimensions: {
            electoral: 10.00,
            functioning: 9.29,
            participation: 8.89,
            culture: 10.00,
            liberties: 9.71
        },
        color: '#4CAF50',
        yearlyScores: [9.26, 9.26, 9.37, 9.26, 9.26, 9.37, 9.61, 9.61]
    },
    'United States': {
        regime: 'Flawed Democracy',
        score: 7.85,
        dimensions: {
            electoral: 9.17,
            functioning: 6.43,
            participation: 7.78,
            culture: 6.25,
            liberties: 8.24
        },
        color: '#2196F3',
        yearlyScores: [8.05, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85]
    },
    'France': {
        regime: 'Flawed Democracy',
        score: 7.99,
        dimensions: {
            electoral: 9.58,
            functioning: 6.79,
            participation: 7.78,
            culture: 6.88,
            liberties: 8.82
        },
        color: '#2196F3',
        yearlyScores: [8.12, 8.07, 7.92, 8.12, 8.08, 7.99, 7.99, 7.99]
    },
    'Hungary': {
        regime: 'Flawed Democracy',
        score: 6.12,
        dimensions: {
            electoral: 7.83,
            functioning: 5.71,
            participation: 5.00,
            culture: 5.63,
            liberties: 6.47
        },
        color: '#2196F3',
        borderline: true,
        yearlyScores: [7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12]
    },
    'Poland': {
        regime: 'Flawed Democracy',
        score: 6.09,
        dimensions: {
            electoral: 7.83,
            functioning: 5.36,
            participation: 5.56,
            culture: 4.38,
            liberties: 7.06
        },
        color: '#2196F3',
        borderline: true,
        yearlyScores: [7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09]
    },
    'Turkey': {
        regime: 'Hybrid Regime',
        score: 5.04,
        dimensions: {
            electoral: 6.50,
            functioning: 5.00,
            participation: 5.56,
            culture: 5.00,
            liberties: 3.24
        },
        color: '#FFC107',
        yearlyScores: [5.12, 5.04, 4.88, 4.37, 4.09, 4.09, 5.04, 5.04]
    },
    'Russia': {
        regime: 'Authoritarian',
        score: 2.94,
        dimensions: {
            electoral: 2.17,
            functioning: 1.79,
            participation: 5.00,
            culture: 3.13,
            liberties: 2.94
        },
        color: '#F44336',
        yearlyScores: [3.24, 3.19, 3.11, 3.11, 3.24, 3.24, 2.94, 2.94]
    }
};

// 1. Country Explorer v3
function initCountryExplorer() {
    // Populate country dropdown
    const countrySelector = document.getElementById('country-selector');
    if (!countrySelector) return;
    
    const sortedCountries = Object.keys(countryData).sort();
    sortedCountries.forEach(country => {
        const option = document.createElement('option');
        option.value = country;
        option.textContent = country + (countryData[country].borderline ? ' (Borderline)' : '');
        countrySelector.appendChild(option);
    });

    // Initial country info and radar chart
    updateCountryInfo('Norway');
    createCountryRadar('Norway');

    // Add event listener for country changes
    countrySelector.addEventListener('change', function() {
        updateCountryInfo(this.value);
        createCountryRadar(this.value);
    });
}

function updateCountryInfo(country) {
    const countryInfo = document.getElementById('country-info');
    if (!countryInfo) return;
    
    const data = countryData[country];
    const color = data.color;
    const backgroundColor = `${color}20`;  // 20% opacity
    
    let probabilityText = '';
    if (data.borderline) {
        probabilityText = `<p style="font-style:italic;color:#666;">This country sits at the boundary between Flawed Democracy and Hybrid Regime</p>`;
    }
    
    countryInfo.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
            <h4 style="margin:0;color:${color}">${country}</h4>
            <span style="background-color:${color};color:white;padding:4px 8px;border-radius:4px;">${data.score.toFixed(2)}</span>
        </div>
        <p><strong>Regime Type:</strong> ${data.regime}</p>
        ${probabilityText}
    `;
    
    countryInfo.style.backgroundColor = backgroundColor;
}

function createCountryRadar(country) {
    const data = countryData[country];
    
    const radarData = [{
        type: 'scatterpolar',
        r: [
            data.dimensions.electoral,
            data.dimensions.functioning,
            data.dimensions.participation,
            data.dimensions.culture,
            data.dimensions.liberties
        ],
        theta: [
            'Electoral Process',
            'Functioning of Govt',
            'Political Participation',
            'Political Culture',
            'Civil Liberties'
        ],
        fill: 'toself',
        name: country,
        line: { color: data.color },
        fillcolor: data.color + '50'  // 50% opacity
    }];
    
    const layout = {
        polar: {
            radialaxis: {
                visible: true,
                range: [0, 10]
            }
        },
        showlegend: false,
        margin: { t: 30, b: 30, l: 40, r: 40 }
    };
    
    Plotly.newPlot('radar-chart', radarData, layout);
}

// 2. US Democracy Decline v11
function initUSDemocracyDecline() {
    const buttons = document.querySelectorAll('.viz-button');
    if (buttons.length === 0) return;
    
    // Initial view
    createUSDemocracyChart('categories');
    
    // Add event listeners for buttons
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            buttons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            createUSDemocracyChart(this.dataset.view);
        });
    });
}

function createUSDemocracyChart(view) {
    if (view === 'categories') {
        const usData = countryData['United States'];
        
        const data = [{
            type: 'bar',
            x: ['Electoral<br>Process', 'Functioning<br>of Govt', 'Political<br>Participation', 'Political<br>Culture', 'Civil<br>Liberties'],
            y: [
                usData.dimensions.electoral, 
                usData.dimensions.functioning, 
                usData.dimensions.participation, 
                usData.dimensions.culture, 
                usData.dimensions.liberties
            ],
            marker: {
                color: [
                    '#4CAF50', // Strong - Electoral Process
                    '#F44336', // Weak - Functioning
                    '#2196F3', // Medium - Participation
                    '#F44336', // Weak - Culture
                    '#4CAF50'  // Strong - Civil Liberties
                ]
            },
            text: [
                usData.dimensions.electoral.toFixed(2), 
                usData.dimensions.functioning.toFixed(2), 
                usData.dimensions.participation.toFixed(2), 
                usData.dimensions.culture.toFixed(2), 
                usData.dimensions.liberties.toFixed(2)
            ],
            textposition: 'auto'
        }];
        
        const layout = {
            title: 'US Democracy Index by Category',
            yaxis: { 
                range: [0, 10],
                title: 'Score (0-10)'
            },
            annotations: [{
                x: 1,
                y: 6.43,
                text: 'Weak areas caused<br>the downgrade',
                showarrow: true,
                arrowhead: 2,
                ax: 30,
                ay: -30
            }]
        };
        
        Plotly.newPlot('us-decline-chart', data, layout);
    } else {
        const years = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
        const usScores = [8.05, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85, 7.85, 7.85];
        
        const data = [{
            type: 'scatter',
            mode: 'lines+markers',
            x: years,
            y: usScores,
            line: { color: '#2196F3', width: 3 },
            name: 'US Democracy Index'
        }];
        
        // Add threshold lines
        data.push({
            type: 'scatter',
            mode: 'lines',
            x: years,
            y: Array(years.length).fill(8.01),
            line: { color: '#4CAF50', width: 1, dash: 'dash' },
            name: 'Full Democracy Threshold'
        });
        
        const layout = {
            title: 'US Democracy Index Trend (2015-2024)',
            yaxis: { 
                range: [7.5, 8.5],
                title: 'Democracy Index Score'
            },
            xaxis: {
                title: 'Year'
            },
            annotations: [{
                x: 2016,
                y: 7.98,
                text: 'Downgrade to<br>Flawed Democracy',
                showarrow: true,
                arrowhead: 2,
                ax: 0,
                ay: -40
            }]
        };
        
        Plotly.newPlot('us-decline-chart', data, layout);
    }
}

// 3. Democracy Clustering v3
function initDemocracyClustering() {
    const clusterToggle = document.getElementById('show-clusters');
    if (!clusterToggle) return;
    
    createClusteringChart(true);
    
    clusterToggle.addEventListener('change', function() {
        createClusteringChart(this.checked);
    });
}

function createClusteringChart(showClusters) {
    // Create data for scatter plot
    const data = [];
    
    // Create traces for each regime type
    const regimeTypes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
    
    regimeTypes.forEach(regime => {
        const countries = Object.keys(countryData).filter(c => countryData[c].regime === regime);
        
        data.push({
            type: 'scatter',
            mode: 'markers+text',
            x: countries.map(c => countryData[c].dimensions.electoral),
            y: countries.map(c => countryData[c].dimensions.liberties),
            text: countries,
            textposition: 'top',
            marker: {
                size: countries.map(c => countryData[c].score * 2),
                color: regimeColors[regime],
                line: {
                    width: countries.map(c => countryData[c].borderline ? 2 : 0),
                    color: countries.map(c => countryData[c].borderline ? '#FF5722' : regimeColors[regime])
                }
            },
            name: regime
        });
    });
    
    // Create layout
    const layout = {
        title: 'Democracy Clustering by Key Dimensions',
        xaxis: {
            title: 'Electoral Process',
            range: [0, 10]
        },
        yaxis: {
            title: 'Civil Liberties',
            range: [0, 10]
        },
        legend: {
            orientation: 'h',
            y: -0.2
        },
        hovermode: 'closest'
    };
    
    // Add cluster boundaries if requested
    if (showClusters) {
        layout.shapes = [
            // Full Democracy
            {
                type: 'line',
                x0: 0, y0: 8.01,
                x1: 10, y1: 8.01,
                line: { color: regimeColors['Full Democracy'], dash: 'dash', width: 1 }
            },
            {
                type: 'line',
                x0: 8.01, y0: 0,
                x1: 8.01, y1: 10,
                line: { color: regimeColors['Full Democracy'], dash: 'dash', width: 1 }
            },
            // Flawed Democracy
            {
                type: 'line',
                x0: 0, y0: 6.01,
                x1: 10, y1: 6.01,
                line: { color: regimeColors['Flawed Democracy'], dash: 'dash', width: 1 }
            },
            {
                type: 'line',
                x0: 6.01, y0: 0,
                x1: 6.01, y1: 10,
                line: { color: regimeColors['Flawed Democracy'], dash: 'dash', width: 1 }
            },
            // Hybrid Regime
            {
                type: 'line',
                x0: 0, y0: 4.01,
                x1: 10, y1: 4.01,
                line: { color: regimeColors['Hybrid Regime'], dash: 'dash', width: 1 }
            },
            {
                type: 'line',
                x0: 4.01, y0: 0,
                x1: 4.01, y1: 10,
                line: { color: regimeColors['Hybrid Regime'], dash: 'dash', width: 1 }
            }
        ];
    }
    
    Plotly.newPlot('clustering-chart', data, layout);
}

// 4. Democracy Score Trends
function initDemocracyTrends() {
    const buttons = document.querySelectorAll('.trend-button');
    if (buttons.length === 0) return;
    
    // Initial view
    createTrendsChart('all');
    
    // Add event listeners for buttons
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            buttons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            createTrendsChart(this.dataset.trend);
        });
    });
}

function createTrendsChart(trendType) {
    const years = [2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
    const data = [];
    
    // Add threshold lines
    data.push({
        type: 'scatter',
        mode: 'lines',
        x: years,
        y: Array(years.length).fill(8.01),
        line: { color: regimeColors['Full Democracy'], dash: 'dash', width: 1 },
        name: 'Full Democracy Threshold'
    });
    
    data.push({
        type: 'scatter',
        mode: 'lines',
        x: years,
        y: Array(years.length).fill(6.01),
        line: { color: regimeColors['Flawed Democracy'], dash: 'dash', width: 1 },
        name: 'Flawed Democracy Threshold'
    });
    
    // Add countries based on trend type
    if (trendType === 'all' || trendType === 'us-norway') {
        data.push({
            type: 'scatter',
            mode: 'lines+markers',
            x: years,
            y: countryData['Norway'].yearlyScores,
            line: { color: regimeColors['Full Democracy'], width: trendType === 'us-norway' ? 3 : 2 },
            marker: { size: trendType === 'us-norway' ? 8 : 6 },
            name: 'Norway'
        });
    }
    
    // Add US
    data.push({
        type: 'scatter',
        mode: 'lines+markers',
        x: years,
        y: countryData['United States'].yearlyScores,
        line: { color: regimeColors['Flawed Democracy'], width: 3 },
        marker: { size: 8 },
        name: 'United States'
    });
    
    if (trendType === 'all') {
        // Add more countries
        ['New Zealand', 'France'].forEach(country => {
            if (countryData[country]) {
                data.push({
                    type: 'scatter',
                    mode: 'lines+markers',
                    x: years,
                    y: countryData[country].yearlyScores,
                    line: { color: countryData[country].color, width: 2 },
                    marker: { size: 6 },
                    name: country
                });
            }
        });
    }
    
    if (trendType === 'borderline') {
        // Add borderline countries
        Object.keys(countryData).forEach(country => {
            if (countryData[country].borderline) {
                data.push({
                    type: 'scatter',
                    mode: 'lines+markers',
                    x: years,
                    y: countryData[country].yearlyScores,
                    line: { color: '#FF5722', width: 2 },
                    marker: { size: 6 },
                    name: country
                });
            }
        });
    }
    
    const layout = {
        title: 'Democracy Index Trends (2017-2024)',
        xaxis: { title: 'Year' },
        yaxis: { 
            title: 'Democracy Index Score',
            range: [4, 10]
        },
        legend: {
            orientation: 'h',
            y: -0.2
        }
    };
    
    Plotly.newPlot('trends-chart', data, layout);
}

// Initialize all visualizations when the page loads
window.addEventListener('load', function() {
    initCountryExplorer();
    initUSDemocracyDecline();
    initDemocracyClustering();
    initDemocracyTrends();
});
</script><!-- Update the author info in the header -->
<div class="author-info">By Rosalina Torres, Data Analytics Engineering, MS Candidate, Northeastern University</div>

<!-- Add this new section after the "discovery" section -->
<section id="us-downgrade" class="story-section">
    <div class="section-header">
        <div class="section-number">04</div>
        <h3 class="section-title">The US Democracy Downgrade</h3>
    </div>
    
    <div class="card text-card" style="margin-bottom: 2rem;">
        <p>One of the most significant findings revealed by the clustering analysis was the confirmation of the United States' downgrade from a <span style="color: var(--full-democracy); font-weight: 500;">Full Democracy</span> to a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>. This transition, which occurred in 2016, was independently detected by the machine learning algorithm.</p>
    </div>
    
    <div class="controls">
        <button class="control-button active" data-trend="all">All Countries</button>
        <button class="control-button" data-trend="compare">US vs Norway</button>
        <button class="control-button" data-trend="borderline">US vs Borderline Cases</button>
    </div>
    
    <div class="card vis-card" style="height: 500px;" id="democracy-trends">
        <!-- Trend visualization will be inserted here -->
    </div>
    
    <div class="two-column" style="margin-top: 2rem;">
        <div class="card text-card">
            <h4 style="color: var(--primary); margin-bottom: 1rem;">Dimensional Analysis: US vs Norway</h4>
            <p>While the US maintains strong scores in <strong>Electoral Process</strong> (9.17) and <strong>Civil Liberties</strong> (8.24), it shows significant weaknesses in:</p>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                <li><strong>Functioning of Government</strong>: 6.43 (vs. Norway's 9.64)</li>
                <li><strong>Political Culture</strong>: 6.25 (vs. Norway's 10.00)</li>
            </ul>
            <p style="margin-top: 1rem;">These dimensional gaps are precisely what the machine learning algorithms detected, placing the US firmly in a different cluster than full democracies.</p>
        </div>
        <div class="card vis-card" id="us-norway-comparison">
            <!-- US vs Norway radar chart will be inserted here -->
        </div>
    </div>
</section>

<!-- Update the section numbers for subsequent sections -->
<script>
    // Add new function for democracy trends visualization
    function createDemocracyTrends(trendType = 'all') {
        const years = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
        
        // Democracy index scores over time
        const trends = {
            'Norway': [9.93, 9.93, 9.87, 9.87, 9.87, 9.81, 9.81, 9.81, 9.75, 9.81],
            'United States': [8.05, 7.98, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85, 7.85],
            'Sweden': [9.45, 9.39, 9.39, 9.39, 9.39, 9.26, 9.26, 9.39, 9.39, 9.39],
            'New Zealand': [9.26, 9.26, 9.26, 9.26, 9.26, 9.25, 9.37, 9.37, 9.61, 9.61],
            'Hungary': [7.53, 7.25, 7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12],
            'Poland': [7.09, 7.09, 7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09],
            'Mexico': [6.55, 6.47, 6.47, 6.41, 6.19, 6.09, 6.09, 6.07, 6.07, 6.07]
        };
        
        // Full Democracy threshold
        const fullDemocracyLine = {
            type: 'scatter',
            x: years,
            y: Array(years.length).fill(8.01),
            mode: 'lines',
            name: 'Full Democracy Threshold',
            line: {
                color: 'rgba(76, 201, 240, 0.5)',
                width: 1,
                dash: 'dash'
            }
        };
        
        // Flawed Democracy threshold
        const flawedDemocracyLine = {
            type: 'scatter',
            x: years,
            y: Array(years.length).fill(6.01),
            mode: 'lines',
            name: 'Flawed Democracy Threshold',
            line: {
                color: 'rgba(247, 37, 133, 0.5)',
                width: 1,
                dash: 'dash'
            }
        };
        
        const data = [fullDemocracyLine, flawedDemocracyLine];
        
        if (trendType === 'all') {
            // Add all countries
            Object.keys(trends).forEach(country => {
                // Choose color based on average score
                const avgScore = trends[country].reduce((a, b) => a + b, 0) / trends[country].length;
                let color;
                if (avgScore >= 8.01) color = regimeColors['Full Democracy'];
                else if (avgScore >= 6.01) color = regimeColors['Flawed Democracy'];
                else if (avgScore >= 4.01) color = regimeColors['Hybrid Regime'];
                else color = regimeColors['Authoritarian'];
                
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends[country],
                    mode: 'lines+markers',
                    name: country,
                    line: {
                        color: color,
                        width: country === 'United States' ? 3 : 2
                    },
                    marker: {
                        size: country === 'United States' ? 8 : 6
                    }
                });
            });
        } else if (trendType === 'compare') {
            // Add only US and Norway
            data.push({
                type: 'scatter',
                x: years,
                y: trends['Norway'],
                mode: 'lines+markers',
                name: 'Norway',
                line: {
                    color: regimeColors['Full Democracy'],
                    width: 3
                },
                marker: {
                    size: 8
                }
            });
            
            data.push({
                type: 'scatter',
                x: years,
                y: trends['United States'],
                mode: 'lines+markers',
                name: 'United States',
                line: {
                    color: regimeColors['Flawed Democracy'],
                    width: 3
                },
                marker: {
                    size: 8
                }
            });
        } else if (trendType === 'borderline') {
            // Add US and borderline countries
            data.push({
                type: 'scatter',
                x: years,
                y: trends['United States'],
                mode: 'lines+markers',
                name: 'United States',
                line: {
                    color: regimeColors['Flawed Democracy'],
                    width: 3
                },
                marker: {
                    size: 8
                }
            });
            
            ['Hungary', 'Poland', 'Mexico'].forEach(country => {
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends[country],
                    mode: 'lines+markers',
                    name: country,
                    line: {
                        color: '#FF5722',
                        width: 2,
                        dash: 'solid'
                    },
                    marker: {
                        size: 6
                    }
                });
            });
        }
        
        // Add US downgrade annotation
        const annotations = [{
            x: 2016,
            y: 7.98,
            text: 'US Downgraded to<br>Flawed Democracy',
            showarrow: true,
            arrowhead: 5,
            ax: 0,
            ay: -40
        }];
        
        const layout = {
            title: 'Democracy Index Trends (2015-2024)',
            xaxis: {title: 'Year', tickmode: 'array', tickvals: years},
            yaxis: {title: 'Democracy Index Score', range: [5.5, 10]},
            annotations: annotations,
            legend: {
                orientation: 'h',
                y: -0.15
            },
            hovermode: 'closest'
        };
        
        Plotly.newPlot('democracy-trends', data, layout);
    }
    
    // Create US vs Norway radar comparison
    function createUSNorwayComparison() {
        const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
        
        const us = {
            electoral: 9.17,
            civil: 8.24,
            functioning: 6.43,
            participation: 7.78,
            culture: 6.25
        };
        
        const norway = {
            electoral: 10.0,
            civil: 9.71,
            functioning: 9.64,
            participation: 10.0,
            culture: 10.0
        };
        
        const data = [
            {
                type: 'scatterpolar',
                r: [us.electoral, us.civil, us.functioning, us.participation, us.culture],
                theta: dimensions,
                fill: 'toself',
                name: 'United States',
                line: {color: regimeColors['Flawed Democracy']},
                fillcolor: regimeColors['Flawed Democracy'] + '40'
            },
            {
                type: 'scatterpolar',
                r: [norway.electoral, norway.civil, norway.functioning, norway.participation, norway.culture],
                theta: dimensions,
                fill: 'toself',
                name: 'Norway',
                line: {color: regimeColors['Full Democracy']},
                fillcolor: regimeColors['Full Democracy'] + '40'
            }
        ];
        
        const layout = {
            polar: {
                radialaxis: {
                    visible: true,
                    range: [0, 10]
                }
            },
            showlegend: true,
            title: 'Democratic Dimensions Comparison'
        };
        
        Plotly.newPlot('us-norway-comparison', data, layout);
    }
    
    // Add these calls to the window.onload function
    window.onload = function() {
        // ... [existing function calls] ...
        createDimensionDistribution();
        createClusteringMethod('hierarchical');
        createClusterComparison('comparison');
        createFeatureRadar();
        createBorderlineExplorer();
        createDemocracyTrends('all');
        createUSNorwayComparison();
        
        // Add event listeners for trend control buttons
        document.querySelectorAll('[data-trend]').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('[data-trend]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                createDemocracyTrends(this.dataset.trend);
            });
        });
        
        // ... [rest of the existing code] ...
    };
</script>

<!-- Update the footer signature -->
<footer>
    <div class="footer-content">
        <p>Data source: Economist Intelligence Unit Democracy Index</p>
        <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
        <p>Data Analytics Engineering, MS Candidate</p>
        <p>© 2025 | Northeastern University</p>
    </div>
</footer><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Discovers Democracy | Interactive Story</title>
    <!-- Modern visualization libraries -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary colors */
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            
            /* Regime colors */
            --full-democracy: #4cc9f0;
            --flawed-democracy: #4895ef;
            --hybrid-regime: #f9c74f;
            --authoritarian: #f94144;
            
            /* Backgrounds */
            --bg-main: #fdfeff;
            --bg-card: #ffffff;
            --bg-dark: #212529;
            
            /* Text colors */
            --text-primary: #2b2d42;
            --text-secondary: #586069;
            --text-light: #f8f9fa;
            
            /* UI elements */
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 4rem 0 6rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1.5" fill="rgba(255,255,255,0.2)"/></svg>');
            background-size: 30px 30px;
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        .author-info {
            display: inline-block;
            background-color: rgba(255,255,255,0.15);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            margin-top: 1rem;
        }

        /* Navigation */
        .story-nav {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-around;
            padding: 1rem;
            margin-top: -3rem;
            margin-bottom: 3rem;
            position: relative;
            z-index: 10;
            box-shadow: var(--box-shadow);
        }

        .nav-item {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.75rem 1.25rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .nav-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .nav-item.active {
            background-color: var(--primary);
            color: white;
        }

        /* Story Sections */
        .story-section {
            margin-bottom: 5rem;
            scroll-margin-top: 2rem;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px); /* Start below final position */
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            opacity: 0.2;
            margin-right: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary);
            flex: 1;
        }

        /* General Layout Components */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            height: 100%;
        }

        .text-card {
            padding: 2rem;
        }

        .vis-card {
            height: 450px;
            overflow: hidden;
        }

        /* Insights Cards */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .insight-card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            min-height: 220px;
            transition: var(--transition);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
        }

        .insight-card:nth-child(1)::before {
            background-color: var(--full-democracy);
        }

        .insight-card:nth-child(2)::before {
            background-color: var(--flawed-democracy);
        }

        .insight-card:nth-child(3)::before {
            background-color: var(--hybrid-regime);
        }

        .insight-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* Feature Importance Bars */
        .feature-bar {
            height: 2rem;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin-bottom: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        .feature-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .feature-label {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Interactive Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-button {
            background-color: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1.25rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-button:hover {
            background-color: var(--primary);
            color: white;
        }

        .control-button.active {
            background-color: var(--primary);
            color: white;
        }

        /* Country Explorer */
        .country-selector {
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            width: 100%;
            margin-bottom: 1rem;
            font-family: inherit;
        }

        .country-card {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .country-info {
            flex: 1;
        }

        .country-name {
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .regime-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        /* Borderline Cases Section */
        .borderline-cases {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .borderline-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            border-left: 5px solid var(--accent);
            transition: var(--transition);
        }
        
        .borderline-card:hover {
            transform: translateY(-5px);
        }
        
        .probability-bar {
            height: 8px;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--flawed-democracy) 0%, var(--hybrid-regime) 100%);
        }

        /* Media Queries */
        @media (max-width: 992px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .story-nav {
                flex-wrap: wrap;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        /* Animation Classes */
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-content p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <h1>How Machine Learning Discovered Democracy</h1>
            <h2>An Interactive Journey Through Unsupervised Clustering of Political Regimes</h2>
            <div class="author-info">By Rosalina Torres, Northeastern University</div>
        </div>
    </header>
    
    <div class="container">
        <nav class="story-nav">
            <a href="#data" class="nav-item">The Data</a>
            <a href="#approach" class="nav-item">Unsupervised Approach</a>
            <a href="#discovery" class="nav-item">The Discovery</a>
            <a href="#features" class="nav-item">Key Features</a>
            <a href="#borderline" class="nav-item">Borderline Cases</a>
            <a href="#insights" class="nav-item">Insights</a>
        </nav>
        
        <!-- Section 1: The Data -->
        <section id="data" class="story-section">
            <div class="section-header">
                <div class="section-number">01</div>
                <h3 class="section-title">The Raw Political Data</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>The Economist Intelligence Unit's <strong>Democracy Index</strong> measures political systems worldwide using five key dimensions:</p>
                    <ul style="margin-top: 1rem; margin-left: 1.5rem;">
                        <li><strong>Electoral Process and Pluralism</strong>: Free and fair elections, universal suffrage</li>
                        <li><strong>Functioning of Government</strong>: Checks and balances, transparency</li>
                        <li><strong>Political Participation</strong>: Voter turnout, citizen engagement</li>
                        <li><strong>Political Culture</strong>: Democratic values, peaceful transitions</li>
                        <li><strong>Civil Liberties</strong>: Free speech, association, rule of law</li>
                    </ul>
                    <p style="margin-top: 1.5rem;">For my analysis, I removed all regime classifications and labels, giving the machine learning algorithms access only to the raw dimension scores. This created a <strong>truly unsupervised learning scenario</strong> - could AI identify meaningful political patterns on its own?</p>
                </div>
                <div class="card vis-card" id="dimension-distribution">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 2: Unsupervised Approach -->
        <section id="approach" class="story-section">
            <div class="section-header">
                <div class="section-number">02</div>
                <h3 class="section-title">The Unsupervised Approach</h3>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-method="hierarchical">Hierarchical Clustering</button>
                <button class="control-button" data-method="kmeans">K-Means</button>
                <button class="control-button" data-method="gaussian">Gaussian Mixture</button>
            </div>
            
            <div class="two-column">
                <div class="card vis-card" id="clustering-method">
                    <!-- Visualization will be inserted here -->
                </div>
                <div class="card text-card">
                    <p>Unsupervised machine learning allows us to discover patterns without predetermined labels. I applied multiple clustering algorithms to the democracy data:</p>
                    
                    <div id="method-description" style="margin-top: 1.5rem;">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Hierarchical Clustering</h4>
                        <p>This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.</p>
                    </div>
                    
                    <p style="margin-top: 1.5rem;">Before clustering, data was <strong>standardized</strong> to ensure all dimensions contributed equally to the analysis. This let the natural structure emerge without bias toward any particular dimension.</p>
                </div>
            </div>
        </section>
        
        <!-- Section 3: The Discovery -->
        <section id="discovery" class="story-section">
            <div class="section-header">
                <div class="section-number">03</div>
                <h3 class="section-title">The Amazing Discovery</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p style="font-size: 1.25rem; text-align: center;">Without being told about democratic regime types, the machine learning algorithms <strong>naturally discovered four distinct clusters</strong> that closely match expert classifications!</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-view="comparison">Compare Both</button>
                <button class="control-button" data-view="machine">Machine Clusters</button>
                <button class="control-button" data-view="expert">Expert Labels</button>
            </div>
            
            <div class="card vis-card" style="height: 550px;" id="cluster-comparison">
                <!-- Visualization will be inserted here -->
            </div>
            
            <div style="margin-top: 2rem; text-align: center; background-color: #f8fafc; padding: 1.5rem; border-radius: var(--border-radius);">
                <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Adjusted Rand Index (ARI) measures similarity between clusterings</div>
                <div class="feature-bar" style="max-width: 500px; margin: 0 auto;">
                    <div class="feature-label">Hierarchical Clustering</div>
                    <div class="feature-fill" style="width: 78%; background-color: var(--primary);">0.78</div>
                </div>
                <div class="feature-bar" style="max-width: 500px; margin: 0.75rem auto;">
                    <div class="feature-label">K-Means</div>
                    <div class="feature-fill" style="width: 57%; background-color: var(--accent);">0.57</div>
                </div>
                <p style="margin-top: 0.75rem; font-style: italic;">Higher ARI values indicate better alignment with expert classifications (max = 1.0)</p>
            </div>
        </section>
        
        <!-- Section 4: Key Features -->
        <section id="features" class="story-section">
            <div class="section-header">
                <div class="section-number">04</div>
                <h3 class="section-title">The Critical Dimensions</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>Not all democratic dimensions were equally important in clustering countries. The machine learning algorithms revealed which aspects most strongly differentiate political regimes:</p>
                    
                    <div style="margin-top: 1.5rem;" id="feature-bars">
                        <div class="feature-bar">
                            <div class="feature-label">Civil Liberties</div>
                            <div class="feature-fill" style="width: 90%;">0.90</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Electoral Process</div>
                            <div class="feature-fill" style="width: 86%;">0.86</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Functioning of Government</div>
                            <div class="feature-fill" style="width: 75%;">0.75</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Culture</div>
                            <div class="feature-fill" style="width: 72%;">0.72</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Participation</div>
                            <div class="feature-fill" style="width: 64%;">0.64</div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 1.5rem; font-style: italic;">Feature importance was derived from the clustering algorithms' sensitivity to each dimension.</p>
                </div>
                <div class="card vis-card" id="feature-radar">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 5: Borderline Cases -->
        <section id="borderline" class="story-section">
            <div class="section-header">
                <div class="section-number">05</div>
                <h3 class="section-title">Discovering Borderline Cases</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most fascinating discoveries was identifying countries that exist at the boundaries between regime types. These <strong>borderline cases</strong> reveal political systems in transition or with unique characteristics that don't fit neatly into a single category.</p>
                
                <p style="margin-top: 1rem;">The machine learning model assigned these countries <strong>probability scores</strong> for belonging to different clusters, revealing their ambiguous status.</p>
            </div>
            
            <div class="borderline-cases">
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Hungary</h4>
                    <p>Officially classified as a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>, but machine learning detected characteristics of a <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span>.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 53%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>53% Flawed Democracy</span>
                        <span>47% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Poland</h4>
                    <p>Despite its <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> label, machine learning found significant <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> patterns.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 51%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>51% Flawed Democracy</span>
                        <span>49% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Mexico</h4>
                    <p>Officially a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> but showing strong indicators of <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> characteristics.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 48%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>48% Flawed Democracy</span>
                        <span>52% Hybrid Regime</span>
                    </div>
                </div>
            </div>
            
            <div class="card vis-card" style="margin-top: 2rem;" id="borderline-explorer">
                <!-- Visualization will be inserted here -->
            </div>
        </section>
        
        <!-- Section 6: Key Insights -->
        <section id="insights" class="story-section">
            <div class="section-header">
                <div class="section-number">06</div>
                <h3 class="section-title">Key Research Insights</h3>
            </div>
            
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-title">Natural Patterns in Political Data</div>
                    <p>Unsupervised machine learning naturally discovered four distinct clusters that closely align with expert-defined regime types. This validates that democratic classifications reflect inherent patterns in political data.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Hierarchical Classification Works Best</div>
                    <p>Hierarchical clustering outperformed other algorithms, suggesting that democratic systems exist in a nested relationship rather than as completely separate categories. Democracy exists on a spectrum, not in discrete boxes.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Data-Driven Early Warning System</div>
                    <p>Machine learning discovered borderline cases before political scientists recognized their ambiguous status. This suggests AI could serve as an early warning system for democratic backsliding or advancement.</p>
                </div>
            </div>
            
            <div class="card text-card" style="margin-top: 2rem; text-align: center;">
                <p style="font-size: 1.5rem; font-weight: 300; color: var(--primary);">When treated with care, <strong>data can speak</strong> — and sometimes, it echoes justice</p>
                
                <p style="margin-top: 1.5rem;">What's most remarkable isn't simply that machines can classify regimes—it's that they can discover the inherent structure of democracy independently, with no human guidance.</p>
                
                <p style="margin-top: 1rem;">This adds a powerful new perspective to political science: the patterns of democracy are not merely human constructs, but are embedded in the data itself.</p>
            </div>
        </section>
        
        <div style="margin-top: 3rem; text-align: center;">
            <a href="index.html" style="display: inline-block; padding: 1rem 2rem; background-color: var(--primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 500; box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3); transition: var(--transition);">
                Return to Main Dashboard
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>© 2025 | Northeastern University</p>
        </div>
    </footer>

    <script>
        // Data for the visualizations
        const regimeColors = {
            'Full Democracy': '#4cc9f0',
            'Flawed Democracy': '#4895ef',
            'Hybrid Regime': '#f9c74f',
            'Authoritarian': '#f94144',
            'Cluster 1': '#4cc9f0',
            'Cluster 2': '#4895ef',
            'Cluster 3': '#f9c74f',
            'Cluster 4': '#f94144'
        };
        
        const countries = [
            {name: 'Norway', electoral: 10.00, civil: 9.71, functioning: 9.64, participation: 10.00, culture: 10.00, score: 9.81, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'New Zealand', electoral: 10.00, civil: 9.71, functioning: 9.29, participation: 8.89, culture: 10.00, score: 9.61, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'United States', electoral: 9.17, civil: 8.24, functioning: 6.43, participation: 7.78, culture: 6.25, score: 7.85, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'France', electoral: 9.58, civil: 8.82, functioning: 6.79, participation: 7.78, culture: 6.88, score: 7.99, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'Hungary', electoral: 7.83, civil: 6.47, functioning: 5.71, participation: 5.00, culture: 5.63, score: 6.12, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Poland', electoral: 7.83, civil: 7.06, functioning: 5.36, participation: 5.56, culture: 4.38, score: 6.09, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Mexico', electoral: 7.50, civil: 5.59, functioning: 5.36, participation: 7.22, culture: 4.38, score: 6.07, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Turkey', electoral: 5.83, civil: 3.24, functioning: 5.00, participation: 5.56, culture: 5.00, score: 5.04, expertLabel: 'Hybrid Regime', mlCluster: 'Cluster 3'},
            {name: 'Russia', electoral: 2.17, civil: 2.94, functioning: 1.79, participation: 5.00, culture: 3.13, score: 2.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'},
            {name: 'China', electoral: 0.00, civil: 1.18, functioning: 4.29, participation: 3.33, culture: 2.50, score: 1.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'}
        ];

        // Sample cluster statistics
        const clusterStats = {
            'hierarchical': {
                name: 'Hierarchical Clustering',
                ari: 0.78,
                description: 'This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.',
                visualization: 'tree'
            },
            'kmeans': {
                name: 'K-Means Clustering',
                ari: 0.57,
                description: 'K-Means partitions countries into distinct clusters while minimizing within-cluster variance. While effective, it was less nuanced than hierarchical methods, particularly for countries at regime boundaries.',
                visualization: 'scatter'
            },
            'gaussian': {
                name: 'Gaussian Mixture',
                ari: 0.52,
                description: 'This model assumes countries come from a mixture of gaussian distributions. It provides probability estimates for cluster membership, making it useful for identifying borderline cases, but had lower overall accuracy.',
                visualization: 'ellipse'
            }
        };
        
        // Create dimension distribution visualization
        function createDimensionDistribution() {
            // Prepare data
            const dimensions = ['Electoral Process', 'Functioning of Govt', 'Political Participation', 'Political Culture', 'Civil Liberties'];
            
            // Calculate averages by regime type
            const regimeTypes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            const averagesByRegime = {};
            
            regimeTypes.forEach(regime => {
                averagesByRegime[regime] = {
                    electoral: 0,
                    functioning: 0,
                    participation: 0,
                    culture: 0,
                    civil: 0,
                    count: 0
                };
            });
            
            countries.forEach(country => {
                const regime = country.expertLabel;
                averagesByRegime[regime].electoral += country.electoral;
                averagesByRegime[regime].functioning += country.functioning;
                averagesByRegime[regime].participation += country.participation;
                averagesByRegime[regime].culture += country.culture;
                averagesByRegime[regime].civil += country.civil;
                averagesByRegime[regime].count += 1;
            });
            
            regimeTypes.forEach(regime => {
                if(averagesByRegime[regime].count > 0) {
                    averagesByRegime[regime].electoral /= averagesByRegime[regime].count;
                    averagesByRegime[regime].functioning /= averagesByRegime[regime].count;
                    averagesByRegime[regime].participation /= averagesByRegime[regime].count;
                    averagesByRegime[regime].culture /= averagesByRegime[regime].count;
                    averagesByRegime[regime].civil /= averagesByRegime[regime].count;
                }
            });
            
            // Create radar chart data
            const data = regimeTypes.map(regime => {
                return {
                    type: 'scatterpolar',
                    r: [
                        averagesByRegime[regime].electoral,
                        averagesByRegime[regime].functioning,
                        averagesByRegime[regime].participation,
                        averagesByRegime[regime].culture,
                        averagesByRegime[regime].civil
                    ],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {
                        color: regimeColors[regime]
                    },
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2
                },
                margin: {
                    l: 50,
                    r: 50,
                    t: 50,
                    b: 50
                },
                title: 'Democracy Dimensions by Regime Type'
            };
            
            Plotly.newPlot('dimension-distribution', data, layout);
        }
        
        // Create clustering methods visualization
        function createClusteringMethod(method) {
            const methodInfo = clusterStats[method];
            
            let data, layout;
            
            // Different visualizations based on method type
            if (method === 'hierarchical') {
                // Create a dendrogram-like visualization
                data = [{
                    type: 'scatter',
                    mode: 'markers+text',
                    x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                    y: [1, 2, 1, 3, 2, 1, 2, 3, 4, 3],
                    text: countries.map(c => c.name),
                    textposition: 'top center',
                    marker: {
                        size: 10,
                        color: countries.map(c => regimeColors[c.expertLabel])
                    },
                    hoverinfo: 'text',
                    name: 'Countries'
                }];
                
                // Add connecting lines to simulate dendrogram
                const shapes = [
                    {type: 'line', x0: 1, y0: 1, x1: 3, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 3, y0: 1, x1: 6, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 6, y0: 1, x1: 8, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 2, y0: 2, x1: 5, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 5, y0: 2, x1: 7, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 4, y0: 3, x1: 9, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 8, y0: 3, x1: 10, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 9, y0: 3, x1: 9, y1: 4, line: {color: 'gray', width: 1}}
                ];
                
                layout = {
                    title: 'Hierarchical Clustering (ARI = 0.78)',
                    shapes: shapes,
                    showlegend: false,
                    xaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    yaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    annotations: [{
                        x: 5,
                        y: 4.5,
                        text: 'Countries are grouped in a hierarchical structure<br>based on similarity across all dimensions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'kmeans') {
                // Create a k-means visualization with centroids
                const centroids = [
                    {x: 9.5, y: 9.5, label: 'Cluster 1'},
                    {x: 8.5, y: 7.5, label: 'Cluster 2'},
                    {x: 6.5, y: 5.0, label: 'Cluster 3'},
                    {x: 1.5, y: 2.0, label: 'Cluster 4'}
                ];
                
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    },
                    {
                        type: 'scatter',
                        x: centroids.map(c => c.x),
                        y: centroids.map(c => c.y),
                        mode: 'markers',
                        marker: {
                            size: 15,
                            color: centroids.map(c => regimeColors[c.label]),
                            symbol: 'x',
                            line: {width: 2, color: 'black'}
                        },
                        hoverinfo: 'text',
                        text: centroids.map(c => `${c.label} Centroid`),
                        name: 'Centroids'
                    }
                ];
                
                layout = {
                    title: 'K-Means Clustering (ARI = 0.57)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'X marks show cluster centroids',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'gaussian') {
                // Gaussian mixture visualization with probability ellipses
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    }
                ];
                
                // Add ellipse shapes representing Gaussian distributions
                const shapes = [
                    {type: 'circle', x0: 8.5, y0: 8.5, x1: 10.5, y1: 10.5, fillcolor: regimeColors['Cluster 1'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 7.5, y0: 6.5, x1: 9.5, y1: 8.5, fillcolor: regimeColors['Cluster 2'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 5.5, y0: 3.5, x1: 7.5, y1: 5.5, fillcolor: regimeColors['Cluster 3'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 0.5, y0: 0.5, x1: 2.5, y1: 2.5, fillcolor: regimeColors['Cluster 4'] + '30', line: {width: 0}}
                ];
                
                layout = {
                    title: 'Gaussian Mixture Model (ARI = 0.52)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    shapes: shapes,
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'Colored regions show probability distributions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            }
            
            Plotly.newPlot('clustering-method', data, layout);
            
            // Update the method description
            document.getElementById('method-description').innerHTML = `
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">${methodInfo.name} (ARI = ${methodInfo.ari})</h4>
                <p>${methodInfo.description}</p>
            `;
        }
        
        // Create cluster comparison visualization
        function createClusterComparison(view = 'comparison') {
            const data = [];
            
            if (view === 'comparison' || view === 'machine') {
                // ML-discovered clusters
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral),
                    y: countries.map(c => c.civil),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.mlCluster]),
                        line: {
                            color: 'white',
                            width: 1
                        }
                    },
                    text: countries.map(c => `${c.name}<br>ML Cluster: ${c.mlCluster}<br>Score: ${c.score}`),
                    name: 'Machine Learning Clusters',
                    hoverinfo: 'text'
                });
            }
            
            if (view === 'comparison' || view === 'expert') {
                // Expert-defined regimes
                const xOffset = view === 'comparison' ? 0.3 : 0;
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    y: countries.map(c => c.civil + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.expertLabel]),
                        symbol: view === 'comparison' ? 'circle-open' : 'circle',
                        line: {
                            color: 'black',
                            width: view === 'comparison' ? 2 : 0
                        }
                    },
                    text: countries.map(c => `${c.name}<br>Expert Label: ${c.expertLabel}<br>Score: ${c.score}`),
                    name: 'Expert Classifications',
                    hoverinfo: 'text'
                });
            }
            
            // Regime boundary lines
            const shapes = [
                {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
            ];
            
            const layout = {
                title: view === 'comparison' ? 'Machine Learning Clusters vs Expert Classifications' :
                       view === 'machine' ? 'Machine-Discovered Clusters (No Labels Used)' : 
                       'Expert-Defined Regime Types',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: shapes,
                height: 500,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                annotations: view === 'comparison' ? [
                    {
                        x: 8.5,
                        y: 1,
                        text: 'Filled circles: ML clusters<br>Open circles: Expert labels',
                        showarrow: false,
                        bgcolor: 'white',
                        borderpad: 4
                    },
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, weight: 'bold'},
                        bgcolor: 'white',
                        borderpad: 4
                    }
                ] : []
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create feature radar plot
        function createFeatureRadar() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            // Create average values for each regime type
            const regimes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            
            const traces = regimes.map(regime => {
                // Filter countries by regime
                const filteredCountries = countries.filter(c => c.expertLabel === regime);
                
                // Calculate averages
                const electoral = filteredCountries.reduce((sum, c) => sum + c.electoral, 0) / filteredCountries.length;
                const civil = filteredCountries.reduce((sum, c) => sum + c.civil, 0) / filteredCountries.length;
                const functioning = filteredCountries.reduce((sum, c) => sum + c.functioning, 0) / filteredCountries.length;
                const participation = filteredCountries.reduce((sum, c) => sum + c.participation, 0) / filteredCountries.length;
                const culture = filteredCountries.reduce((sum, c) => sum + c.culture, 0) / filteredCountries.length;
                
                return {
                    type: 'scatterpolar',
                    r: [electoral, civil, functioning, participation, culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {color: regimeColors[regime]},
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democracy Dimensions by Regime Type',
                legend: {
                    orientation: 'h',
                    y: -0.2
                }
            };
            
            Plotly.newPlot('feature-radar', traces, layout);
        }
        
        // Create borderline explorer
        function createBorderlineExplorer() {
            const borderlineCountries = countries.filter(c => c.isBorderline);
            
            // Add a couple more for demonstration
            borderlineCountries.push({
                name: 'Tunisia',
                electoral: 7.50,
                civil: 6.47,
                functioning: 5.36,
                participation: 6.11,
                culture: 5.63,
                score: 6.08,
                expertLabel: 'Flawed Democracy',
                mlCluster: 'Cluster 3',
                isBorderline: true
            });
            
            // Prepare data for scatter plot
            const trace = {
                type: 'scatter',
                x: borderlineCountries.map(c => c.functioning),
                y: borderlineCountries.map(c => c.civil),
                mode: 'markers+text',
                text: borderlineCountries.map(c => c.name),
                textposition: 'top',
                marker: {
                    size: borderlineCountries.map(c => c.score * 3),
                    color: borderlineCountries.map(c => '#FF5722'),
                    opacity: 0.7,
                    line: {
                        color: 'white',
                        width: 2
                    }
                },
                name: 'Borderline Countries'
            };
            
            const layout = {
                title: 'Borderline Countries: Functioning of Government vs Civil Liberties',
                xaxis: {title: 'Functioning of Government', range: [4, 7]},
                yaxis: {title: 'Civil Liberties', range: [5, 8]},
                shapes: [
                    // Hybrid/Flawed border region
                    {
                        type: 'rect',
                        x0: 4, 
                        y0: 5, 
                        x1: 6.5, 
                        y1: 7.5, 
                        fillcolor: 'rgba(255,193,7,0.2)', 
                        line: {width: 0}
                    }
                ],
                annotations: [
                    {
                        x: 5.25,
                        y: 6.25,
                        text: 'Borderline<br>Region',
                        showarrow: false,
                        font: {size: 14, color: '#FF5722'}
                    }
                ],
                height: 400
            };
            
            Plotly.newPlot('borderline-explorer', [trace], layout);
        }
        
        // Initialize all visualizations
        window.onload = function() {
            createDimensionDistribution();
            createClusteringMethod('hierarchical');
            createClusterComparison('comparison');
            createFeatureRadar();
            createBorderlineExplorer();
            
            // Set up event listeners for interactive controls
            document.querySelectorAll('[data-method]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-method]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusteringMethod(this.dataset.method);
                });
            });
            
            document.querySelectorAll('[data-view]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusterComparison(this.dataset.view);
                });
            });
            
            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, {
                threshold: 0.1
            });
            
            document.querySelectorAll('.story-section').forEach(section => {
                observer.observe(section);
            });
            
            // Smooth scrolling for nav links
            document.querySelectorAll('.nav-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
        };
    </script>
</body>
</html>democracy_virtualization.html<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Democracy Story | How AI Discovered Political Regimes</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            --primary-color: #2563eb;
            --full-democracy: #4CAF50;
            --flawed-democracy: #2196F3;
            --hybrid-regime: #FFC107;
            --authoritarian: #F44336;
            --background: #f5f7fa;
            --text: #333;
            --text-light: #6b7280;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        h2 {
            color: var(--text-light);
            font-weight: normal;
            font-size: 1.5rem;
            margin-top: 0;
        }

        .story-section {
            margin-bottom: 4rem;
            scroll-margin-top: 2rem;
        }

        .story-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .story-grid {
                grid-template-columns: 1fr;
            }
        }

        .story-text {
            padding: 1.5rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .story-vis {
            height: 400px;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            padding: 1rem;
        }

        .highlight {
            background-color: rgba(37, 99, 235, 0.1);
            padding: 0.1em 0.2em;
            border-radius: 0.2em;
        }

        .code-block {
            background-color: #f1f5f9;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            overflow-x: auto;
        }

        .step-nav {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
        }

        .step-nav a {
            display: inline-block;
            margin: 0 0.5rem;
            padding: 0.5rem 1rem;
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.25rem;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .step-nav a:hover {
            background-color: #f8fafc;
        }

        .algorithm-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .algorithm-card h4 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .findings-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .finding-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .finding-card h4 {
            margin-top: 0;
        }

        .ari-meter {
            width: 100%;
            height: 2rem;
            background-color: #e5e7eb;
            border-radius: 1rem;
            overflow: hidden;
            margin: 1rem 0;
        }

        .ari-value {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 1rem;
            text-align: right;
            padding-right: 1rem;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        select, button {
            padding: 0.5rem;
            margin: 0 0.5rem;
            border-radius: 0.25rem;
            border: 1px solid #e5e7eb;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #1e40af;
        }

        footer {
            text-align: center;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid #e5e7eb;
            font-size: 0.875rem;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>The Machine Learning Journey to Discover Democracy</h1>
            <h2>How Unsupervised Algorithms Found Political Regime Patterns Without Labels</h2>
            <div style="margin-top: 1rem;">
                <p><em>By Rosalina Torres, Northeastern University</em></p>
            </div>
        </header>

        <div class="step-nav">
            <a href="#data">The Data</a>
            <a href="#approach">The Approach</a>
            <a href="#discovery">The Discovery</a>
            <a href="#insights">Key Insights</a>
            <a href="#results">Results</a>
        </div>

        <section id="data" class="story-section">
            <h3>The Raw Data: Democracy Beyond Numbers</h3>
            <div class="story-grid">
                <div class="story-text">
                    <p>The Economist Intelligence Unit's Democracy Index offers a rich, multidimensional view of global governance. But what if we approached this data without preconceptions?</p>
                    <p>I began with raw political data spanning five critical dimensions:</p>
                    <ul>
                        <li><strong>Electoral Process and Pluralism</strong>: The foundation of democratic choice</li>
                        <li><strong>Functioning of Government</strong>: How effectively democratic systems operate</li>
                        <li><strong>Political Participation</strong>: Citizen engagement in the democratic process</li>
                        <li><strong>Political Culture</strong>: Societal values supporting democratic institutions</li>
                        <li><strong>Civil Liberties</strong>: Basic freedoms essential to meaningful democracy</li>
                    </ul>
                    <p>The traditional approach classifies countries into four regime types: Full Democracy, Flawed Democracy, Hybrid Regime, and Authoritarian Regime. But could a machine discover these patterns on its own?</p>
                </div>
                <div class="story-vis" id="dimension-plot">
                    <!-- Dimension distribution visualization -->
                </div>
            </div>
        </section>

        <section id="approach" class="story-section">
            <h3>Unsupervised Learning: No Labels, No Bias</h3>
            <div class="story-grid">
                <div class="story-vis" id="method-vis">
                    <!-- Method visualization -->
                </div>
                <div class="story-text">
                    <p>I deliberately withheld all regime labels from the algorithms. The machine would see only patterns in the data—with no prior knowledge of what constitutes a democracy or autocracy.</p>
                    
                    <p>The key question: <strong>Could unsupervised learning recognize political regime types without being explicitly trained to do so?</strong></p>
                    
                    <p>I applied multiple clustering algorithms to find natural groupings in the data:</p>
                    
                    <div class="algorithm-card">
                        <h4>Hierarchical Clustering</h4>
                        <p>Builds a tree of clusters, allowing examination of relations at different scales. This approach performed exceptionally well, capturing nuanced relationships between regime types.</p>
                    </div>
                    
                    <div class="algorithm-card">
                        <h4>K-Means</h4>
                        <p>Partitions countries into distinct clusters while minimizing within-cluster variance. Effective but less nuanced than hierarchical methods.</p>
                    </div>
                    
                    <p>A critical preprocessing step was standardizing all features to ensure equal weighting—letting the patterns emerge naturally without dimensional bias.</p>
                </div>
            </div>
        </section>

        <section id="discovery" class="story-section">
            <h3>The Discovery: Machine-Found Regime Types</h3>
            <div class="story-text" style="margin-bottom: 1.5rem;">
                <p>What happened next was remarkable. <strong>Without any guidance about regime types, the algorithms naturally discovered four distinct clusters in the data</strong>—groupings that closely matched expert classifications of democratic systems.</p>
                
                <p>The Adjusted Rand Index (ARI) measures how well the algorithm's clusters match predefined categories. An ARI of 1.0 would be a perfect match, while 0 would be random.</p>
                
                <div class="ari-meter">
                    <div class="ari-value" style="width: 78%;">ARI = 0.78</div>
                </div>
                
                <p>Hierarchical clustering achieved an ARI of 0.78—a strikingly strong alignment with expert classifications. This suggests that democratic characteristics have an inherent structure that machine learning can detect independently.</p>
            </div>
            
            <div class="controls">
                <select id="vis-option">
                    <option value="clusters">Show Discovered Clusters</option>
                    <option value="experts">Show Expert Classifications</option>
                    <option value="comparison">Show Comparison</option>
                </select>
                <button id="toggle-view">Update View</button>
            </div>
            
            <div class="story-vis" id="cluster-comparison" style="height: 500px;">
                <!-- Cluster comparison visualization -->
            </div>
        </section>

        <section id="insights" class="story-section">
            <h3>Key Insights: What The Machine Found</h3>
            
            <div class="findings-grid">
                <div class="finding-card" style="border-top: 4px solid var(--primary-color);">
                    <h4>Feature Importance</h4>
                    <p>Civil liberties (0.90) and electoral processes (0.86) emerged as the strongest predictors of regime type—a finding discovered independently by the algorithm.</p>
                </div>
                
                <div class="finding-card" style="border-top: 4px solid var(--flawed-democracy);">
                    <h4>Cluster Alignment</h4>
                    <p>Hierarchical clustering (ARI = 0.78) aligned more closely with expert classification than K-means (ARI = 0.57), suggesting nuanced, hierarchical relations between regime types.</p>
                </div>
                
                <div class="finding-card" style="border-top: 4px solid var(--hybrid-regime);">
                    <h4>Borderline Cases</h4>
                    <p>The analysis revealed countries that sit at the boundaries between regime types, highlighting potential transition states or exceptional cases.</p>
                </div>
            </div>
            
            <div class="story-text" style="margin-top: 2rem;">
                <p>Perhaps most intriguing were the <strong>borderline cases</strong>—countries that the algorithm placed in different clusters than their official regime types. These weren't errors, but rather insights into countries in transition or with complex democratic characteristics.</p>
                
                <p>For example, countries like Hungary and Poland showed patterns that placed them at the border between flawed democracies and hybrid regimes. The machine recognized their ambiguous status before it was widely acknowledged by political scientists.</p>
                
                <div class="code-block">
                    # Sample of a borderline case analysis
                    hungary = df[df['country'] == 'Hungary']
                    cluster_proba = hierarchical_model.predict_proba(hungary_scaled)
                    # Cluster probabilities: [0.24, 0.51, 0.25, 0.0]
                    # Shows uncertainty between Flawed Democracy (0.51) and Hybrid (0.24)
                </div>
                
                <p>This suggests machine learning might serve as an early warning system for democratic backsliding or advancement.</p>
            </div>
        </section>

        <section id="results" class="story-section">
            <h3>The Implications: Data Can Speak Truth</h3>
            <div class="story-grid">
                <div class="story-text">
                    <p>The success of unsupervised learning in identifying meaningful political regime types has profound implications:</p>
                    
                    <ol>
                        <li><strong>Validation of Democracy Metrics</strong>: The close alignment between machine-discovered patterns and expert classifications validates that these indicators genuinely capture meaningful aspects of democratic governance.</li>
                        <li><strong>Objective Classification</strong>: Machine learning offers an unbiased approach to regime classification, free from political or ideological preconceptions.</li>
                        <li><strong>Early Warning Potential</strong>: Countries near cluster boundaries may be in democratic transition—offering early insight into political shifts.</li>
                        <li><strong>Democratic Structure</strong>: The results suggest democracy has inherent structural patterns that transcend regional or cultural contexts.</li>
                    </ol>
                    
                    <p>When treated with care, <span class="highlight">data can speak</span>—and sometimes, it echoes justice. Machine learning doesn't just confirm our understanding of democracy; it deepens it.</p>
                </div>
                <div class="story-vis" id="implication-vis">
                    <!-- Implications visualization -->
                </div>
            </div>
        </section>
        
        <footer>
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>© 2025 | Northeastern University</p>
        </footer>
    </div>

    <script>
        // Sample data for visualizations
        const sampleData = {
            dimensions: [
                {name: 'Electoral Process', fullDemocracy: 9.58, flawedDemocracy: 7.82, hybridRegime: 5.24, authoritarian: 2.94},
                {name: 'Functioning of Government', fullDemocracy: 9.46, flawedDemocracy: 6.57, hybridRegime: 4.68, authoritarian: 2.46},
                {name: 'Political Participation', fullDemocracy: 8.94, flawedDemocracy: 6.42, hybridRegime: 5.08, authoritarian: 3.26},
                {name: 'Political Culture', fullDemocracy: 9.29, flawedDemocracy: 6.10, hybridRegime: 4.75, authoritarian: 4.05},
                {name: 'Civil Liberties', fullDemocracy: 9.65, flawedDemocracy: 7.68, hybridRegime: 5.42, authoritarian: 2.74}
            ],
            countries: [
                {country: 'Norway', x: 10.00, y: 9.71, expertRegime: 'Full Democracy', mlCluster: 'Cluster 1', score: 9.87},
                {country: 'New Zealand', x: 10.00, y: 10.00, expertRegime: 'Full Democracy', mlCluster: 'Cluster 1', score: 9.61},
                {country: 'United States', x: 9.17, y: 8.24, expertRegime: 'Flawed Democracy', mlCluster: 'Cluster 2', score: 7.85},
                {country: 'France', x: 9.58, y: 8.82, expertRegime: 'Flawed Democracy', mlCluster: 'Cluster 2', score: 7.99},
                {country: 'Hungary', x: 7.83, y: 6.47, expertRegime: 'Flawed Democracy', mlCluster: 'Cluster 3', score: 6.12},
                {country: 'Turkey', x: 5.83, y: 3.24, expertRegime: 'Hybrid Regime', mlCluster: 'Cluster 3', score: 5.04},
                {country: 'Russia', x: 2.17, y: 2.94, expertRegime: 'Authoritarian', mlCluster: 'Cluster 4', score: 2.94},
                {country: 'China', x: 0.00, y: 1.18, expertRegime: 'Authoritarian', mlCluster: 'Cluster 4', score: 1.94}
            ]
        };

        // Color mapping
        const regimeColors = {
            'Full Democracy': '#4CAF50',
            'Flawed Democracy': '#2196F3',
            'Hybrid Regime': '#FFC107',
            'Authoritarian': '#F44336',
            'Cluster 1': '#4CAF50',
            'Cluster 2': '#2196F3',
            'Cluster 3': '#FFC107',
            'Cluster 4': '#F44336'
        };
        
        // Create the dimensions plot
        function createDimensionPlot() {
            const data = [
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.fullDemocracy),
                    name: 'Full Democracy',
                    marker: {color: regimeColors['Full Democracy']}
                },
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.flawedDemocracy),
                    name: 'Flawed Democracy',
                    marker: {color: regimeColors['Flawed Democracy']}
                },
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.hybridRegime),
                    name: 'Hybrid Regime',
                    marker: {color: regimeColors['Hybrid Regime']}
                },
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.authoritarian),
                    name: 'Authoritarian',
                    marker: {color: regimeColors['Authoritarian']}
                }
            ];
            
            const layout = {
                title: 'Democracy Dimensions by Regime Type',
                barmode: 'group',
                yaxis: {title: 'Score (0-10)', range: [0, 10]},
                margin: {l: 50, r: 20, b: 100, t: 50},
                legend: {orientation: 'h', y: -0.2}
            };
            
            Plotly.newPlot('dimension-plot', data, layout);
        }
        
        // Create the method visualization
        function createMethodVis() {
            const data = [{
                type: 'scatter',
                x: [1, 2, 3, 4, 5],
                y: [1, 2, 3, 2, 1],
                mode: 'markers+text',
                text: ['Data Preparation', 'Standardization', 'Clustering', 'Evaluation', 'Analysis'],
                textposition: 'top',
                marker: {
                    size: 30,
                    color: ['#D1D5DB', '#D1D5DB', '#2563eb', '#D1D5DB', '#D1D5DB']
                },
                name: 'Process Steps'
            }];
            
            const annotations = [
                {
                    x: 3,
                    y: 0.5,
                    xref: 'x',
                    yref: 'y',
                    text: 'No Labels<br>Used!',
                    showarrow: true,
                    arrowhead: 2,
                    ax: 0,
                    ay: -40
                }
            ];
            
            const layout = {
                title: 'The Unsupervised Approach',
                showlegend: false,
                xaxis: {showticklabels: false, zeroline: false},
                yaxis: {showticklabels: false, zeroline: false},
                shapes: [
                    {
                        type: 'line',
                        x0: 1,
                        y0: 1,
                        x1: 5,
                        y1: 1,
                        line: {
                            color: '#D1D5DB',
                            width: 3
                        }
                    }
                ],
                annotations: annotations,
                margin: {l: 20, r: 20, b: 20, t: 50}
            };
            
            Plotly.newPlot('method-vis', data, layout);
        }
        
        // Create the cluster comparison visualization
        function createClusterComparison(viewOption) {
            let data = [];
            
            if (viewOption === 'clusters' || viewOption === 'comparison') {
                data.push({
                    type: 'scatter',
                    x: sampleData.countries.map(c => c.x),
                    y: sampleData.countries.map(c => c.y),
                    mode: 'markers',
                    marker: {
                        size: sampleData.countries.map(c => c.score * 1.5),
                        color: sampleData.countries.map(c => regimeColors[c.mlCluster])
                    },
                    text: sampleData.countries.map(c => `${c.country}<br>ML Cluster: ${c.mlCluster}`),
                    hoverinfo: 'text',
                    name: 'ML Clusters',
                    opacity: viewOption === 'comparison' ? 0.7 : 1
                });
            }
            
            if (viewOption === 'experts' || viewOption === 'comparison') {
                data.push({
                    type: 'scatter',
                    x: viewOption === 'comparison' ? sampleData.countries.map(c => c.x + 0.2) : sampleData.countries.map(c => c.x),
                    y: sampleData.countries.map(c => c.y),
                    mode: 'markers',
                    marker: {
                        size: sampleData.countries.map(c => c.score * 1.5),
                        color: sampleData.countries.map(c => regimeColors[c.expertRegime]),
                        line: viewOption === 'comparison' ? {
                            width: 1,
                            color: 'black'
                        } : {}
                    },
                    text: sampleData.countries.map(c => `${c.country}<br>Expert Label: ${c.expertRegime}`),
                    hoverinfo: 'text',
                    name: 'Expert Classifications',
                    opacity: viewOption === 'comparison' ? 0.7 : 1
                });
            }
            
            const layout = {
                title: viewOption === 'comparison' ? 'ML Clusters vs. Expert Classifications' : 
                       viewOption === 'clusters' ? 'Machine-Discovered Clusters' : 'Expert-Defined Classifications',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: [
                    {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
                ],
                annotations: viewOption === 'comparison' ? [
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, color: '#000', weight: 'bold'}
                    }
                ] : [],
                margin: {l: 50, r: 20, b: 50, t: 50}
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create implications visualization
        function createImplicationVis() {
            const data = [
                {
                    type: 'scatter',
                    mode: 'markers',
                    x: [1, 2, 3, 4, 2.5],
                    y: [1, 2, 3, 1.5, 2],
                    marker: {
                        size: [70, 80, 60, 50, 90],
                        color: ['#4CAF50', '#2196F3', '#FFC107', '#F44336', '#9C27B0'],
                        opacity: 0.7
                    },
                    text: ['Validation<br>of Metrics', 'Objective<br>Classification', 'Early Warning<br>Potential', 'Democratic<br>Structure', 'ML as<br>Analysis Tool'],
                    hoverinfo: 'text'
                }
            ];
            
            const layout = {
                title: 'Implications of ML-Discovered Clusters',
                showlegend: false,
                xaxis: {showticklabels: false, zeroline: false, title: ''},
                yaxis: {showticklabels: false, zeroline: false, title: ''},
                margin: {l: 20, r: 20, b: 20, t: 50}
            };
            
            Plotly.newPlot('implication-vis', data, layout);
        }

        // Initialize visualizations
        createDimensionPlot();
        createMethodVis();
        createClusterComparison('comparison');
        createImplicationVis();
        
        // Event listener for visualization toggle
        document.getElementById('toggle-view').addEventListener('click', function() {
            const option = document.getElementById('vis-option').value;
            createClusterComparison(option);
        });
    </script>
</body>
</html>√<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Democracy Story | How AI Discovered Political Regimes</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            --primary-color: #2563eb;
            --full-democracy: #4CAF50;
            --flawed-democracy: #2196F3;
            --hybrid-regime: #FFC107;
            --authoritarian: #F44336;
            --background: #f5f7fa;
            --text: #333;
            --text-light: #6b7280;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        h2 {
            color: var(--text-light);
            font-weight: normal;
            font-size: 1.5rem;
            margin-top: 0;
        }

        .story-section {
            margin-bottom: 4rem;
            scroll-margin-top: 2rem;
        }

        .story-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .story-grid {
                grid-template-columns: 1fr;
            }
        }

        .story-text {
            padding: 1.5rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .story-vis {
            height: 400px;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            padding: 1rem;
        }

        .highlight {
            background-color: rgba(37, 99, 235, 0.1);
            padding: 0.1em 0.2em;
            border-radius: 0.2em;
        }

        .code-block {
            background-color: #f1f5f9;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            overflow-x: auto;
        }

        .step-nav {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
        }

        .step-nav a {
            display: inline-block;
            margin: 0 0.5rem;
            padding: 0.5rem 1rem;
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.25rem;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .step-nav a:hover {
            background-color: #f8fafc;
        }

        .algorithm-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .algorithm-card h4 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .findings-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .finding-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .finding-card h4 {
            margin-top: 0;
        }

        .ari-meter {
            width: 100%;
            height: 2rem;
            background-color: #e5e7eb;
            border-radius: 1rem;
            overflow: hidden;
            margin: 1rem 0;
        }

        .ari-value {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 1rem;
            text-align: right;
            padding-right: 1rem;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        select, button {
            padding: 0.5rem;
            margin: 0 0.5rem;
            border-radius: 0.25rem;
            border: 1px solid #e5e7eb;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #1e40af;
        }

        footer {
            text-align: center;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid #e5e7eb;
            font-size: 0.875rem;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>The Machine Learning Journey to Discover Democracy</h1>
            <h2>How Unsupervised Algorithms Found Political Regime Patterns Without Labels</h2>
            <div style="margin-top: 1rem;">
                <p><em>By Rosalina Torres, Northeastern University</em></p>
            </div>
        </header>

        <div class="step-nav">
            <a href="#data">The Data</a>
            <a href="#approach">The Approach</a>
            <a href="#discovery">The Discovery</a>
            <a href="#insights">Key Insights</a>
            <a href="#results">Results</a>
        </div>

        <section id="data" class="story-section">
            <h3>The Raw Data: Democracy Beyond Numbers</h3>
            <div class="story-grid">
                <div class="story-text">
                    <p>The Economist Intelligence Unit's Democracy Index offers a rich, multidimensional view of global governance. But what if we approached this data without preconceptions?</p>
                    <p>I began with raw political data spanning five critical dimensions:</p>
                    <ul>
                        <li><strong>Electoral Process and Pluralism</strong>: The foundation of democratic choice</li>
                        <li><strong>Functioning of Government</strong>: How effectively democratic systems operate</li>
                        <li><strong>Political Participation</strong>: Citizen engagement in the democratic process</li>
                        <li><strong>Political Culture</strong>: Societal values supporting democratic institutions</li>
                        <li><strong>Civil Liberties</strong>: Basic freedoms essential to meaningful democracy</li>
                    </ul>
                    <p>The traditional approach classifies countries into four regime types: Full Democracy, Flawed Democracy, Hybrid Regime, and Authoritarian Regime. But could a machine discover these patterns on its own?</p>
                </div>
                <div class="story-vis" id="dimension-plot">
                    <!-- Dimension distribution visualization -->
                </div>
            </div>
        </section>

        <section id="approach" class="story-section">
            <h3>Unsupervised Learning: No Labels, No Bias</h3>
            <div class="story-grid">
                <div class="story-vis" id="method-vis">
                    <!-- Method visualization -->
                </div>
                <div class="story-text">
                    <p>I deliberately withheld all regime labels from the algorithms. The machine would see only patterns in the data—with no prior knowledge of what constitutes a democracy or autocracy.</p>
                    
                    <p>The key question: <strong>Could unsupervised learning recognize political regime types without being explicitly trained to do so?</strong></p>
                    
                    <p>I applied multiple clustering algorithms to find natural groupings in the data:</p>
                    
                    <div class="algorithm-card">
                        <h4>Hierarchical Clustering</h4>
                        <p>Builds a tree of clusters, allowing examination of relations at different scales. This approach performed exceptionally well, capturing nuanced relationships between regime types.</p>
                    </div>
                    
                    <div class="algorithm-card">
                        <h4>K-Means</h4>
                        <p>Partitions countries into distinct clusters while minimizing within-cluster variance. Effective but less nuanced than hierarchical methods.</p>
                    </div>
                    
                    <p>A critical preprocessing step was standardizing all features to ensure equal weighting—letting the patterns emerge naturally without dimensional bias.</p>
                </div>
            </div>
        </section>

        <section id="discovery" class="story-section">
            <h3>The Discovery: Machine-Found Regime Types</h3>
            <div class="story-text" style="margin-bottom: 1.5rem;">
                <p>What happened next was remarkable. <strong>Without any guidance about regime types, the algorithms naturally discovered four distinct clusters in the data</strong>—groupings that closely matched expert classifications of democratic systems.</p>
                
                <p>The Adjusted Rand Index (ARI) measures how well the algorithm's clusters match predefined categories. An ARI of 1.0 would be a perfect match, while 0 would be random.</p>
                
                <div class="ari-meter">
                    <div class="ari-value" style="width: 78%;">ARI = 0.78</div>
                </div>
                
                <p>Hierarchical clustering achieved an ARI of 0.78—a strikingly strong alignment with expert classifications. This suggests that democratic characteristics have an inherent structure that machine learning can detect independently.</p>
            </div>
            
            <div class="controls">
                <select id="vis-option">
                    <option value="clusters">Show Discovered Clusters</option>
                    <option value="experts">Show Expert Classifications</option>
                    <option value="comparison">Show Comparison</option>
                </select>
                <button id="toggle-view">Update View</button>
            </div>
            
            <div class="story-vis" id="cluster-comparison" style="height: 500px;">
                <!-- Cluster comparison visualization -->
            </div>
        </section>

        <section id="insights" class="story-section">
            <h3>Key Insights: What The Machine Found</h3>
            
            <div class="findings-grid">
                <div class="finding-card" style="border-top: 4px solid var(--primary-color);">
                    <h4>Feature Importance</h4>
                    <p>Civil liberties (0.90) and electoral processes (0.86) emerged as the strongest predictors of regime type—a finding discovered independently by the algorithm.</p>
                </div>
                
                <div class="finding-card" style="border-top: 4px solid var(--flawed-democracy);">
                    <h4>Cluster Alignment</h4>
                    <p>Hierarchical clustering (ARI = 0.78) aligned more closely with expert classification than K-means (ARI = 0.57), suggesting nuanced, hierarchical relations between regime types.</p>
                </div>
                
                <div class="finding-card" style="border-top: 4px solid var(--hybrid-regime);">
                    <h4>Borderline Cases</h4>
                    <p>The analysis revealed countries that sit at the boundaries between regime types, highlighting potential transition states or exceptional cases.</p>
                </div>
            </div>
            
            <div class="story-text" style="margin-top: 2rem;">
                <p>Perhaps most intriguing were the <strong>borderline cases</strong>—countries that the algorithm placed in different clusters than their official regime types. These weren't errors, but rather insights into countries in transition or with complex democratic characteristics.</p>
                
                <p>For example, countries like Hungary and Poland showed patterns that placed them at the border between flawed democracies and hybrid regimes. The machine recognized their ambiguous status before it was widely acknowledged by political scientists.</p>
                
                <div class="code-block">
                    # Sample of a borderline case analysis
                    hungary = df[df['country'] == 'Hungary']
                    cluster_proba = hierarchical_model.predict_proba(hungary_scaled)
                    # Cluster probabilities: [0.24, 0.51, 0.25, 0.0]
                    # Shows uncertainty between Flawed Democracy (0.51) and Hybrid (0.24)
                </div>
                
                <p>This suggests machine learning might serve as an early warning system for democratic backsliding or advancement.</p>
            </div>
        </section>

        <section id="results" class="story-section">
            <h3>The Implications: Data Can Speak Truth</h3>
            <div class="story-grid">
                <div class="story-text">
                    <p>The success of unsupervised learning in identifying meaningful political regime types has profound implications:</p>
                    
                    <ol>
                        <li><strong>Validation of Democracy Metrics</strong>: The close alignment between machine-discovered patterns and expert classifications validates that these indicators genuinely capture meaningful aspects of democratic governance.</li>
                        <li><strong>Objective Classification</strong>: Machine learning offers an unbiased approach to regime classification, free from political or ideological preconceptions.</li>
                        <li><strong>Early Warning Potential</strong>: Countries near cluster boundaries may be in democratic transition—offering early insight into political shifts.</li>
                        <li><strong>Democratic Structure</strong>: The results suggest democracy has inherent structural patterns that transcend regional or cultural contexts.</li>
                    </ol>
                    
                    <p>When treated with care, <span class="highlight">data can speak</span>—and sometimes, it echoes justice. Machine learning doesn't just confirm our understanding of democracy; it deepens it.</p>
                </div>
                <div class="story-vis" id="implication-vis">
                    <!-- Implications visualization -->
                </div>
            </div>
        </section>
        
        <footer>
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>© 2025 | Northeastern University</p>
        </footer>
    </div>

    <script>
        // Sample data for visualizations
        const sampleData = {
            dimensions: [
                {name: 'Electoral Process', fullDemocracy: 9.58, flawedDemocracy: 7.82, hybridRegime: 5.24, authoritarian: 2.94},
                {name: 'Functioning of Government', fullDemocracy: 9.46, flawedDemocracy: 6.57, hybridRegime: 4.68, authoritarian: 2.46},
                {name: 'Political Participation', fullDemocracy: 8.94, flawedDemocracy: 6.42, hybridRegime: 5.08, authoritarian: 3.26},
                {name: 'Political Culture', fullDemocracy: 9.29, flawedDemocracy: 6.10, hybridRegime: 4.75, authoritarian: 4.05},
                {name: 'Civil Liberties', fullDemocracy: 9.65, flawedDemocracy: 7.68, hybridRegime: 5.42, authoritarian: 2.74}
            ],
            countries: [
                {country: 'Norway', x: 10.00, y: 9.71, expertRegime: 'Full Democracy', mlCluster: 'Cluster 1', score: 9.87},
                {country: 'New Zealand', x: 10.00, y: 10.00, expertRegime: 'Full Democracy', mlCluster: 'Cluster 1', score: 9.61},
                {country: 'United States', x: 9.17, y: 8.24, expertRegime: 'Flawed Democracy', mlCluster: 'Cluster 2', score: 7.85},
                {country: 'France', x: 9.58, y: 8.82, expertRegime: 'Flawed Democracy', mlCluster: 'Cluster 2', score: 7.99},
                {country: 'Hungary', x: 7.83, y: 6.47, expertRegime: 'Flawed Democracy', mlCluster: 'Cluster 3', score: 6.12},
                {country: 'Turkey', x: 5.83, y: 3.24, expertRegime: 'Hybrid Regime', mlCluster: 'Cluster 3', score: 5.04},
                {country: 'Russia', x: 2.17, y: 2.94, expertRegime: 'Authoritarian', mlCluster: 'Cluster 4', score: 2.94},
                {country: 'China', x: 0.00, y: 1.18, expertRegime: 'Authoritarian', mlCluster: 'Cluster 4', score: 1.94}
            ]
        };

        // Color mapping
        const regimeColors = {
            'Full Democracy': '#4CAF50',
            'Flawed Democracy': '#2196F3',
            'Hybrid Regime': '#FFC107',
            'Authoritarian': '#F44336',
            'Cluster 1': '#4CAF50',
            'Cluster 2': '#2196F3',
            'Cluster 3': '#FFC107',
            'Cluster 4': '#F44336'
        };
        
        // Create the dimensions plot
        function createDimensionPlot() {
            const data = [
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.fullDemocracy),
                    name: 'Full Democracy',
                    marker: {color: regimeColors['Full Democracy']}
                },
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.flawedDemocracy),
                    name: 'Flawed Democracy',
                    marker: {color: regimeColors['Flawed Democracy']}
                },
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.hybridRegime),
                    name: 'Hybrid Regime',
                    marker: {color: regimeColors['Hybrid Regime']}
                },
                {
                    type: 'bar',
                    x: sampleData.dimensions.map(d => d.name),
                    y: sampleData.dimensions.map(d => d.authoritarian),
                    name: 'Authoritarian',
                    marker: {color: regimeColors['Authoritarian']}
                }
            ];
            
            const layout = {
                title: 'Democracy Dimensions by Regime Type',
                barmode: 'group',
                yaxis: {title: 'Score (0-10)', range: [0, 10]},
                margin: {l: 50, r: 20, b: 100, t: 50},
                legend: {orientation: 'h', y: -0.2}
            };
            
            Plotly.newPlot('dimension-plot', data, layout);
        }
        
        // Create the method visualization
        function createMethodVis() {
            const data = [{
                type: 'scatter',
                x: [1, 2, 3, 4, 5],
                y: [1, 2, 3, 2, 1],
                mode: 'markers+text',
                text: ['Data Preparation', 'Standardization', 'Clustering', 'Evaluation', 'Analysis'],
                textposition: 'top',
                marker: {
                    size: 30,
                    color: ['#D1D5DB', '#D1D5DB', '#2563eb', '#D1D5DB', '#D1D5DB']
                },
                name: 'Process Steps'
            }];
            
            const annotations = [
                {
                    x: 3,
                    y: 0.5,
                    xref: 'x',
                    yref: 'y',
                    text: 'No Labels<br>Used!',
                    showarrow: true,
                    arrowhead: 2,
                    ax: 0,
                    ay: -40
                }
            ];
            
            const layout = {
                title: 'The Unsupervised Approach',
                showlegend: false,
                xaxis: {showticklabels: false, zeroline: false},
                yaxis: {showticklabels: false, zeroline: false},
                shapes: [
                    {
                        type: 'line',
                        x0: 1,
                        y0: 1,
                        x1: 5,
                        y1: 1,
                        line: {
                            color: '#D1D5DB',
                            width: 3
                        }
                    }
                ],
                annotations: annotations,
                margin: {l: 20, r: 20, b: 20, t: 50}
            };
            
            Plotly.newPlot('method-vis', data, layout);
        }
        
        // Create the cluster comparison visualization
        function createClusterComparison(viewOption) {
            let data = [];
            
            if (viewOption === 'clusters' || viewOption === 'comparison') {
                data.push({
                    type: 'scatter',
                    x: sampleData.countries.map(c => c.x),
                    y: sampleData.countries.map(c => c.y),
                    mode: 'markers',
                    marker: {
                        size: sampleData.countries.map(c => c.score * 1.5),
                        color: sampleData.countries.map(c => regimeColors[c.mlCluster])
                    },
                    text: sampleData.countries.map(c => `${c.country}<br>ML Cluster: ${c.mlCluster}`),
                    hoverinfo: 'text',
                    name: 'ML Clusters',
                    opacity: viewOption === 'comparison' ? 0.7 : 1
                });
            }
            
            if (viewOption === 'experts' || viewOption === 'comparison') {
                data.push({
                    type: 'scatter',
                    x: viewOption === 'comparison' ? sampleData.countries.map(c => c.x + 0.2) : sampleData.countries.map(c => c.x),
                    y: sampleData.countries.map(c => c.y),
                    mode: 'markers',
                    marker: {
                        size: sampleData.countries.map(c => c.score * 1.5),
                        color: sampleData.countries.map(c => regimeColors[c.expertRegime]),
                        line: viewOption === 'comparison' ? {
                            width: 1,
                            color: 'black'
                        } : {}
                    },
                    text: sampleData.countries.map(c => `${c.country}<br>Expert Label: ${c.expertRegime}`),
                    hoverinfo: 'text',
                    name: 'Expert Classifications',
                    opacity: viewOption === 'comparison' ? 0.7 : 1
                });
            }
            
            const layout = {
                title: viewOption === 'comparison' ? 'ML Clusters vs. Expert Classifications' : 
                       viewOption === 'clusters' ? 'Machine-Discovered Clusters' : 'Expert-Defined Classifications',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: [
                    {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                    {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
                ],
                annotations: viewOption === 'comparison' ? [
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, color: '#000', weight: 'bold'}
                    }
                ] : [],
                margin: {l: 50, r: 20, b: 50, t: 50}
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create implications visualization
        function createImplicationVis() {
            const data = [
                {
                    type: 'scatter',
                    mode: 'markers',
                    x: [1, 2, 3, 4, 2.5],
                    y: [1, 2, 3, 1.5, 2],
                    marker: {
                        size: [70, 80, 60, 50, 90],
                        color: ['#4CAF50', '#2196F3', '#FFC107', '#F44336', '#9C27B0'],
                        opacity: 0.7
                    },
                    text: ['Validation<br>of Metrics', 'Objective<br>Classification', 'Early Warning<br>Potential', 'Democratic<br>Structure', 'ML as<br>Analysis Tool'],
                    hoverinfo: 'text'
                }
            ];
            
            const layout = {
                title: 'Implications of ML-Discovered Clusters',
                showlegend: false,
                xaxis: {showticklabels: false, zeroline: false, title: ''},
                yaxis: {showticklabels: false, zeroline: false, title: ''},
                margin: {l: 20, r: 20, b: 20, t: 50}
            };
            
            Plotly.newPlot('implication-vis', data, layout);
        }

        // Initialize visualizations
        createDimensionPlot();
        createMethodVis();
        createClusterComparison('comparison');
        createImplicationVis();
        
        // Event listener for visualization toggle
        document.getElementById('toggle-view').addEventListener('click', function() {
            const option = document.getElementById('vis-option').value;
            createClusterComparison(option);
        });
    </script>
</body>
</html><!DOCTYPE html>
<html>
<head>
    <title>Democratic Trajectories</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .trajectory-container {
            height: 600px;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }
        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .controls select {
            margin: 0 10px;
            padding: 5px;
        }
    </style>
</head>
<body>
    <div class="controls">
        <select id="country-selector">
            <!-- Will be populated by JavaScript -->
        </select>
        <button id="play-button">Play Animation</button>
    </div>
    <div id="trajectory-plot" class="trajectory-container"></div>
    
    <script>
        // Sample data - replace with your actual data
        const countries = ['Norway', 'United States', 'Hungary', 'Poland', 'Russia', 'China'];
        const years = [2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
        
        // Democracy data over time
        const countryData = {
            'Norway': {
                electoral: [10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0],
                civil: [9.71, 9.71, 9.71, 9.71, 9.71, 9.71, 9.71, 9.71],
                overall: [9.80, 9.87, 9.81, 9.81, 9.81, 9.81, 9.75, 9.81]
            },
            'United States': {
                electoral: [9.17, 9.17, 9.17, 9.17, 9.17, 9.17, 9.17, 9.17],
                civil: [8.24, 8.24, 8.24, 8.24, 8.24, 8.24, 8.24, 8.24],
                overall: [8.05, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85]
            },
            'Hungary': {
                electoral: [8.33, 8.33, 8.33, 8.33, 8.33, 8.33, 7.83, 7.83],
                civil: [6.76, 6.76, 6.76, 6.76, 6.76, 6.76, 6.47, 6.47],
                overall: [7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12]
            },
            'Poland': {
                electoral: [8.33, 8.33, 8.33, 8.33, 8.33, 8.33, 7.83, 7.83],
                civil: [7.35, 7.35, 7.35, 7.35, 7.35, 7.35, 7.06, 7.06],
                overall: [7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09]
            },
            'Russia': {
                electoral: [2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17],
                civil: [2.94, 2.94, 2.94, 2.94, 2.94, 2.94, 2.94, 2.94],
                overall: [3.24, 3.19, 3.11, 3.11, 3.24, 3.24, 2.94, 2.94]
            },
            'China': {
                electoral: [0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00],
                civil: [1.18, 1.18, 1.18, 1.18, 1.18, 1.18, 1.18, 1.18],
                overall: [1.94, 1.94, 1.94, 1.94, 1.94, 1.94, 1.94, 1.94]
            }
        };
        
        // Populate country selector
        const selector = document.getElementById('country-selector');
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country;
            option.text = country;
            selector.appendChild(option);
        });
        
        // Get regime color based on score
        function getRegimeColor(score) {
            if (score >= 8.01) return '#4CAF50'; // Full Democracy
            if (score >= 6.01) return '#2196F3'; // Flawed Democracy
            if (score >= 4.01) return '#FFC107'; // Hybrid Regime
            return '#F44336'; // Authoritarian
        }
        
        // Create initial 3D plot
        function createTrajectoryPlot(country) {
            const data = countryData[country];
            
            const trace = {
                type: 'scatter3d',
                mode: 'lines+markers',
                x: data.electoral,
                y: data.civil,
                z: data.overall,
                text: years,
                marker: {
                    size: 5,
                    color: data.overall.map(getRegimeColor),
                    opacity: 0.8
                },
                line: {
                    color: '#666',
                    width: 2
                },
                name: country
            };
            
            const layout = {
                title: `Democratic Trajectory: ${country} (2017-2024)`,
                scene: {
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    zaxis: {title: 'Democracy Index', range: [0, 10]}
                },
                margin: {l: 0, r: 0, b: 0, t: 50}
            };
            
            Plotly.newPlot('trajectory-plot', [trace], layout);
        }
        
        // Create animation sequence
        function animateTrajectory(country) {
            const data = countryData[country];
            
            // Create frames for each year
            const frames = [];
            for (let i = 1; i <= years.length; i++) {
                frames.push({
                    data: [{
                        x: data.electoral.slice(0, i),
                        y: data.civil.slice(0, i),
                        z: data.overall.slice(0, i)
                    }]
                });
            }
            
            Plotly.animate('trajectory-plot', frames, {
                frame: {duration: 500, redraw: true},
                transition: {duration: 500},
                mode: 'afterall'
            });
        }
        
        // Initialize plot with first country
        createTrajectoryPlot(countries[0]);
        
        // Event listeners
        document.getElementById('country-selector').addEventListener('change', function() {
            createTrajectoryPlot(this.value);
        });
        
        document.getElementById('play-button').addEventListener('click', function() {
            animateTrajectory(document.getElementById('country-selector').value);
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Discovers Democracy | Interactive Story</title>
    <!-- Modern visualization libraries -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary colors */
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            
            /* Regime colors */
            --full-democracy: #4cc9f0;
            --flawed-democracy: #4895ef;
            --hybrid-regime: #f9c74f;
            --authoritarian: #f94144;
            
            /* Backgrounds */
            --bg-main: #fdfeff;
            --bg-card: #ffffff;
            --bg-dark: #212529;
            
            /* Text colors */
            --text-primary: #2b2d42;
            --text-secondary: #586069;
            --text-light: #f8f9fa;
            
            /* UI elements */
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 4rem 0 6rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1.5" fill="rgba(255,255,255,0.2)"/></svg>');
            background-size: 30px 30px;
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        .author-info {
            display: inline-block;
            background-color: rgba(255,255,255,0.15);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            margin-top: 1rem;
        }

        /* Navigation */
        .story-nav {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-around;
            padding: 1rem;
            margin-top: -3rem;
            margin-bottom: 3rem;
            position: relative;
            z-index: 10;
            box-shadow: var(--box-shadow);
        }

        .nav-item {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.75rem 1.25rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .nav-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .nav-item.active {
            background-color: var(--primary);
            color: white;
        }

        /* Story Sections */
        .story-section {
            margin-bottom: 5rem;
            scroll-margin-top: 2rem;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px); /* Start below final position */
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            opacity: 0.2;
            margin-right: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary);
            flex: 1;
        }

        /* General Layout Components */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            height: 100%;
        }

        .text-card {
            padding: 2rem;
        }

        .vis-card {
            height: 450px;
            overflow: hidden;
        }

        /* Insights Cards */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .insight-card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            min-height: 220px;
            transition: var(--transition);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
        }

        .insight-card:nth-child(1)::before {
            background-color: var(--full-democracy);
        }

        .insight-card:nth-child(2)::before {
            background-color: var(--flawed-democracy);
        }

        .insight-card:nth-child(3)::before {
            background-color: var(--hybrid-regime);
        }

        .insight-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* Feature Importance Bars */
        .feature-bar {
            height: 2rem;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin-bottom: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        .feature-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .feature-label {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Interactive Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-button {
            background-color: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1.25rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-button:hover {
            background-color: var(--primary);
            color: white;
        }

        .control-button.active {
            background-color: var(--primary);
            color: white;
        }

        /* Country Explorer */
        .country-selector {
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            width: 100%;
            margin-bottom: 1rem;
            font-family: inherit;
        }

        .country-card {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .country-info {
            flex: 1;
        }

        .country-name {
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .regime-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        /* Borderline Cases Section */
        .borderline-cases {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .borderline-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            border-left: 5px solid var(--accent);
            transition: var(--transition);
        }
        
        .borderline-card:hover {
            transform: translateY(-5px);
        }
        
        .probability-bar {
            height: 8px;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--flawed-democracy) 0%, var(--hybrid-regime) 100%);
        }

        /* Media Queries */
        @media (max-width: 992px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .story-nav {
                flex-wrap: wrap;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        /* Animation Classes */
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-content p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <h1>How Machine Learning Discovered Democracy</h1>
            <h2>An Interactive Journey Through Unsupervised Clustering of Political Regimes</h2>
            <div class="author-info">By Rosalina Torres, Data Analytics Engineering, MS Candidate, Northeastern University</div>
        </div>
    </header>
    
    <div class="container">
        <nav class="story-nav">
            <a href="#data" class="nav-item">The Data</a>
            <a href="#approach" class="nav-item">Unsupervised Approach</a>
            <a href="#discovery" class="nav-item">The Discovery</a>
            <a href="#us-downgrade" class="nav-item">US Downgrade</a>
            <a href="#features" class="nav-item">Key Features</a>
            <a href="#borderline" class="nav-item">Borderline Cases</a>
            <a href="#insights" class="nav-item">Insights</a>
        </nav>
        
        <!-- Section 1: The Data -->
        <section id="data" class="story-section">
            <div class="section-header">
                <div class="section-number">01</div>
                <h3 class="section-title">The Raw Political Data</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>The Economist Intelligence Unit's <strong>Democracy Index</strong> measures political systems worldwide using five key dimensions:</p>
                    <ul style="margin-top: 1rem; margin-left: 1.5rem;">
                        <li><strong>Electoral Process and Pluralism</strong>: Free and fair elections, universal suffrage</li>
                        <li><strong>Functioning of Government</strong>: Checks and balances, transparency</li>
                        <li><strong>Political Participation</strong>: Voter turnout, citizen engagement</li>
                        <li><strong>Political Culture</strong>: Democratic values, peaceful transitions</li>
                        <li><strong>Civil Liberties</strong>: Free speech, association, rule of law</li>
                    </ul>
                    <p style="margin-top: 1.5rem;">For my analysis, I removed all regime classifications and labels, giving the machine learning algorithms access only to the raw dimension scores. This created a <strong>truly unsupervised learning scenario</strong> - could AI identify meaningful political patterns on its own?</p>
                </div>
                <div class="card vis-card" id="dimension-distribution">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 2: Unsupervised Approach -->
        <section id="approach" class="story-section">
            <div class="section-header">
                <div class="section-number">02</div>
                <h3 class="section-title">The Unsupervised Approach</h3>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-method="hierarchical">Hierarchical Clustering</button>
                <button class="control-button" data-method="kmeans">K-Means</button>
                <button class="control-button" data-method="gaussian">Gaussian Mixture</button>
            </div>
            
            <div class="two-column">
                <div class="card vis-card" id="clustering-method">
                    <!-- Visualization will be inserted here -->
                </div>
                <div class="card text-card">
                    <p>Unsupervised machine learning allows us to discover patterns without predetermined labels. I applied multiple clustering algorithms to the democracy data:</p>
                    
                    <div id="method-description" style="margin-top: 1.5rem;">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Hierarchical Clustering</h4>
                        <p>This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.</p>
                    </div>
                    
                    <p style="margin-top: 1.5rem;">Before clustering, data was <strong>standardized</strong> to ensure all dimensions contributed equally to the analysis. This let the natural structure emerge without bias toward any particular dimension.</p>
                </div>
            </div>
        </section>
        
        <!-- Section 3: The Discovery -->
        <section id="discovery" class="story-section">
            <div class="section-header">
                <div class="section-number">03</div>
                <h3 class="section-title">The Amazing Discovery</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p style="font-size: 1.25rem; text-align: center;">Without being told about democratic regime types, the machine learning algorithms <strong>naturally discovered four distinct clusters</strong> that closely match expert classifications!</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-view="comparison">Compare Both</button>
                <button class="control-button" data-view="machine">Machine Clusters</button>
                <button class="control-button" data-view="expert">Expert Labels</button>
            </div>
            
            <div class="card vis-card" style="height: 550px;" id="cluster-comparison">
                <!-- Visualization will be inserted here -->
            </div>
            
            <div style="margin-top: 2rem; text-align: center; background-color: #f8fafc; padding: 1.5rem; border-radius: var(--border-radius);">
                <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Adjusted Rand Index (ARI) measures similarity between clusterings</div>
                <div class="feature-bar" style="max-width: 500px; margin: 0 auto;">
                    <div class="feature-label">Hierarchical Clustering</div>
                    <div class="feature-fill" style="width: 78%; background-color: var(--primary);">0.78</div>
                </div>
                <div class="feature-bar" style="max-width: 500px; margin: 0.75rem auto;">
                    <div class="feature-label">K-Means</div>
                    <div class="feature-fill" style="width: 57%; background-color: var(--accent);">0.57</div>
                </div>
                <p style="margin-top: 0.75rem; font-style: italic;">Higher ARI values indicate better alignment with expert classifications (max = 1.0)</p>
            </div>
        </section>
        
        <!-- Section 4: US Democracy Downgrade -->
        <section id="us-downgrade" class="story-section">
            <div class="section-header">
                <div class="section-number">04</div>
                <h3 class="section-title">The US Democracy Downgrade</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most significant findings revealed by the clustering analysis was the confirmation of the United States' downgrade from a <span style="color: var(--full-democracy); font-weight: 500;">Full Democracy</span> to a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>. This transition, which occurred in 2016, was independently detected by the machine learning algorithm.</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-trend="all">All Countries</button>
                <button class="control-button" data-trend="compare">US vs Norway</button>
                <button class="control-button" data-trend="borderline">US vs Borderline Cases</button>
            </div>
            
            <div class="card vis-card" style="height: 500px;" id="democracy-trends">
                <!-- Trend visualization will be inserted here -->
            </div>
            
            <div class="two-column" style="margin-top: 2rem;">
                <div class="card text-card">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Dimensional Analysis: US vs Norway</h4>
                    <p>While the US maintains strong scores in <strong>Electoral Process</strong> (9.17) and <strong>Civil Liberties</strong> (8.24), it shows significant weaknesses in:</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li><strong>Functioning of Government</strong>: 6.43 (vs. Norway's 9.64)</li>
                        <li><strong>Political Culture</strong>: 6.25 (vs. Norway's 10.00)</li>
                    </ul>
                    <p style="margin-top: 1rem;">These dimensional gaps are precisely what the machine learning algorithms detected, placing the US firmly in a different cluster than full democracies.</p>
                </div>
                <div class="card vis-card" id="us-norway-comparison">
                    <!-- US vs Norway radar chart will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 5: Key Features -->
        <section id="features" class="story-section">
            <div class="section-header">
                <div class="section-number">05</div>
                <h3 class="section-title">The Critical Dimensions</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>Not all democratic dimensions were equally important in clustering countries. The machine learning algorithms revealed which aspects most strongly differentiate political regimes:</p>
                    
                    <div style="margin-top: 1.5rem;" id="feature-bars">
                        <div class="feature-bar">
                            <div class="feature-label">Civil Liberties</div>
                            <div class="feature-fill" style="width: 90%;">0.90</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Electoral Process</div>
                            <div class="feature-fill" style="width: 86%;">0.86</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Functioning of Government</div>
                            <div class="feature-fill" style="width: 75%;">0.75</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Culture</div>
                            <div class="feature-fill" style="width: 72%;">0.72</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Participation</div>
                            <div class="feature-fill" style="width: 64%;">0.64</div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 1.5rem; font-style: italic;">Feature importance was derived from the clustering algorithms' sensitivity to each dimension.</p>
                </div>
                <div class="card vis-card" id="feature-radar">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 6: Borderline Cases -->
        <section id="borderline" class="story-section">
            <div class="section-header">
                <div class="section-number">06</div>
                <h3 class="section-title">Discovering Borderline Cases</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most fascinating discoveries was identifying countries that exist at the boundaries between regime types. These <strong>borderline cases</strong> reveal political systems in transition or with unique characteristics that don't fit neatly into a single category.</p>
                
                <p style="margin-top: 1rem;">The machine learning model assigned these countries <strong>probability scores</strong> for belonging to different clusters, revealing their ambiguous status.</p>
            </div>
            
            <div class="borderline-cases">
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Hungary</h4>
                    <p>Officially classified as a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>, but machine learning detected characteristics of a <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span>.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 53%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>53% Flawed Democracy</span>
                        <span>47% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Poland</h4>
                    <p>Despite its <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> label, machine learning found significant <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> patterns.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 51%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>51% Flawed Democracy</span>
                        <span>49% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Mexico</h4>
                    <p>Officially a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> but showing strong indicators of <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> characteristics.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 48%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>48% Flawed Democracy</span>
                        <span>52% Hybrid Regime</span>
                    </div>
                </div>
            </div>
            
            <div class="card vis-card" style="margin-top: 2rem;" id="borderline-explorer">
                <!-- Visualization will be inserted here -->
            </div>
        </section>
        
        <!-- Section 7: Key Insights -->
        <section id="insights" class="story-section">
            <div class="section-header">
                <div class="section-number">07</div>
                <h3 class="section-title">Key Research Insights</h3>
            </div>
            
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-title">Natural Patterns in Political Data</div>
                    <p>Unsupervised machine learning naturally discovered four distinct clusters that closely align with expert-defined regime types. This validates that democratic classifications reflect inherent patterns in political data.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Hierarchical Classification Works Best</div>
                    <p>Hierarchical clustering outperformed other algorithms, suggesting that democratic systems exist in a nested relationship rather than as completely separate categories. Democracy exists on a spectrum, not in discrete boxes.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Data-Driven Early Warning System</div>
                    <p>Machine learning discovered borderline cases before political scientists recognized their ambiguous status. This suggests AI could serve as an early warning system for democratic backsliding or advancement.</p>
                </div>
            </div>
            
            <div class="card text-card" style="margin-top: 2rem; text-align: center;">
                <p style="font-size: 1.5rem; font-weight: 300; color: var(--primary);">When treated with care, <strong>data can speak</strong> — and sometimes, it echoes justice</p>
                
                <p style="margin-top: 1.5rem;">What's most remarkable isn't simply that machines can classify regimes—it's that they can discover the inherent structure of democracy independently, with no human guidance.</p>
                
                <p style="margin-top: 1rem;">This adds a powerful new perspective to political science: the patterns of democracy are not merely human constructs, but are embedded in the data itself.</p>
            </div>
        </section>
        
        <div style="margin-top: 3rem; text-align: center;">
            <a href="index.html" style="display: inline-block; padding: 1rem 2rem; background-color: var(--primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 500; box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3); transition: var(--transition);">
                Return to Main Dashboard
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>Data Analytics Engineering, MS Candidate</p>
            <p>© 2025 | Northeastern University</p>
        </div>
    </footer>

    <script>
        // Data for the visualizations
        const regimeColors = {
            'Full Democracy': '#4cc9f0',
            'Flawed Democracy': '#4895ef',
            'Hybrid Regime': '#f9c74f',
            'Authoritarian': '#f94144',
            'Cluster 1': '#4cc9f0',
            'Cluster 2': '#4895ef',
            'Cluster 3': '#f9c74f',
            'Cluster 4': '#f94144'
        };
        
        const countries = [
            {name: 'Norway', electoral: 10.00, civil: 9.71, functioning: 9.64, participation: 10.00, culture: 10.00, score: 9.81, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'New Zealand', electoral: 10.00, civil: 9.71, functioning: 9.29, participation: 8.89, culture: 10.00, score: 9.61, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'United States', electoral: 9.17, civil: 8.24, functioning: 6.43, participation: 7.78, culture: 6.25, score: 7.85, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'France', electoral: 9.58, civil: 8.82, functioning: 6.79, participation: 7.78, culture: 6.88, score: 7.99, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'Hungary', electoral: 7.83, civil: 6.47, functioning: 5.71, participation: 5.00, culture: 5.63, score: 6.12, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Poland', electoral: 7.83, civil: 7.06, functioning: 5.36, participation: 5.56, culture: 4.38, score: 6.09, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Mexico', electoral: 7.50, civil: 5.59, functioning: 5.36, participation: 7.22, culture: 4.38, score: 6.07, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Turkey', electoral: 5.83, civil: 3.24, functioning: 5.00, participation: 5.56, culture: 5.00, score: 5.04, expertLabel: 'Hybrid Regime', mlCluster: 'Cluster 3'},
            {name: 'Russia', electoral: 2.17, civil: 2.94, functioning: 1.79, participation: 5.00, culture: 3.13, score: 2.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'},
            {name: 'China', electoral: 0.00, civil: 1.18, functioning: 4.29, participation: 3.33, culture: 2.50, score: 1.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'}
        ];

        // Sample cluster statistics
        const clusterStats = {
            'hierarchical': {
                name: 'Hierarchical Clustering',
                ari: 0.78,
                description: 'This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.',
                visualization: 'tree'
            },
            'kmeans': {
                name: 'K-Means Clustering',
                ari: 0.57,
                description: 'K-Means partitions countries into distinct clusters while minimizing within-cluster variance. While effective, it was less nuanced than hierarchical methods, particularly for countries at regime boundaries.',
                visualization: 'scatter'
            },
            'gaussian': {
                name: 'Gaussian Mixture',
                ari: 0.52,
                description: 'This model assumes countries come from a mixture of gaussian distributions. It provides probability estimates for cluster membership, making it useful for identifying borderline cases, but had lower overall accuracy.',
                visualization: 'ellipse'
            }
        };
        
        // Create dimension distribution visualization
        function createDimensionDistribution() {
            // Prepare data
            const dimensions = ['Electoral Process', 'Functioning of Govt', 'Political Participation', 'Political Culture', 'Civil Liberties'];
            
            // Calculate averages by regime type
            const regimeTypes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            const averagesByRegime = {};
            
            regimeTypes.forEach(regime => {
                averagesByRegime[regime] = {
                    electoral: 0,
                    functioning: 0,
                    participation: 0,
                    culture: 0,
                    civil: 0,
                    count: 0
                };
            });
            
            countries.forEach(country => {
                const regime = country.expertLabel;
                averagesByRegime[regime].electoral += country.electoral;
                averagesByRegime[regime].functioning += country.functioning;
                averagesByRegime[regime].participation += country.participation;
                averagesByRegime[regime].culture += country.culture;
                averagesByRegime[regime].civil += country.civil;
                averagesByRegime[regime].count += 1;
            });
            
            regimeTypes.forEach(regime => {
                if(averagesByRegime[regime].count > 0) {
                    averagesByRegime[regime].electoral /= averagesByRegime[regime].count;
                    averagesByRegime[regime].functioning /= averagesByRegime[regime].count;
                    averagesByRegime[regime].participation /= averagesByRegime[regime].count;
                    averagesByRegime[regime].culture /= averagesByRegime[regime].count;
                    averagesByRegime[regime].civil /= averagesByRegime[regime].count;
                }
            });
            
            // Create radar chart data
            const data = regimeTypes.map(regime => {
                return {
                    type: 'scatterpolar',
                    r: [
                        averagesByRegime[regime].electoral,
                        averagesByRegime[regime].functioning,
                        averagesByRegime[regime].participation,
                        averagesByRegime[regime].culture,
                        averagesByRegime[regime].civil
                    ],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {
                        color: regimeColors[regime]
                    },
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2
                },
                margin: {
                    l: 50,
                    r: 50,
                    t: 50,
                    b: 50
                },
                title: 'Democracy Dimensions by Regime Type'
            };
            
            Plotly.newPlot('dimension-distribution', data, layout);
        }
        
        // Create clustering methods visualization
        function createClusteringMethod(method) {
            const methodInfo = clusterStats[method];
            
            let data, layout;
            
            // Different visualizations based on method type
            if (method === 'hierarchical') {
                // Create a dendrogram-like visualization
                data = [{
                    type: 'scatter',
                    mode: 'markers+text',
                    x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                    y: [1, 2, 1, 3, 2, 1, 2, 3, 4, 3],
                    text: countries.map(c => c.name),
                    textposition: 'top center',
                    marker: {
                        size: 10,
                        color: countries.map(c => regimeColors[c.expertLabel])
                    },
                    hoverinfo: 'text',
                    name: 'Countries'
                }];
                
                // Add connecting lines to simulate dendrogram
                const shapes = [
                    {type: 'line', x0: 1, y0: 1, x1: 3, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 3, y0: 1, x1: 6, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 6, y0: 1, x1: 8, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 2, y0: 2, x1: 5, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 5, y0: 2, x1: 7, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 4, y0: 3, x1: 9, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 8, y0: 3, x1: 10, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 9, y0: 3, x1: 9, y1: 4, line: {color: 'gray', width: 1}}
                ];
                
                layout = {
                    title: 'Hierarchical Clustering (ARI = 0.78)',
                    shapes: shapes,
                    showlegend: false,
                    xaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    yaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    annotations: [{
                        x: 5,
                        y: 4.5,
                        text: 'Countries are grouped in a hierarchical structure<br>based on similarity across all dimensions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'kmeans') {
                // Create a k-means visualization with centroids
                const centroids = [
                    {x: 9.5, y: 9.5, label: 'Cluster 1'},
                    {x: 8.5, y: 7.5, label: 'Cluster 2'},
                    {x: 6.5, y: 5.0, label: 'Cluster 3'},
                    {x: 1.5, y: 2.0, label: 'Cluster 4'}
                ];
                
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    },
                    {
                        type: 'scatter',
                        x: centroids.map(c => c.x),
                        y: centroids.map(c => c.y),
                        mode: 'markers',
                        marker: {
                            size: 15,
                            color: centroids.map(c => regimeColors[c.label]),
                            symbol: 'x',
                            line: {width: 2, color: 'black'}
                        },
                        hoverinfo: 'text',
                        text: centroids.map(c => `${c.label} Centroid`),
                        name: 'Centroids'
                    }
                ];
                
                layout = {
                    title: 'K-Means Clustering (ARI = 0.57)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'X marks show cluster centroids',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'gaussian') {
                // Gaussian mixture visualization with probability ellipses
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    }
                ];
                
                // Add ellipse shapes representing Gaussian distributions
                const shapes = [
                    {type: 'circle', x0: 8.5, y0: 8.5, x1: 10.5, y1: 10.5, fillcolor: regimeColors['Cluster 1'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 7.5, y0: 6.5, x1: 9.5, y1: 8.5, fillcolor: regimeColors['Cluster 2'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 5.5, y0: 3.5, x1: 7.5, y1: 5.5, fillcolor: regimeColors['Cluster 3'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 0.5, y0: 0.5, x1: 2.5, y1: 2.5, fillcolor: regimeColors['Cluster 4'] + '30', line: {width: 0}}
                ];
                
                layout = {
                    title: 'Gaussian Mixture Model (ARI = 0.52)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    shapes: shapes,
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'Colored regions show probability distributions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            }
            
            Plotly.newPlot('clustering-method', data, layout);
            
            // Update the method description
            document.getElementById('method-description').innerHTML = `
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">${methodInfo.name} (ARI = ${methodInfo.ari})</h4>
                <p>${methodInfo.description}</p>
            `;
        }
        
        // Create cluster comparison visualization
        function createClusterComparison(view = 'comparison') {
            const data = [];
            
            if (view === 'comparison' || view === 'machine') {
                // ML-discovered clusters
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral),
                    y: countries.map(c => c.civil),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.mlCluster]),
                        line: {
                            color: 'white',
                            width: 1
                        }
                    },
                    text: countries.map(c => `${c.name}<br>ML Cluster: ${c.mlCluster}<br>Score: ${c.score}`),
                    name: 'Machine Learning Clusters',
                    hoverinfo: 'text'
                });
            }
            
            if (view === 'comparison' || view === 'expert') {
                // Expert-defined regimes
                const xOffset = view === 'comparison' ? 0.3 : 0;
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    y: countries.map(c => c.civil + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.expertLabel]),
                        symbol: view === 'comparison' ? 'circle-open' : 'circle',
                        line: {
                            color: 'black',
                            width: view === 'comparison' ? 2 : 0
                        }
                    },
                    text: countries.map(c => `${c.name}<br>Expert Label: ${c.expertLabel}<br>Score: ${c.score}`),
                    name: 'Expert Classifications',
                    hoverinfo: 'text'
                });
            }
            
            // Regime boundary lines
            const shapes = [
                {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
            ];
            
            const layout = {
                title: view === 'comparison' ? 'Machine Learning Clusters vs Expert Classifications' :
                       view === 'machine' ? 'Machine-Discovered Clusters (No Labels Used)' : 
                       'Expert-Defined Regime Types',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: shapes,
                height: 500,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                annotations: view === 'comparison' ? [
                    {
                        x: 8.5,
                        y: 1,
                        text: 'Filled circles: ML clusters<br>Open circles: Expert labels',
                        showarrow: false,
                        bgcolor: 'white',
                        borderpad: 4
                    },
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, weight: 'bold'},
                        bgcolor: 'white',
                        borderpad: 4
                    }
                ] : []
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create feature radar plot
        function createFeatureRadar() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            // Create average values for each regime type
            const regimes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            
            const traces = regimes.map(regime => {
                // Filter countries by regime
                const filteredCountries = countries.filter(c => c.expertLabel === regime);
                
                // Calculate averages
                const electoral = filteredCountries.reduce((sum, c) => sum + c.electoral, 0) / filteredCountries.length;
                const civil = filteredCountries.reduce((sum, c) => sum + c.civil, 0) / filteredCountries.length;
                const functioning = filteredCountries.reduce((sum, c) => sum + c.functioning, 0) / filteredCountries.length;
                const participation = filteredCountries.reduce((sum, c) => sum + c.participation, 0) / filteredCountries.length;
                const culture = filteredCountries.reduce((sum, c) => sum + c.culture, 0) / filteredCountries.length;
                
                return {
                    type: 'scatterpolar',
                    r: [electoral, civil, functioning, participation, culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {color: regimeColors[regime]},
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democracy Dimensions by Regime Type',
                legend: {
                    orientation: 'h',
                    y: -0.2
                }
            };
            
            Plotly.newPlot('feature-radar', traces, layout);
        }
        
        // Create democracy trends visualization
        function createDemocracyTrends(trendType = 'all') {
            const years = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
            
            // Democracy index scores over time
            const trends = {
                'Norway': [9.93, 9.93, 9.87, 9.87, 9.87, 9.81, 9.81, 9.81, 9.75, 9.81],
                'United States': [8.05, 7.98, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85, 7.85],
                'Sweden': [9.45, 9.39, 9.39, 9.39, 9.39, 9.26, 9.26, 9.39, 9.39, 9.39],
                'New Zealand': [9.26, 9.26, 9.26, 9.26, 9.26, 9.25, 9.37, 9.37, 9.61, 9.61],
                'Hungary': [7.53, 7.25, 7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12],
                'Poland': [7.09, 7.09, 7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09],
                'Mexico': [6.55, 6.47, 6.47, 6.41, 6.19, 6.09, 6.09, 6.07, 6.07, 6.07]
            };
            
            // Full Democracy threshold
            const fullDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(8.01),
                mode: 'lines',
                name: 'Full Democracy Threshold',
                line: {
                    color: 'rgba(76, 201, 240, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            // Flawed Democracy threshold
            const flawedDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(6.01),
                mode: 'lines',
                name: 'Flawed Democracy Threshold',
                line: {
                    color: 'rgba(247, 37, 133, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            const data = [fullDemocracyLine, flawedDemocracyLine];
            
            if (trendType === 'all') {
                // Add all countries
                Object.keys(trends).forEach(country => {
                    // Choose color based on average score
                    const avgScore = trends[country].reduce((a, b) => a + b, 0) / trends[country].length;
                    let color;
                    if (avgScore >= 8.01) color = regimeColors['Full Democracy'];
                    else if (avgScore >= 6.01) color = regimeColors['Flawed Democracy'];
                    else if (avgScore >= 4.01) color = regimeColors['Hybrid Regime'];
                    else color = regimeColors['Authoritarian'];
                    
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: color,
                            width: country === 'United States' ? 3 : 2
                        },
                        marker: {
                            size: country === 'United States' ? 8 : 6
                        }
                    });
                });
            } else if (trendType === 'compare') {
                // Add only US and Norway
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['Norway'],
                    mode: 'lines+markers',
                    name: 'Norway',
                    line: {
                        color: regimeColors['Full Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
            } else if (trendType === 'borderline') {
                // Add US and borderline countries
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                ['Hungary', 'Poland', 'Mexico'].forEach(country => {
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: '#FF5722',
                            width: 2,
                            dash: 'solid'
                        },
                        marker: {
                            size: 6
                        }
                    });
                });
            }
            
            // Add US downgrade annotation
            const annotations = [{
                x: 2016,
                y: 7.98,
                text: 'US Downgraded to<br>Flawed Democracy',
                showarrow: true,
                arrowhead: 5,
                ax: 0,
                ay: -40
            }];
            
            const layout = {
                title: 'Democracy Index Trends (2015-2024)',
                xaxis: {title: 'Year', tickmode: 'array', tickvals: years},
                yaxis: {title: 'Democracy Index Score', range: [5.5, 10]},
                annotations: annotations,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                hovermode: 'closest'
            };
            
            Plotly.newPlot('democracy-trends', data, layout);
        }
        
        // Create US vs Norway radar comparison
        function createUSNorwayComparison() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            const us = {
                electoral: 9.17,
                civil: 8.24,
                functioning: 6.43,
                participation: 7.78,
                culture: 6.25
            };
            
            const norway = {
                electoral: 10.0,
                civil: 9.71,
                functioning: 9.64,
                participation: 10.0,
                culture: 10.0
            };
            
            const data = [
                {
                    type: 'scatterpolar',
                    r: [us.electoral, us.civil, us.functioning, us.participation, us.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'United States',
                    line: {color: regimeColors['Flawed Democracy']},
                    fillcolor: regimeColors['Flawed Democracy'] + '40'
                },
                {
                    type: 'scatterpolar',
                    r: [norway.electoral, norway.civil, norway.functioning, norway.participation, norway.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'Norway',
                    line: {color: regimeColors['Full Democracy']},
                    fillcolor: regimeColors['Full Democracy'] + '40'
                }
            ];
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democratic Dimensions Comparison'
            };
            
            Plotly.newPlot('us-norway-comparison', data, layout);
        }
        
        // Create borderline explorer
        function createBorderlineExplorer() {
            const borderlineCountries = countries.filter(c => c.isBorderline);
            
            // Add a couple more for demonstration
            borderlineCountries.push({
                name: 'Tunisia',
                electoral: 7.50,
                civil: 6.47,
                functioning: 5.36,
                participation: 6.11,
                culture: 5.63,
                score: 6.08,
                expertLabel: 'Flawed Democracy',
                mlCluster: 'Cluster 3',
                isBorderline: true
            });
            
            // Prepare data for scatter plot
            const trace = {
                type: 'scatter',
                x: borderlineCountries.map(c => c.functioning),
                y: borderlineCountries.map(c => c.civil),
                mode: 'markers+text',
                text: borderlineCountries.map(c => c.name),
                textposition: 'top',
                marker: {
                    size: borderlineCountries.map(c => c.score * 3),
                    color: borderlineCountries.map(c => '#FF5722'),
                    opacity: 0.7,
                    line: {
                        color: 'white',
                        width: 2
                    }
                },
                name: 'Borderline Countries'
            };
            
            const layout = {
                title: 'Borderline Countries: Functioning of Government vs Civil Liberties',
                xaxis: {title: 'Functioning of Government', range: [4, 7]},
                yaxis: {title: 'Civil Liberties', range: [5, 8]},
                shapes: [
                    // Hybrid/Flawed border region
                    {
                        type: 'rect',
                        x0: 4, 
                        y0: 5, 
                        x1: 6.5, 
                        y1: 7.5, 
                        fillcolor: 'rgba(255,193,7,0.2)', 
                        line: {width: 0}
                    }
                ],
                annotations: [
                    {
                        x: 5.25,
                        y: 6.25,
                        text: 'Borderline<br>Region',
                        showarrow: false,
                        font: {size: 14, color: '#FF5722'}
                    }
                ],
                height: 400
            };
            
            Plotly.newPlot('borderline-explorer', [trace], layout);
        }
        
        // Initialize all visualizations
        window.onload = function() {
            createDimensionDistribution();
            createClusteringMethod('hierarchical');
            createClusterComparison('comparison');
            createFeatureRadar();
            createDemocracyTrends('all');
            createUSNorwayComparison();
            createBorderlineExplorer();
            
            // Set up event listeners for interactive controls
            document.querySelectorAll('[data-method]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-method]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusteringMethod(this.dataset.method);
                });
            });
            
            document.querySelectorAll('[data-view]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusterComparison(this.dataset.view);
                });
            });
            
            document.querySelectorAll('[data-trend]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-trend]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createDemocracyTrends(this.dataset.trend);
                });
            });
            
            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, {
                threshold: 0.1
            });
            
            document.querySelectorAll('.story-section').forEach(section => {
                observer.observe(section);
            });
            
            // Smooth scrolling for nav links
            document.querySelectorAll('.nav-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
        };
    </script>
</body>
</html>ådemocracy_virtualization.html<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Discovers Democracy | Interactive Story</title>
    <!-- Modern visualization libraries -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary colors */
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            
            /* Regime colors */
            --full-democracy: #4cc9f0;
            --flawed-democracy: #4895ef;
            --hybrid-regime: #f9c74f;
            --authoritarian: #f94144;
            
            /* Backgrounds */
            --bg-main: #fdfeff;
            --bg-card: #ffffff;
            --bg-dark: #212529;
            
            /* Text colors */
            --text-primary: #2b2d42;
            --text-secondary: #586069;
            --text-light: #f8f9fa;
            
            /* UI elements */
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 4rem 0 6rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1.5" fill="rgba(255,255,255,0.2)"/></svg>');
            background-size: 30px 30px;
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        .author-info {
            display: inline-block;
            background-color: rgba(255,255,255,0.15);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            margin-top: 1rem;
        }

        /* Navigation */
        .story-nav {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-around;
            padding: 1rem;
            margin-top: -3rem;
            margin-bottom: 3rem;
            position: relative;
            z-index: 10;
            box-shadow: var(--box-shadow);
        }

        .nav-item {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.75rem 1.25rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .nav-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .nav-item.active {
            background-color: var(--primary);
            color: white;
        }

        /* Story Sections */
        .story-section {
            margin-bottom: 5rem;
            scroll-margin-top: 2rem;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px); /* Start below final position */
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            opacity: 0.2;
            margin-right: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary);
            flex: 1;
        }

        /* General Layout Components */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            height: 100%;
        }

        .text-card {
            padding: 2rem;
        }

        .vis-card {
            height: 450px;
            overflow: hidden;
        }

        /* Insights Cards */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .insight-card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            min-height: 220px;
            transition: var(--transition);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
        }

        .insight-card:nth-child(1)::before {
            background-color: var(--full-democracy);
        }

        .insight-card:nth-child(2)::before {
            background-color: var(--flawed-democracy);
        }

        .insight-card:nth-child(3)::before {
            background-color: var(--hybrid-regime);
        }

        .insight-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* Feature Importance Bars */
        .feature-bar {
            height: 2rem;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin-bottom: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        .feature-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .feature-label {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Interactive Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-button {
            background-color: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1.25rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-button:hover {
            background-color: var(--primary);
            color: white;
        }

        .control-button.active {
            background-color: var(--primary);
            color: white;
        }

        /* Country Explorer */
        .country-selector {
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            width: 100%;
            margin-bottom: 1rem;
            font-family: inherit;
        }

        .country-card {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .country-info {
            flex: 1;
        }

        .country-name {
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .regime-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        /* Borderline Cases Section */
        .borderline-cases {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .borderline-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            border-left: 5px solid var(--accent);
            transition: var(--transition);
        }
        
        .borderline-card:hover {
            transform: translateY(-5px);
        }
        
        .probability-bar {
            height: 8px;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--flawed-democracy) 0%, var(--hybrid-regime) 100%);
        }

        /* Media Queries */
        @media (max-width: 992px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .story-nav {
                flex-wrap: wrap;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        /* Animation Classes */
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-content p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <h1>How Machine Learning Discovered Democracy</h1>
            <h2>An Interactive Journey Through Unsupervised Clustering of Political Regimes</h2>
            <div class="author-info">By Rosalina Torres, Data Analytics Engineering, MS Candidate, Northeastern University</div>
        </div>
    </header>
    
    <div class="container">
        <nav class="story-nav">
            <a href="#data" class="nav-item">The Data</a>
            <a href="#approach" class="nav-item">Unsupervised Approach</a>
            <a href="#discovery" class="nav-item">The Discovery</a>
            <a href="#us-downgrade" class="nav-item">US Downgrade</a>
            <a href="#features" class="nav-item">Key Features</a>
            <a href="#borderline" class="nav-item">Borderline Cases</a>
            <a href="#insights" class="nav-item">Insights</a>
        </nav>
        
        <!-- Section 1: The Data -->
        <section id="data" class="story-section">
            <div class="section-header">
                <div class="section-number">01</div>
                <h3 class="section-title">The Raw Political Data</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>The Economist Intelligence Unit's <strong>Democracy Index</strong> measures political systems worldwide using five key dimensions:</p>
                    <ul style="margin-top: 1rem; margin-left: 1.5rem;">
                        <li><strong>Electoral Process and Pluralism</strong>: Free and fair elections, universal suffrage</li>
                        <li><strong>Functioning of Government</strong>: Checks and balances, transparency</li>
                        <li><strong>Political Participation</strong>: Voter turnout, citizen engagement</li>
                        <li><strong>Political Culture</strong>: Democratic values, peaceful transitions</li>
                        <li><strong>Civil Liberties</strong>: Free speech, association, rule of law</li>
                    </ul>
                    <p style="margin-top: 1.5rem;">For my analysis, I removed all regime classifications and labels, giving the machine learning algorithms access only to the raw dimension scores. This created a <strong>truly unsupervised learning scenario</strong> - could AI identify meaningful political patterns on its own?</p>
                </div>
                <div class="card vis-card" id="dimension-distribution">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 2: Unsupervised Approach -->
        <section id="approach" class="story-section">
            <div class="section-header">
                <div class="section-number">02</div>
                <h3 class="section-title">The Unsupervised Approach</h3>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-method="hierarchical">Hierarchical Clustering</button>
                <button class="control-button" data-method="kmeans">K-Means</button>
                <button class="control-button" data-method="gaussian">Gaussian Mixture</button>
            </div>
            
            <div class="two-column">
                <div class="card vis-card" id="clustering-method">
                    <!-- Visualization will be inserted here -->
                </div>
                <div class="card text-card">
                    <p>Unsupervised machine learning allows us to discover patterns without predetermined labels. I applied multiple clustering algorithms to the democracy data:</p>
                    
                    <div id="method-description" style="margin-top: 1.5rem;">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Hierarchical Clustering</h4>
                        <p>This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.</p>
                    </div>
                    
                    <p style="margin-top: 1.5rem;">Before clustering, data was <strong>standardized</strong> to ensure all dimensions contributed equally to the analysis. This let the natural structure emerge without bias toward any particular dimension.</p>
                </div>
            </div>
        </section>
        
        <!-- Section 3: The Discovery -->
        <section id="discovery" class="story-section">
            <div class="section-header">
                <div class="section-number">03</div>
                <h3 class="section-title">The Amazing Discovery</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p style="font-size: 1.25rem; text-align: center;">Without being told about democratic regime types, the machine learning algorithms <strong>naturally discovered four distinct clusters</strong> that closely match expert classifications!</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-view="comparison">Compare Both</button>
                <button class="control-button" data-view="machine">Machine Clusters</button>
                <button class="control-button" data-view="expert">Expert Labels</button>
            </div>
            
            <div class="card vis-card" style="height: 550px;" id="cluster-comparison">
                <!-- Visualization will be inserted here -->
            </div>
            
            <div style="margin-top: 2rem; text-align: center; background-color: #f8fafc; padding: 1.5rem; border-radius: var(--border-radius);">
                <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Adjusted Rand Index (ARI) measures similarity between clusterings</div>
                <div class="feature-bar" style="max-width: 500px; margin: 0 auto;">
                    <div class="feature-label">Hierarchical Clustering</div>
                    <div class="feature-fill" style="width: 78%; background-color: var(--primary);">0.78</div>
                </div>
                <div class="feature-bar" style="max-width: 500px; margin: 0.75rem auto;">
                    <div class="feature-label">K-Means</div>
                    <div class="feature-fill" style="width: 57%; background-color: var(--accent);">0.57</div>
                </div>
                <p style="margin-top: 0.75rem; font-style: italic;">Higher ARI values indicate better alignment with expert classifications (max = 1.0)</p>
            </div>
        </section>
        
        <!-- Section 4: US Democracy Downgrade -->
        <section id="us-downgrade" class="story-section">
            <div class="section-header">
                <div class="section-number">04</div>
                <h3 class="section-title">The US Democracy Downgrade</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most significant findings revealed by the clustering analysis was the confirmation of the United States' downgrade from a <span style="color: var(--full-democracy); font-weight: 500;">Full Democracy</span> to a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>. This transition, which occurred in 2016, was independently detected by the machine learning algorithm.</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-trend="all">All Countries</button>
                <button class="control-button" data-trend="compare">US vs Norway</button>
                <button class="control-button" data-trend="borderline">US vs Borderline Cases</button>
            </div>
            
            <div class="card vis-card" style="height: 500px;" id="democracy-trends">
                <!-- Trend visualization will be inserted here -->
            </div>
            
            <div class="two-column" style="margin-top: 2rem;">
                <div class="card text-card">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Dimensional Analysis: US vs Norway</h4>
                    <p>While the US maintains strong scores in <strong>Electoral Process</strong> (9.17) and <strong>Civil Liberties</strong> (8.24), it shows significant weaknesses in:</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li><strong>Functioning of Government</strong>: 6.43 (vs. Norway's 9.64)</li>
                        <li><strong>Political Culture</strong>: 6.25 (vs. Norway's 10.00)</li>
                    </ul>
                    <p style="margin-top: 1rem;">These dimensional gaps are precisely what the machine learning algorithms detected, placing the US firmly in a different cluster than full democracies.</p>
                </div>
                <div class="card vis-card" id="us-norway-comparison">
                    <!-- US vs Norway radar chart will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 5: Key Features -->
        <section id="features" class="story-section">
            <div class="section-header">
                <div class="section-number">05</div>
                <h3 class="section-title">The Critical Dimensions</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>Not all democratic dimensions were equally important in clustering countries. The machine learning algorithms revealed which aspects most strongly differentiate political regimes:</p>
                    
                    <div style="margin-top: 1.5rem;" id="feature-bars">
                        <div class="feature-bar">
                            <div class="feature-label">Civil Liberties</div>
                            <div class="feature-fill" style="width: 90%;">0.90</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Electoral Process</div>
                            <div class="feature-fill" style="width: 86%;">0.86</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Functioning of Government</div>
                            <div class="feature-fill" style="width: 75%;">0.75</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Culture</div>
                            <div class="feature-fill" style="width: 72%;">0.72</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Participation</div>
                            <div class="feature-fill" style="width: 64%;">0.64</div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 1.5rem; font-style: italic;">Feature importance was derived from the clustering algorithms' sensitivity to each dimension.</p>
                </div>
                <div class="card vis-card" id="feature-radar">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 6: Borderline Cases -->
        <section id="borderline" class="story-section">
            <div class="section-header">
                <div class="section-number">06</div>
                <h3 class="section-title">Discovering Borderline Cases</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most fascinating discoveries was identifying countries that exist at the boundaries between regime types. These <strong>borderline cases</strong> reveal political systems in transition or with unique characteristics that don't fit neatly into a single category.</p>
                
                <p style="margin-top: 1rem;">The machine learning model assigned these countries <strong>probability scores</strong> for belonging to different clusters, revealing their ambiguous status.</p>
            </div>
            
            <div class="borderline-cases">
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Hungary</h4>
                    <p>Officially classified as a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>, but machine learning detected characteristics of a <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span>.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 53%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>53% Flawed Democracy</span>
                        <span>47% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Poland</h4>
                    <p>Despite its <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> label, machine learning found significant <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> patterns.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 51%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>51% Flawed Democracy</span>
                        <span>49% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Mexico</h4>
                    <p>Officially a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> but showing strong indicators of <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> characteristics.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 48%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>48% Flawed Democracy</span>
                        <span>52% Hybrid Regime</span>
                    </div>
                </div>
            </div>
            
            <div class="card vis-card" style="margin-top: 2rem;" id="borderline-explorer">
                <!-- Visualization will be inserted here -->
            </div>
        </section>
        
        <!-- Section 7: Key Insights -->
        <section id="insights" class="story-section">
            <div class="section-header">
                <div class="section-number">07</div>
                <h3 class="section-title">Key Research Insights</h3>
            </div>
            
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-title">Natural Patterns in Political Data</div>
                    <p>Unsupervised machine learning naturally discovered four distinct clusters that closely align with expert-defined regime types. This validates that democratic classifications reflect inherent patterns in political data.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Hierarchical Classification Works Best</div>
                    <p>Hierarchical clustering outperformed other algorithms, suggesting that democratic systems exist in a nested relationship rather than as completely separate categories. Democracy exists on a spectrum, not in discrete boxes.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Data-Driven Early Warning System</div>
                    <p>Machine learning discovered borderline cases before political scientists recognized their ambiguous status. This suggests AI could serve as an early warning system for democratic backsliding or advancement.</p>
                </div>
            </div>
            
            <div class="card text-card" style="margin-top: 2rem; text-align: center;">
                <p style="font-size: 1.5rem; font-weight: 300; color: var(--primary);">When treated with care, <strong>data can speak</strong> — and sometimes, it echoes justice</p>
                
                <p style="margin-top: 1.5rem;">What's most remarkable isn't simply that machines can classify regimes—it's that they can discover the inherent structure of democracy independently, with no human guidance.</p>
                
                <p style="margin-top: 1rem;">This adds a powerful new perspective to political science: the patterns of democracy are not merely human constructs, but are embedded in the data itself.</p>
            </div>
        </section>
        
        <div style="margin-top: 3rem; text-align: center;">
            <a href="index.html" style="display: inline-block; padding: 1rem 2rem; background-color: var(--primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 500; box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3); transition: var(--transition);">
                Return to Main Dashboard
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>Data Analytics Engineering, MS Candidate</p>
            <p>© 2025 | Northeastern University</p>
        </div>
    </footer>

    <script>
        // Data for the visualizations
        const regimeColors = {
            'Full Democracy': '#4cc9f0',
            'Flawed Democracy': '#4895ef',
            'Hybrid Regime': '#f9c74f',
            'Authoritarian': '#f94144',
            'Cluster 1': '#4cc9f0',
            'Cluster 2': '#4895ef',
            'Cluster 3': '#f9c74f',
            'Cluster 4': '#f94144'
        };
        
        const countries = [
            {name: 'Norway', electoral: 10.00, civil: 9.71, functioning: 9.64, participation: 10.00, culture: 10.00, score: 9.81, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'New Zealand', electoral: 10.00, civil: 9.71, functioning: 9.29, participation: 8.89, culture: 10.00, score: 9.61, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'United States', electoral: 9.17, civil: 8.24, functioning: 6.43, participation: 7.78, culture: 6.25, score: 7.85, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'France', electoral: 9.58, civil: 8.82, functioning: 6.79, participation: 7.78, culture: 6.88, score: 7.99, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'Hungary', electoral: 7.83, civil: 6.47, functioning: 5.71, participation: 5.00, culture: 5.63, score: 6.12, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Poland', electoral: 7.83, civil: 7.06, functioning: 5.36, participation: 5.56, culture: 4.38, score: 6.09, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Mexico', electoral: 7.50, civil: 5.59, functioning: 5.36, participation: 7.22, culture: 4.38, score: 6.07, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Turkey', electoral: 5.83, civil: 3.24, functioning: 5.00, participation: 5.56, culture: 5.00, score: 5.04, expertLabel: 'Hybrid Regime', mlCluster: 'Cluster 3'},
            {name: 'Russia', electoral: 2.17, civil: 2.94, functioning: 1.79, participation: 5.00, culture: 3.13, score: 2.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'},
            {name: 'China', electoral: 0.00, civil: 1.18, functioning: 4.29, participation: 3.33, culture: 2.50, score: 1.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'}
        ];

        // Sample cluster statistics
        const clusterStats = {
            'hierarchical': {
                name: 'Hierarchical Clustering',
                ari: 0.78,
                description: 'This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.',
                visualization: 'tree'
            },
            'kmeans': {
                name: 'K-Means Clustering',
                ari: 0.57,
                description: 'K-Means partitions countries into distinct clusters while minimizing within-cluster variance. While effective, it was less nuanced than hierarchical methods, particularly for countries at regime boundaries.',
                visualization: 'scatter'
            },
            'gaussian': {
                name: 'Gaussian Mixture',
                ari: 0.52,
                description: 'This model assumes countries come from a mixture of gaussian distributions. It provides probability estimates for cluster membership, making it useful for identifying borderline cases, but had lower overall accuracy.',
                visualization: 'ellipse'
            }
        };
        
        // Create dimension distribution visualization
        function createDimensionDistribution() {
            // Prepare data
            const dimensions = ['Electoral Process', 'Functioning of Govt', 'Political Participation', 'Political Culture', 'Civil Liberties'];
            
            // Calculate averages by regime type
            const regimeTypes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            const averagesByRegime = {};
            
            regimeTypes.forEach(regime => {
                averagesByRegime[regime] = {
                    electoral: 0,
                    functioning: 0,
                    participation: 0,
                    culture: 0,
                    civil: 0,
                    count: 0
                };
            });
            
            countries.forEach(country => {
                const regime = country.expertLabel;
                averagesByRegime[regime].electoral += country.electoral;
                averagesByRegime[regime].functioning += country.functioning;
                averagesByRegime[regime].participation += country.participation;
                averagesByRegime[regime].culture += country.culture;
                averagesByRegime[regime].civil += country.civil;
                averagesByRegime[regime].count += 1;
            });
            
            regimeTypes.forEach(regime => {
                if(averagesByRegime[regime].count > 0) {
                    averagesByRegime[regime].electoral /= averagesByRegime[regime].count;
                    averagesByRegime[regime].functioning /= averagesByRegime[regime].count;
                    averagesByRegime[regime].participation /= averagesByRegime[regime].count;
                    averagesByRegime[regime].culture /= averagesByRegime[regime].count;
                    averagesByRegime[regime].civil /= averagesByRegime[regime].count;
                }
            });
            
            // Create radar chart data
            const data = regimeTypes.map(regime => {
                return {
                    type: 'scatterpolar',
                    r: [
                        averagesByRegime[regime].electoral,
                        averagesByRegime[regime].functioning,
                        averagesByRegime[regime].participation,
                        averagesByRegime[regime].culture,
                        averagesByRegime[regime].civil
                    ],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {
                        color: regimeColors[regime]
                    },
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2
                },
                margin: {
                    l: 50,
                    r: 50,
                    t: 50,
                    b: 50
                },
                title: 'Democracy Dimensions by Regime Type'
            };
            
            Plotly.newPlot('dimension-distribution', data, layout);
        }
        
        // Create clustering methods visualization
        function createClusteringMethod(method) {
            const methodInfo = clusterStats[method];
            
            let data, layout;
            
            // Different visualizations based on method type
            if (method === 'hierarchical') {
                // Create a dendrogram-like visualization
                data = [{
                    type: 'scatter',
                    mode: 'markers+text',
                    x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                    y: [1, 2, 1, 3, 2, 1, 2, 3, 4, 3],
                    text: countries.map(c => c.name),
                    textposition: 'top center',
                    marker: {
                        size: 10,
                        color: countries.map(c => regimeColors[c.expertLabel])
                    },
                    hoverinfo: 'text',
                    name: 'Countries'
                }];
                
                // Add connecting lines to simulate dendrogram
                const shapes = [
                    {type: 'line', x0: 1, y0: 1, x1: 3, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 3, y0: 1, x1: 6, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 6, y0: 1, x1: 8, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 2, y0: 2, x1: 5, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 5, y0: 2, x1: 7, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 4, y0: 3, x1: 9, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 8, y0: 3, x1: 10, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 9, y0: 3, x1: 9, y1: 4, line: {color: 'gray', width: 1}}
                ];
                
                layout = {
                    title: 'Hierarchical Clustering (ARI = 0.78)',
                    shapes: shapes,
                    showlegend: false,
                    xaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    yaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    annotations: [{
                        x: 5,
                        y: 4.5,
                        text: 'Countries are grouped in a hierarchical structure<br>based on similarity across all dimensions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'kmeans') {
                // Create a k-means visualization with centroids
                const centroids = [
                    {x: 9.5, y: 9.5, label: 'Cluster 1'},
                    {x: 8.5, y: 7.5, label: 'Cluster 2'},
                    {x: 6.5, y: 5.0, label: 'Cluster 3'},
                    {x: 1.5, y: 2.0, label: 'Cluster 4'}
                ];
                
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    },
                    {
                        type: 'scatter',
                        x: centroids.map(c => c.x),
                        y: centroids.map(c => c.y),
                        mode: 'markers',
                        marker: {
                            size: 15,
                            color: centroids.map(c => regimeColors[c.label]),
                            symbol: 'x',
                            line: {width: 2, color: 'black'}
                        },
                        hoverinfo: 'text',
                        text: centroids.map(c => `${c.label} Centroid`),
                        name: 'Centroids'
                    }
                ];
                
                layout = {
                    title: 'K-Means Clustering (ARI = 0.57)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'X marks show cluster centroids',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'gaussian') {
                // Gaussian mixture visualization with probability ellipses
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    }
                ];
                
                // Add ellipse shapes representing Gaussian distributions
                const shapes = [
                    {type: 'circle', x0: 8.5, y0: 8.5, x1: 10.5, y1: 10.5, fillcolor: regimeColors['Cluster 1'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 7.5, y0: 6.5, x1: 9.5, y1: 8.5, fillcolor: regimeColors['Cluster 2'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 5.5, y0: 3.5, x1: 7.5, y1: 5.5, fillcolor: regimeColors['Cluster 3'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 0.5, y0: 0.5, x1: 2.5, y1: 2.5, fillcolor: regimeColors['Cluster 4'] + '30', line: {width: 0}}
                ];
                
                layout = {
                    title: 'Gaussian Mixture Model (ARI = 0.52)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    shapes: shapes,
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'Colored regions show probability distributions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            }
            
            Plotly.newPlot('clustering-method', data, layout);
            
            // Update the method description
            document.getElementById('method-description').innerHTML = `
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">${methodInfo.name} (ARI = ${methodInfo.ari})</h4>
                <p>${methodInfo.description}</p>
            `;
        }
        
        // Create cluster comparison visualization
        function createClusterComparison(view = 'comparison') {
            const data = [];
            
            if (view === 'comparison' || view === 'machine') {
                // ML-discovered clusters
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral),
                    y: countries.map(c => c.civil),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.mlCluster]),
                        line: {
                            color: 'white',
                            width: 1
                        }
                    },
                    text: countries.map(c => `${c.name}<br>ML Cluster: ${c.mlCluster}<br>Score: ${c.score}`),
                    name: 'Machine Learning Clusters',
                    hoverinfo: 'text'
                });
            }
            
            if (view === 'comparison' || view === 'expert') {
                // Expert-defined regimes
                const xOffset = view === 'comparison' ? 0.3 : 0;
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    y: countries.map(c => c.civil + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.expertLabel]),
                        symbol: view === 'comparison' ? 'circle-open' : 'circle',
                        line: {
                            color: 'black',
                            width: view === 'comparison' ? 2 : 0
                        }
                    },
                    text: countries.map(c => `${c.name}<br>Expert Label: ${c.expertLabel}<br>Score: ${c.score}`),
                    name: 'Expert Classifications',
                    hoverinfo: 'text'
                });
            }
            
            // Regime boundary lines
            const shapes = [
                {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
            ];
            
            const layout = {
                title: view === 'comparison' ? 'Machine Learning Clusters vs Expert Classifications' :
                       view === 'machine' ? 'Machine-Discovered Clusters (No Labels Used)' : 
                       'Expert-Defined Regime Types',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: shapes,
                height: 500,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                annotations: view === 'comparison' ? [
                    {
                        x: 8.5,
                        y: 1,
                        text: 'Filled circles: ML clusters<br>Open circles: Expert labels',
                        showarrow: false,
                        bgcolor: 'white',
                        borderpad: 4
                    },
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, weight: 'bold'},
                        bgcolor: 'white',
                        borderpad: 4
                    }
                ] : []
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create feature radar plot
        function createFeatureRadar() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            // Create average values for each regime type
            const regimes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            
            const traces = regimes.map(regime => {
                // Filter countries by regime
                const filteredCountries = countries.filter(c => c.expertLabel === regime);
                
                // Calculate averages
                const electoral = filteredCountries.reduce((sum, c) => sum + c.electoral, 0) / filteredCountries.length;
                const civil = filteredCountries.reduce((sum, c) => sum + c.civil, 0) / filteredCountries.length;
                const functioning = filteredCountries.reduce((sum, c) => sum + c.functioning, 0) / filteredCountries.length;
                const participation = filteredCountries.reduce((sum, c) => sum + c.participation, 0) / filteredCountries.length;
                const culture = filteredCountries.reduce((sum, c) => sum + c.culture, 0) / filteredCountries.length;
                
                return {
                    type: 'scatterpolar',
                    r: [electoral, civil, functioning, participation, culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {color: regimeColors[regime]},
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democracy Dimensions by Regime Type',
                legend: {
                    orientation: 'h',
                    y: -0.2
                }
            };
            
            Plotly.newPlot('feature-radar', traces, layout);
        }
        
        // Create democracy trends visualization
        function createDemocracyTrends(trendType = 'all') {
            const years = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
            
            // Democracy index scores over time
            const trends = {
                'Norway': [9.93, 9.93, 9.87, 9.87, 9.87, 9.81, 9.81, 9.81, 9.75, 9.81],
                'United States': [8.05, 7.98, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85, 7.85],
                'Sweden': [9.45, 9.39, 9.39, 9.39, 9.39, 9.26, 9.26, 9.39, 9.39, 9.39],
                'New Zealand': [9.26, 9.26, 9.26, 9.26, 9.26, 9.25, 9.37, 9.37, 9.61, 9.61],
                'Hungary': [7.53, 7.25, 7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12],
                'Poland': [7.09, 7.09, 7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09],
                'Mexico': [6.55, 6.47, 6.47, 6.41, 6.19, 6.09, 6.09, 6.07, 6.07, 6.07]
            };
            
            // Full Democracy threshold
            const fullDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(8.01),
                mode: 'lines',
                name: 'Full Democracy Threshold',
                line: {
                    color: 'rgba(76, 201, 240, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            // Flawed Democracy threshold
            const flawedDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(6.01),
                mode: 'lines',
                name: 'Flawed Democracy Threshold',
                line: {
                    color: 'rgba(247, 37, 133, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            const data = [fullDemocracyLine, flawedDemocracyLine];
            
            if (trendType === 'all') {
                // Add all countries
                Object.keys(trends).forEach(country => {
                    // Choose color based on average score
                    const avgScore = trends[country].reduce((a, b) => a + b, 0) / trends[country].length;
                    let color;
                    if (avgScore >= 8.01) color = regimeColors['Full Democracy'];
                    else if (avgScore >= 6.01) color = regimeColors['Flawed Democracy'];
                    else if (avgScore >= 4.01) color = regimeColors['Hybrid Regime'];
                    else color = regimeColors['Authoritarian'];
                    
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: color,
                            width: country === 'United States' ? 3 : 2
                        },
                        marker: {
                            size: country === 'United States' ? 8 : 6
                        }
                    });
                });
            } else if (trendType === 'compare') {
                // Add only US and Norway
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['Norway'],
                    mode: 'lines+markers',
                    name: 'Norway',
                    line: {
                        color: regimeColors['Full Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
            } else if (trendType === 'borderline') {
                // Add US and borderline countries
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                ['Hungary', 'Poland', 'Mexico'].forEach(country => {
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: '#FF5722',
                            width: 2,
                            dash: 'solid'
                        },
                        marker: {
                            size: 6
                        }
                    });
                });
            }
            
            // Add US downgrade annotation
            const annotations = [{
                x: 2016,
                y: 7.98,
                text: 'US Downgraded to<br>Flawed Democracy',
                showarrow: true,
                arrowhead: 5,
                ax: 0,
                ay: -40
            }];
            
            const layout = {
                title: 'Democracy Index Trends (2015-2024)',
                xaxis: {title: 'Year', tickmode: 'array', tickvals: years},
                yaxis: {title: 'Democracy Index Score', range: [5.5, 10]},
                annotations: annotations,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                hovermode: 'closest'
            };
            
            Plotly.newPlot('democracy-trends', data, layout);
        }
        
        // Create US vs Norway radar comparison
        function createUSNorwayComparison() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            const us = {
                electoral: 9.17,
                civil: 8.24,
                functioning: 6.43,
                participation: 7.78,
                culture: 6.25
            };
            
            const norway = {
                electoral: 10.0,
                civil: 9.71,
                functioning: 9.64,
                participation: 10.0,
                culture: 10.0
            };
            
            const data = [
                {
                    type: 'scatterpolar',
                    r: [us.electoral, us.civil, us.functioning, us.participation, us.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'United States',
                    line: {color: regimeColors['Flawed Democracy']},
                    fillcolor: regimeColors['Flawed Democracy'] + '40'
                },
                {
                    type: 'scatterpolar',
                    r: [norway.electoral, norway.civil, norway.functioning, norway.participation, norway.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'Norway',
                    line: {color: regimeColors['Full Democracy']},
                    fillcolor: regimeColors['Full Democracy'] + '40'
                }
            ];
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democratic Dimensions Comparison'
            };
            
            Plotly.newPlot('us-norway-comparison', data, layout);
        }
        
        // Create borderline explorer
        function createBorderlineExplorer() {
            const borderlineCountries = countries.filter(c => c.isBorderline);
            
            // Add a couple more for demonstration
            borderlineCountries.push({
                name: 'Tunisia',
                electoral: 7.50,
                civil: 6.47,
                functioning: 5.36,
                participation: 6.11,
                culture: 5.63,
                score: 6.08,
                expertLabel: 'Flawed Democracy',
                mlCluster: 'Cluster 3',
                isBorderline: true
            });
            
            // Prepare data for scatter plot
            const trace = {
                type: 'scatter',
                x: borderlineCountries.map(c => c.functioning),
                y: borderlineCountries.map(c => c.civil),
                mode: 'markers+text',
                text: borderlineCountries.map(c => c.name),
                textposition: 'top',
                marker: {
                    size: borderlineCountries.map(c => c.score * 3),
                    color: borderlineCountries.map(c => '#FF5722'),
                    opacity: 0.7,
                    line: {
                        color: 'white',
                        width: 2
                    }
                },
                name: 'Borderline Countries'
            };
            
            const layout = {
                title: 'Borderline Countries: Functioning of Government vs Civil Liberties',
                xaxis: {title: 'Functioning of Government', range: [4, 7]},
                yaxis: {title: 'Civil Liberties', range: [5, 8]},
                shapes: [
                    // Hybrid/Flawed border region
                    {
                        type: 'rect',
                        x0: 4, 
                        y0: 5, 
                        x1: 6.5, 
                        y1: 7.5, 
                        fillcolor: 'rgba(255,193,7,0.2)', 
                        line: {width: 0}
                    }
                ],
                annotations: [
                    {
                        x: 5.25,
                        y: 6.25,
                        text: 'Borderline<br>Region',
                        showarrow: false,
                        font: {size: 14, color: '#FF5722'}
                    }
                ],
                height: 400
            };
            
            Plotly.newPlot('borderline-explorer', [trace], layout);
        }
        
        // Initialize all visualizations
        window.onload = function() {
            createDimensionDistribution();
            createClusteringMethod('hierarchical');
            createClusterComparison('comparison');
            createFeatureRadar();
            createDemocracyTrends('all');
            createUSNorwayComparison();
            createBorderlineExplorer();
            
            // Set up event listeners for interactive controls
            document.querySelectorAll('[data-method]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-method]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusteringMethod(this.dataset.method);
                });
            });
            
            document.querySelectorAll('[data-view]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusterComparison(this.dataset.view);
                });
            });
            
            document.querySelectorAll('[data-trend]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-trend]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createDemocracyTrends(this.dataset.trend);
                });
            });
            
            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, {
                threshold: 0.1
            });
            
            document.querySelectorAll('.story-section').forEach(section => {
                observer.observe(section);
            });
            
            // Smooth scrolling for nav links
            document.querySelectorAll('.nav-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
        };
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Democracy Clustering Analysis | Rosalina Torres</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3949ab;
            --primary-light: #6f74dd;
            --primary-dark: #00227b;
            --secondary: #ef6c00;
            --text: #212121;
            --text-light: #757575;
            --background: #f5f5f5;
            --card: #ffffff;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --info: #2196f3;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(120deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 80px 0;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .author-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 30px;
            border-radius: 50px;
            margin-top: 1.5rem;
            backdrop-filter: blur(5px);
        }
        
        .author-name {
            font-size: 1.4rem;
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .author-title {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Contact bar */
        .contact-bar {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: -25px;
            margin-bottom: 30px;
            position: relative;
            z-index: 10;
        }
        
        .contact-item {
            display: flex;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .contact-label {
            padding: 8px 15px;
            background-color: #333;
            color: white;
            font-weight: 500;
        }
        
        .contact-value {
            padding: 8px 15px;
            font-weight: 500;
            color: white;
        }
        
        /* Navigation */
        .nav-container {
            background-color: var(--card);
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            overflow-x: auto;
            white-space: nowrap;
            padding: 0 15px;
        }
        
        .nav-item {
            padding: 15px 20px;
            font-weight: 500;
            color: var(--text);
            text-decoration: none;
            position: relative;
            transition: color 0.3s;
        }
        
        .nav-item:hover {
            color: var(--primary);
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 20px;
            right: 20px;
            height: 3px;
            background-color: var(--primary);
            border-radius: 3px 3px 0 0;
        }
        
        /* Sections */
        .section {
            margin-bottom: 60px;
        }
        
        .section-header {
            margin-bottom: 30px;
            display: flex;
            align-items: center;
        }
        
        .section-number {
            font-size: 3rem;
            color: var(--primary);
            opacity: 0.15;
            font-weight: 700;
            line-height: 1;
            margin-right: 15px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--primary);
            font-weight: 600;
            line-height: 1.3;
        }
        
        .card {
            background-color: var(--card);
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            overflow: hidden;
        }
        
        .card-header {
            padding: 20px 25px 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .card-header h3 {
            font-size: 1.3rem;
            margin: 0;
            color: var(--primary);
        }
        
        .card-body {
            padding: 25px;
        }
        
        /* Controls */
        .control-group {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .control-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }
        
        select {
            display: block;
            width: 100%;
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background-color: white;
            font-family: inherit;
            font-size: inherit;
        }
        
        /* Buttons */
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .button {
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid var(--primary);
            background-color: transparent;
            color: var(--primary);
            font-family: inherit;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .button:hover {
            background-color: rgba(57, 73, 171, 0.1);
        }
        
        .button.active {
            background-color: var(--primary);
            color: white;
        }
        
        /* Visualization containers */
        .viz-container {
            height: 450px;
        }
        
        /* Footer */
        footer {
            background-color: #333;
            color: rgba(255, 255, 255, 0.8);
            padding: 40px 0;
            text-align: center;
            margin-top: 60px;
        }
        
        .footer-content p {
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .navigation {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .card-body {
                padding: 15px;
            }
            
            .viz-container {
                height: 350px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Clustering Democracy: Unsupervised Machine Learning Analyzes of Global Governance</h1>
            <div class="author-badge">
                <div class="author-name">Rosalina Torres</div>
                <div class="author-title">Data Analytics Engineer | MS Candidate</div>
            </div>
        </div>
    </header>
    
    <!-- Contact Bar -->
    <div class="container">
        <div class="contact-bar">
            <div class="contact-item">
                <span class="contact-label">Profile views</span>
                <span class="contact-value" style="background-color: #ec407a;">146</span>
            </div>
            <div class="contact-item">
                <span class="contact-label">LinkedIn</span>
                <span class="contact-value" style="background-color: #0077b5;">Connect</span>
            </div>
            <div class="contact-item">
                <span class="contact-label">Email</span>
                <span class="contact-value" style="background-color: #d14836;">Contact</span>
            </div>
            <div class="contact-item">
                <span class="contact-label">Languages</span>
                <span class="contact-value" style="background-color: #795548;">Bilingual</span>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="nav-container">
            <nav class="navigation">
                <a href="#explorer" class="nav-item active">Country Explorer</a>
                <a href="#us-decline" class="nav-item">US Decline</a>
                <a href="#clustering" class="nav-item">Democracy Clustering</a>
                <a href="#trends" class="nav-item">Historical Trends</a>
                <a href="#insights" class="nav-item">Key Insights</a>
            </nav>
        </div>
        
        <!-- Country Explorer Section -->
        <section id="explorer" class="section">
            <div class="section-header">
                <div class="section-number">01</div>
                <div class="section-title">Country Explorer</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3>Explore Democratic Dimensions by Country</h3>
                </div>
                <div class="card-body">
                    <div class="control-group">
                        <label for="country-selector" class="control-label">Select a country:</label>
                        <select id="country-selector"></select>
                    </div>
                    
                    <div id="country-info" style="margin-bottom: 20px; padding: 15px; border-radius: 8px; background-color: #f8f9fa;"></div>
                    
                    <div id="radar-chart" class="viz-container"></div>
                </div>
            </div>
        </section>
        
        <!-- US Democracy Decline Section -->
        <section id="us-decline" class="section">
            <div class="section-header">
                <div class="section-number">02</div>
                <div class="section-title">US Democracy Decline</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3>US Downgrade from Full to Flawed Democracy</h3>
                </div>
                <div class="card-body">
                    <div class="button-group">
                        <button class="button active" data-view="categories" id="categories-btn">By Category</button>
                        <button class="button" data-view="trend" id="trend-btn">Historical Trend</button>
                    </div>
                    
                    <div id="us-decline-chart" class="viz-container"></div>
                    
                    <div style="margin-top: 15px; padding: 15px; background-color: #f5f5f5; border-radius: 8px;">
                        <p>The United States was downgraded from a "Full Democracy" to a "Flawed Democracy" in 2016. While it maintains strong scores in Electoral Process (9.17) and Civil Liberties (8.24), it shows significant weaknesses in Functioning of Government (6.43) and Political Culture (6.25).</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Democracy Clustering Section -->
        <section id="clustering" class="section">
            <div class="section-header">
                <div class="section-number">03</div>
                <div class="section-title">Democracy Clustering</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3>Machine Learning Discovered Clusters</h3>
                </div>
                <div class="card-body">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="show-clusters" checked style="margin-right: 10px;">
                            <span>Show Cluster Boundaries</span>
                        </label>
                        <div style="margin-left: auto; font-style: italic; color: var(--text-light);">
                            ARI = 0.78 with expert classification
                        </div>
                    </div>
                    
                    <div id="clustering-chart" class="viz-container"></div>
                    
                    <div style="margin-top: 15px; padding: 15px; background-color: #f5f5f5; border-radius: 8px;">
                        <p>Without being given any labels, the machine learning algorithms naturally discovered four clusters that closely match expert-defined regime types.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Democracy Trends Section -->
        <section id="trends" class="section">
            <div class="section-header">
                <div class="section-number">04</div>
                <div class="section-title">Democracy Score Trends</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3>Democracy Index Trends (2017-2024)</h3>
                </div>
                <div class="card-body">
                    <div class="button-group">
                        <button class="button active" data-trend="all" id="all-btn">All Countries</button>
                        <button class="button" data-trend="us-norway" id="com<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Discovers Democracy | Interactive Story</title>
    <!-- Modern visualization libraries -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary colors */
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            
            /* Regime colors */
            --full-democracy: #4cc9f0;
            --flawed-democracy: #4895ef;
            --hybrid-regime: #f9c74f;
            --authoritarian: #f94144;
            
            /* Backgrounds */
            --bg-main: #fdfeff;
            --bg-card: #ffffff;
            --bg-dark: #212529;
            
            /* Text colors */
            --text-primary: #2b2d42;
            --text-secondary: #586069;
            --text-light: #f8f9fa;
            
            /* UI elements */
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 4rem 0 6rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1.5" fill="rgba(255,255,255,0.2)"/></svg>');
            background-size: 30px 30px;
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        .author-info {
            display: inline-block;
            background-color: rgba(255,255,255,0.15);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            margin-top: 1rem;
        }

        /* Navigation */
        .story-nav {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-around;
            padding: 1rem;
            margin-top: -3rem;
            margin-bottom: 3rem;
            position: relative;
            z-index: 10;
            box-shadow: var(--box-shadow);
        }

        .nav-item {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.75rem 1.25rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .nav-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .nav-item.active {
            background-color: var(--primary);
            color: white;
        }

        /* Story Sections */
        .story-section {
            margin-bottom: 5rem;
            scroll-margin-top: 2rem;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px); /* Start below final position */
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            opacity: 0.2;
            margin-right: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary);
            flex: 1;
        }

        /* General Layout Components */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            height: 100%;
        }

        .text-card {
            padding: 2rem;
        }

        .vis-card {
            height: 450px;
            overflow: hidden;
        }

        /* Insights Cards */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .insight-card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            min-height: 220px;
            transition: var(--transition);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
        }

        .insight-card:nth-child(1)::before {
            background-color: var(--full-democracy);
        }

        .insight-card:nth-child(2)::before {
            background-color: var(--flawed-democracy);
        }

        .insight-card:nth-child(3)::before {
            background-color: var(--hybrid-regime);
        }

        .insight-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* Feature Importance Bars */
        .feature-bar {
            height: 2rem;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin-bottom: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        .feature-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .feature-label {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Interactive Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-button {
            background-color: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1.25rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-button:hover {
            background-color: var(--primary);
            color: white;
        }

        .control-button.active {
            background-color: var(--primary);
            color: white;
        }

        /* Country Explorer */
        .country-selector {
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            width: 100%;
            margin-bottom: 1rem;
            font-family: inherit;
        }

        .country-card {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .country-info {
            flex: 1;
        }

        .country-name {
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .regime-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        /* Borderline Cases Section */
        .borderline-cases {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .borderline-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            border-left: 5px solid var(--accent);
            transition: var(--transition);
        }
        
        .borderline-card:hover {
            transform: translateY(-5px);
        }
        
        .probability-bar {
            height: 8px;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--flawed-democracy) 0%, var(--hybrid-regime) 100%);
        }

        /* Media Queries */
        @media (max-width: 992px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .story-nav {
                flex-wrap: wrap;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        /* Animation Classes */
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-content p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <h1>How Machine Learning Discovered Democracy</h1>
            <h2>An Interactive Journey Through Unsupervised Clustering of Political Regimes</h2>
            <div class="author-info">By Rosalina Torres, Data Analytics Engineering, MS Candidate, Northeastern University</div>
        </div>
    </header>
    
    <div class="container">
        <nav class="story-nav">
            <a href="#data" class="nav-item">The Data</a>
            <a href="#approach" class="nav-item">Unsupervised Approach</a>
            <a href="#discovery" class="nav-item">The Discovery</a>
            <a href="#us-downgrade" class="nav-item">US Downgrade</a>
            <a href="#features" class="nav-item">Key Features</a>
            <a href="#borderline" class="nav-item">Borderline Cases</a>
            <a href="#insights" class="nav-item">Insights</a>
        </nav>
        
        <!-- Section 1: The Data -->
        <section id="data" class="story-section">
            <div class="section-header">
                <div class="section-number">01</div>
                <h3 class="section-title">The Raw Political Data</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>The Economist Intelligence Unit's <strong>Democracy Index</strong> measures political systems worldwide using five key dimensions:</p>
                    <ul style="margin-top: 1rem; margin-left: 1.5rem;">
                        <li><strong>Electoral Process and Pluralism</strong>: Free and fair elections, universal suffrage</li>
                        <li><strong>Functioning of Government</strong>: Checks and balances, transparency</li>
                        <li><strong>Political Participation</strong>: Voter turnout, citizen engagement</li>
                        <li><strong>Political Culture</strong>: Democratic values, peaceful transitions</li>
                        <li><strong>Civil Liberties</strong>: Free speech, association, rule of law</li>
                    </ul>
                    <p style="margin-top: 1.5rem;">For my analysis, I removed all regime classifications and labels, giving the machine learning algorithms access only to the raw dimension scores. This created a <strong>truly unsupervised learning scenario</strong> - could AI identify meaningful political patterns on its own?</p>
                </div>
                <div class="card vis-card" id="dimension-distribution">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 2: Unsupervised Approach -->
        <section id="approach" class="story-section">
            <div class="section-header">
                <div class="section-number">02</div>
                <h3 class="section-title">The Unsupervised Approach</h3>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-method="hierarchical">Hierarchical Clustering</button>
                <button class="control-button" data-method="kmeans">K-Means</button>
                <button class="control-button" data-method="gaussian">Gaussian Mixture</button>
            </div>
            
            <div class="two-column">
                <div class="card vis-card" id="clustering-method">
                    <!-- Visualization will be inserted here -->
                </div>
                <div class="card text-card">
                    <p>Unsupervised machine learning allows us to discover patterns without predetermined labels. I applied multiple clustering algorithms to the democracy data:</p>
                    
                    <div id="method-description" style="margin-top: 1.5rem;">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Hierarchical Clustering</h4>
                        <p>This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.</p>
                    </div>
                    
                    <p style="margin-top: 1.5rem;">Before clustering, data was <strong>standardized</strong> to ensure all dimensions contributed equally to the analysis. This let the natural structure emerge without bias toward any particular dimension.</p>
                </div>
            </div>
        </section>
        
        <!-- Section 3: The Discovery -->
        <section id="discovery" class="story-section">
            <div class="section-header">
                <div class="section-number">03</div>
                <h3 class="section-title">The Amazing Discovery</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p style="font-size: 1.25rem; text-align: center;">Without being told about democratic regime types, the machine learning algorithms <strong>naturally discovered four distinct clusters</strong> that closely match expert classifications!</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-view="comparison">Compare Both</button>
                <button class="control-button" data-view="machine">Machine Clusters</button>
                <button class="control-button" data-view="expert">Expert Labels</button>
            </div>
            
            <div class="card vis-card" style="height: 550px;" id="cluster-comparison">
                <!-- Visualization will be inserted here -->
            </div>
            
            <div style="margin-top: 2rem; text-align: center; background-color: #f8fafc; padding: 1.5rem; border-radius: var(--border-radius);">
                <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Adjusted Rand Index (ARI) measures similarity between clusterings</div>
                <div class="feature-bar" style="max-width: 500px; margin: 0 auto;">
                    <div class="feature-label">Hierarchical Clustering</div>
                    <div class="feature-fill" style="width: 78%; background-color: var(--primary);">0.78</div>
                </div>
                <div class="feature-bar" style="max-width: 500px; margin: 0.75rem auto;">
                    <div class="feature-label">K-Means</div>
                    <div class="feature-fill" style="width: 57%; background-color: var(--accent);">0.57</div>
                </div>
                <p style="margin-top: 0.75rem; font-style: italic;">Higher ARI values indicate better alignment with expert classifications (max = 1.0)</p>
            </div>
        </section>
        
        <!-- Section 4: US Democracy Downgrade -->
        <section id="us-downgrade" class="story-section">
            <div class="section-header">
                <div class="section-number">04</div>
                <h3 class="section-title">The US Democracy Downgrade</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most significant findings revealed by the clustering analysis was the confirmation of the United States' downgrade from a <span style="color: var(--full-democracy); font-weight: 500;">Full Democracy</span> to a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>. This transition, which occurred in 2016, was independently detected by the machine learning algorithm.</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-trend="all">All Countries</button>
                <button class="control-button" data-trend="compare">US vs Norway</button>
                <button class="control-button" data-trend="borderline">US vs Borderline Cases</button>
            </div>
            
            <div class="card vis-card" style="height: 500px;" id="democracy-trends">
                <!-- Trend visualization will be inserted here -->
            </div>
            
            <div class="two-column" style="margin-top: 2rem;">
                <div class="card text-card">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Dimensional Analysis: US vs Norway</h4>
                    <p>While the US maintains strong scores in <strong>Electoral Process</strong> (9.17) and <strong>Civil Liberties</strong> (8.24), it shows significant weaknesses in:</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li><strong>Functioning of Government</strong>: 6.43 (vs. Norway's 9.64)</li>
                        <li><strong>Political Culture</strong>: 6.25 (vs. Norway's 10.00)</li>
                    </ul>
                    <p style="margin-top: 1rem;">These dimensional gaps are precisely what the machine learning algorithms detected, placing the US firmly in a different cluster than full democracies.</p>
                </div>
                <div class="card vis-card" id="us-norway-comparison">
                    <!-- US vs Norway radar chart will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 5: Key Features -->
        <section id="features" class="story-section">
            <div class="section-header">
                <div class="section-number">05</div>
                <h3 class="section-title">The Critical Dimensions</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>Not all democratic dimensions were equally important in clustering countries. The machine learning algorithms revealed which aspects most strongly differentiate political regimes:</p>
                    
                    <div style="margin-top: 1.5rem;" id="feature-bars">
                        <div class="feature-bar">
                            <div class="feature-label">Civil Liberties</div>
                            <div class="feature-fill" style="width: 90%;">0.90</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Electoral Process</div>
                            <div class="feature-fill" style="width: 86%;">0.86</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Functioning of Government</div>
                            <div class="feature-fill" style="width: 75%;">0.75</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Culture</div>
                            <div class="feature-fill" style="width: 72%;">0.72</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Participation</div>
                            <div class="feature-fill" style="width: 64%;">0.64</div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 1.5rem; font-style: italic;">Feature importance was derived from the clustering algorithms' sensitivity to each dimension.</p>
                </div>
                <div class="card vis-card" id="feature-radar">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 6: Borderline Cases -->
        <section id="borderline" class="story-section">
            <div class="section-header">
                <div class="section-number">06</div>
                <h3 class="section-title">Discovering Borderline Cases</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most fascinating discoveries was identifying countries that exist at the boundaries between regime types. These <strong>borderline cases</strong> reveal political systems in transition or with unique characteristics that don't fit neatly into a single category.</p>
                
                <p style="margin-top: 1rem;">The machine learning model assigned these countries <strong>probability scores</strong> for belonging to different clusters, revealing their ambiguous status.</p>
            </div>
            
            <div class="borderline-cases">
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Hungary</h4>
                    <p>Officially classified as a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>, but machine learning detected characteristics of a <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span>.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 53%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>53% Flawed Democracy</span>
                        <span>47% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Poland</h4>
                    <p>Despite its <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> label, machine learning found significant <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> patterns.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 51%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>51% Flawed Democracy</span>
                        <span>49% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Mexico</h4>
                    <p>Officially a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> but showing strong indicators of <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> characteristics.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 48%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>48% Flawed Democracy</span>
                        <span>52% Hybrid Regime</span>
                    </div>
                </div>
            </div>
            
            <div class="card vis-card" style="margin-top: 2rem;" id="borderline-explorer">
                <!-- Visualization will be inserted here -->
            </div>
        </section>
        
        <!-- Section 7: Key Insights -->
        <section id="insights" class="story-section">
            <div class="section-header">
                <div class="section-number">07</div>
                <h3 class="section-title">Key Research Insights</h3>
            </div>
            
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-title">Natural Patterns in Political Data</div>
                    <p>Unsupervised machine learning naturally discovered four distinct clusters that closely align with expert-defined regime types. This validates that democratic classifications reflect inherent patterns in political data.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Hierarchical Classification Works Best</div>
                    <p>Hierarchical clustering outperformed other algorithms, suggesting that democratic systems exist in a nested relationship rather than as completely separate categories. Democracy exists on a spectrum, not in discrete boxes.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Data-Driven Early Warning System</div>
                    <p>Machine learning discovered borderline cases before political scientists recognized their ambiguous status. This suggests AI could serve as an early warning system for democratic backsliding or advancement.</p>
                </div>
            </div>
            
            <div class="card text-card" style="margin-top: 2rem; text-align: center;">
                <p style="font-size: 1.5rem; font-weight: 300; color: var(--primary);">When treated with care, <strong>data can speak</strong> — and sometimes, it echoes justice</p>
                
                <p style="margin-top: 1.5rem;">What's most remarkable isn't simply that machines can classify regimes—it's that they can discover the inherent structure of democracy independently, with no human guidance.</p>
                
                <p style="margin-top: 1rem;">This adds a powerful new perspective to political science: the patterns of democracy are not merely human constructs, but are embedded in the data itself.</p>
            </div>
        </section>
        
        <div style="margin-top: 3rem; text-align: center;">
            <a href="index.html" style="display: inline-block; padding: 1rem 2rem; background-color: var(--primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 500; box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3); transition: var(--transition);">
                Return to Main Dashboard
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>Data Analytics Engineering, MS Candidate</p>
            <p>© 2025 | Northeastern University</p>
        </div>
    </footer>

    <script>
        // Data for the visualizations
        const regimeColors = {
            'Full Democracy': '#4cc9f0',
            'Flawed Democracy': '#4895ef',
            'Hybrid Regime': '#f9c74f',
            'Authoritarian': '#f94144',
            'Cluster 1': '#4cc9f0',
            'Cluster 2': '#4895ef',
            'Cluster 3': '#f9c74f',
            'Cluster 4': '#f94144'
        };
        
        const countries = [
            {name: 'Norway', electoral: 10.00, civil: 9.71, functioning: 9.64, participation: 10.00, culture: 10.00, score: 9.81, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'New Zealand', electoral: 10.00, civil: 9.71, functioning: 9.29, participation: 8.89, culture: 10.00, score: 9.61, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'United States', electoral: 9.17, civil: 8.24, functioning: 6.43, participation: 7.78, culture: 6.25, score: 7.85, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'France', electoral: 9.58, civil: 8.82, functioning: 6.79, participation: 7.78, culture: 6.88, score: 7.99, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'Hungary', electoral: 7.83, civil: 6.47, functioning: 5.71, participation: 5.00, culture: 5.63, score: 6.12, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Poland', electoral: 7.83, civil: 7.06, functioning: 5.36, participation: 5.56, culture: 4.38, score: 6.09, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Mexico', electoral: 7.50, civil: 5.59, functioning: 5.36, participation: 7.22, culture: 4.38, score: 6.07, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Turkey', electoral: 5.83, civil: 3.24, functioning: 5.00, participation: 5.56, culture: 5.00, score: 5.04, expertLabel: 'Hybrid Regime', mlCluster: 'Cluster 3'},
            {name: 'Russia', electoral: 2.17, civil: 2.94, functioning: 1.79, participation: 5.00, culture: 3.13, score: 2.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'},
            {name: 'China', electoral: 0.00, civil: 1.18, functioning: 4.29, participation: 3.33, culture: 2.50, score: 1.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'}
        ];

        // Sample cluster statistics
        const clusterStats = {
            'hierarchical': {
                name: 'Hierarchical Clustering',
                ari: 0.78,
                description: 'This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.',
                visualization: 'tree'
            },
            'kmeans': {
                name: 'K-Means Clustering',
                ari: 0.57,
                description: 'K-Means partitions countries into distinct clusters while minimizing within-cluster variance. While effective, it was less nuanced than hierarchical methods, particularly for countries at regime boundaries.',
                visualization: 'scatter'
            },
            'gaussian': {
                name: 'Gaussian Mixture',
                ari: 0.52,
                description: 'This model assumes countries come from a mixture of gaussian distributions. It provides probability estimates for cluster membership, making it useful for identifying borderline cases, but had lower overall accuracy.',
                visualization: 'ellipse'
            }
        };
        
        // Create dimension distribution visualization
        function createDimensionDistribution() {
            // Prepare data
            const dimensions = ['Electoral Process', 'Functioning of Govt', 'Political Participation', 'Political Culture', 'Civil Liberties'];
            
            // Calculate averages by regime type
            const regimeTypes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            const averagesByRegime = {};
            
            regimeTypes.forEach(regime => {
                averagesByRegime[regime] = {
                    electoral: 0,
                    functioning: 0,
                    participation: 0,
                    culture: 0,
                    civil: 0,
                    count: 0
                };
            });
            
            countries.forEach(country => {
                const regime = country.expertLabel;
                averagesByRegime[regime].electoral += country.electoral;
                averagesByRegime[regime].functioning += country.functioning;
                averagesByRegime[regime].participation += country.participation;
                averagesByRegime[regime].culture += country.culture;
                averagesByRegime[regime].civil += country.civil;
                averagesByRegime[regime].count += 1;
            });
            
            regimeTypes.forEach(regime => {
                if(averagesByRegime[regime].count > 0) {
                    averagesByRegime[regime].electoral /= averagesByRegime[regime].count;
                    averagesByRegime[regime].functioning /= averagesByRegime[regime].count;
                    averagesByRegime[regime].participation /= averagesByRegime[regime].count;
                    averagesByRegime[regime].culture /= averagesByRegime[regime].count;
                    averagesByRegime[regime].civil /= averagesByRegime[regime].count;
                }
            });
            
            // Create radar chart data
            const data = regimeTypes.map(regime => {
                return {
                    type: 'scatterpolar',
                    r: [
                        averagesByRegime[regime].electoral,
                        averagesByRegime[regime].functioning,
                        averagesByRegime[regime].participation,
                        averagesByRegime[regime].culture,
                        averagesByRegime[regime].civil
                    ],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {
                        color: regimeColors[regime]
                    },
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2
                },
                margin: {
                    l: 50,
                    r: 50,
                    t: 50,
                    b: 50
                },
                title: 'Democracy Dimensions by Regime Type'
            };
            
            Plotly.newPlot('dimension-distribution', data, layout);
        }
        
        // Create clustering methods visualization
        function createClusteringMethod(method) {
            const methodInfo = clusterStats[method];
            
            let data, layout;
            
            // Different visualizations based on method type
            if (method === 'hierarchical') {
                // Create a dendrogram-like visualization
                data = [{
                    type: 'scatter',
                    mode: 'markers+text',
                    x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                    y: [1, 2, 1, 3, 2, 1, 2, 3, 4, 3],
                    text: countries.map(c => c.name),
                    textposition: 'top center',
                    marker: {
                        size: 10,
                        color: countries.map(c => regimeColors[c.expertLabel])
                    },
                    hoverinfo: 'text',
                    name: 'Countries'
                }];
                
                // Add connecting lines to simulate dendrogram
                const shapes = [
                    {type: 'line', x0: 1, y0: 1, x1: 3, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 3, y0: 1, x1: 6, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 6, y0: 1, x1: 8, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 2, y0: 2, x1: 5, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 5, y0: 2, x1: 7, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 4, y0: 3, x1: 9, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 8, y0: 3, x1: 10, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 9, y0: 3, x1: 9, y1: 4, line: {color: 'gray', width: 1}}
                ];
                
                layout = {
                    title: 'Hierarchical Clustering (ARI = 0.78)',
                    shapes: shapes,
                    showlegend: false,
                    xaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    yaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    annotations: [{
                        x: 5,
                        y: 4.5,
                        text: 'Countries are grouped in a hierarchical structure<br>based on similarity across all dimensions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'kmeans') {
                // Create a k-means visualization with centroids
                const centroids = [
                    {x: 9.5, y: 9.5, label: 'Cluster 1'},
                    {x: 8.5, y: 7.5, label: 'Cluster 2'},
                    {x: 6.5, y: 5.0, label: 'Cluster 3'},
                    {x: 1.5, y: 2.0, label: 'Cluster 4'}
                ];
                
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    },
                    {
                        type: 'scatter',
                        x: centroids.map(c => c.x),
                        y: centroids.map(c => c.y),
                        mode: 'markers',
                        marker: {
                            size: 15,
                            color: centroids.map(c => regimeColors[c.label]),
                            symbol: 'x',
                            line: {width: 2, color: 'black'}
                        },
                        hoverinfo: 'text',
                        text: centroids.map(c => `${c.label} Centroid`),
                        name: 'Centroids'
                    }
                ];
                
                layout = {
                    title: 'K-Means Clustering (ARI = 0.57)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'X marks show cluster centroids',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'gaussian') {
                // Gaussian mixture visualization with probability ellipses
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    }
                ];
                
                // Add ellipse shapes representing Gaussian distributions
                const shapes = [
                    {type: 'circle', x0: 8.5, y0: 8.5, x1: 10.5, y1: 10.5, fillcolor: regimeColors['Cluster 1'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 7.5, y0: 6.5, x1: 9.5, y1: 8.5, fillcolor: regimeColors['Cluster 2'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 5.5, y0: 3.5, x1: 7.5, y1: 5.5, fillcolor: regimeColors['Cluster 3'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 0.5, y0: 0.5, x1: 2.5, y1: 2.5, fillcolor: regimeColors['Cluster 4'] + '30', line: {width: 0}}
                ];
                
                layout = {
                    title: 'Gaussian Mixture Model (ARI = 0.52)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    shapes: shapes,
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'Colored regions show probability distributions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            }
            
            Plotly.newPlot('clustering-method', data, layout);
            
            // Update the method description
            document.getElementById('method-description').innerHTML = `
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">${methodInfo.name} (ARI = ${methodInfo.ari})</h4>
                <p>${methodInfo.description}</p>
            `;
        }
        
        // Create cluster comparison visualization
        function createClusterComparison(view = 'comparison') {
            const data = [];
            
            if (view === 'comparison' || view === 'machine') {
                // ML-discovered clusters
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral),
                    y: countries.map(c => c.civil),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.mlCluster]),
                        line: {
                            color: 'white',
                            width: 1
                        }
                    },
                    text: countries.map(c => `${c.name}<br>ML Cluster: ${c.mlCluster}<br>Score: ${c.score}`),
                    name: 'Machine Learning Clusters',
                    hoverinfo: 'text'
                });
            }
            
            if (view === 'comparison' || view === 'expert') {
                // Expert-defined regimes
                const xOffset = view === 'comparison' ? 0.3 : 0;
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    y: countries.map(c => c.civil + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.expertLabel]),
                        symbol: view === 'comparison' ? 'circle-open' : 'circle',
                        line: {
                            color: 'black',
                            width: view === 'comparison' ? 2 : 0
                        }
                    },
                    text: countries.map(c => `${c.name}<br>Expert Label: ${c.expertLabel}<br>Score: ${c.score}`),
                    name: 'Expert Classifications',
                    hoverinfo: 'text'
                });
            }
            
            // Regime boundary lines
            const shapes = [
                {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
            ];
            
            const layout = {
                title: view === 'comparison' ? 'Machine Learning Clusters vs Expert Classifications' :
                       view === 'machine' ? 'Machine-Discovered Clusters (No Labels Used)' : 
                       'Expert-Defined Regime Types',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: shapes,
                height: 500,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                annotations: view === 'comparison' ? [
                    {
                        x: 8.5,
                        y: 1,
                        text: 'Filled circles: ML clusters<br>Open circles: Expert labels',
                        showarrow: false,
                        bgcolor: 'white',
                        borderpad: 4
                    },
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, weight: 'bold'},
                        bgcolor: 'white',
                        borderpad: 4
                    }
                ] : []
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create feature radar plot
        function createFeatureRadar() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            // Create average values for each regime type
            const regimes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            
            const traces = regimes.map(regime => {
                // Filter countries by regime
                const filteredCountries = countries.filter(c => c.expertLabel === regime);
                
                // Calculate averages
                const electoral = filteredCountries.reduce((sum, c) => sum + c.electoral, 0) / filteredCountries.length;
                const civil = filteredCountries.reduce((sum, c) => sum + c.civil, 0) / filteredCountries.length;
                const functioning = filteredCountries.reduce((sum, c) => sum + c.functioning, 0) / filteredCountries.length;
                const participation = filteredCountries.reduce((sum, c) => sum + c.participation, 0) / filteredCountries.length;
                const culture = filteredCountries.reduce((sum, c) => sum + c.culture, 0) / filteredCountries.length;
                
                return {
                    type: 'scatterpolar',
                    r: [electoral, civil, functioning, participation, culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {color: regimeColors[regime]},
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democracy Dimensions by Regime Type',
                legend: {
                    orientation: 'h',
                    y: -0.2
                }
            };
            
            Plotly.newPlot('feature-radar', traces, layout);
        }
        
        // Create democracy trends visualization
        function createDemocracyTrends(trendType = 'all') {
            const years = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
            
            // Democracy index scores over time
            const trends = {
                'Norway': [9.93, 9.93, 9.87, 9.87, 9.87, 9.81, 9.81, 9.81, 9.75, 9.81],
                'United States': [8.05, 7.98, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85, 7.85],
                'Sweden': [9.45, 9.39, 9.39, 9.39, 9.39, 9.26, 9.26, 9.39, 9.39, 9.39],
                'New Zealand': [9.26, 9.26, 9.26, 9.26, 9.26, 9.25, 9.37, 9.37, 9.61, 9.61],
                'Hungary': [7.53, 7.25, 7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12],
                'Poland': [7.09, 7.09, 7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09],
                'Mexico': [6.55, 6.47, 6.47, 6.41, 6.19, 6.09, 6.09, 6.07, 6.07, 6.07]
            };
            
            // Full Democracy threshold
            const fullDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(8.01),
                mode: 'lines',
                name: 'Full Democracy Threshold',
                line: {
                    color: 'rgba(76, 201, 240, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            // Flawed Democracy threshold
            const flawedDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(6.01),
                mode: 'lines',
                name: 'Flawed Democracy Threshold',
                line: {
                    color: 'rgba(247, 37, 133, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            const data = [fullDemocracyLine, flawedDemocracyLine];
            
            if (trendType === 'all') {
                // Add all countries
                Object.keys(trends).forEach(country => {
                    // Choose color based on average score
                    const avgScore = trends[country].reduce((a, b) => a + b, 0) / trends[country].length;
                    let color;
                    if (avgScore >= 8.01) color = regimeColors['Full Democracy'];
                    else if (avgScore >= 6.01) color = regimeColors['Flawed Democracy'];
                    else if (avgScore >= 4.01) color = regimeColors['Hybrid Regime'];
                    else color = regimeColors['Authoritarian'];
                    
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: color,
                            width: country === 'United States' ? 3 : 2
                        },
                        marker: {
                            size: country === 'United States' ? 8 : 6
                        }
                    });
                });
            } else if (trendType === 'compare') {
                // Add only US and Norway
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['Norway'],
                    mode: 'lines+markers',
                    name: 'Norway',
                    line: {
                        color: regimeColors['Full Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
            } else if (trendType === 'borderline') {
                // Add US and borderline countries
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                ['Hungary', 'Poland', 'Mexico'].forEach(country => {
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: '#FF5722',
                            width: 2,
                            dash: 'solid'
                        },
                        marker: {
                            size: 6
                        }
                    });
                });
            }
            
            // Add US downgrade annotation
            const annotations = [{
                x: 2016,
                y: 7.98,
                text: 'US Downgraded to<br>Flawed Democracy',
                showarrow: true,
                arrowhead: 5,
                ax: 0,
                ay: -40
            }];
            
            const layout = {
                title: 'Democracy Index Trends (2015-2024)',
                xaxis: {title: 'Year', tickmode: 'array', tickvals: years},
                yaxis: {title: 'Democracy Index Score', range: [5.5, 10]},
                annotations: annotations,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                hovermode: 'closest'
            };
            
            Plotly.newPlot('democracy-trends', data, layout);
        }
        
        // Create US vs Norway radar comparison
        function createUSNorwayComparison() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            const us = {
                electoral: 9.17,
                civil: 8.24,
                functioning: 6.43,
                participation: 7.78,
                culture: 6.25
            };
            
            const norway = {
                electoral: 10.0,
                civil: 9.71,
                functioning: 9.64,
                participation: 10.0,
                culture: 10.0
            };
            
            const data = [
                {
                    type: 'scatterpolar',
                    r: [us.electoral, us.civil, us.functioning, us.participation, us.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'United States',
                    line: {color: regimeColors['Flawed Democracy']},
                    fillcolor: regimeColors['Flawed Democracy'] + '40'
                },
                {
                    type: 'scatterpolar',
                    r: [norway.electoral, norway.civil, norway.functioning, norway.participation, norway.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'Norway',
                    line: {color: regimeColors['Full Democracy']},
                    fillcolor: regimeColors['Full Democracy'] + '40'
                }
            ];
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democratic Dimensions Comparison'
            };
            
            Plotly.newPlot('us-norway-comparison', data, layout);
        }
        
        // Create borderline explorer
        function createBorderlineExplorer() {
            const borderlineCountries = countries.filter(c => c.isBorderline);
            
            // Add a couple more for demonstration
            borderlineCountries.push({
                name: 'Tunisia',
                electoral: 7.50,
                civil: 6.47,
                functioning: 5.36,
                participation: 6.11,
                culture: 5.63,
                score: 6.08,
                expertLabel: 'Flawed Democracy',
                mlCluster: 'Cluster 3',
                isBorderline: true
            });
            
            // Prepare data for scatter plot
            const trace = {
                type: 'scatter',
                x: borderlineCountries.map(c => c.functioning),
                y: borderlineCountries.map(c => c.civil),
                mode: 'markers+text',
                text: borderlineCountries.map(c => c.name),
                textposition: 'top',
                marker: {
                    size: borderlineCountries.map(c => c.score * 3),
                    color: borderlineCountries.map(c => '#FF5722'),
                    opacity: 0.7,
                    line: {
                        color: 'white',
                        width: 2
                    }
                },
                name: 'Borderline Countries'
            };
            
            const layout = {
                title: 'Borderline Countries: Functioning of Government vs Civil Liberties',
                xaxis: {title: 'Functioning of Government', range: [4, 7]},
                yaxis: {title: 'Civil Liberties', range: [5, 8]},
                shapes: [
                    // Hybrid/Flawed border region
                    {
                        type: 'rect',
                        x0: 4, 
                        y0: 5, 
                        x1: 6.5, 
                        y1: 7.5, 
                        fillcolor: 'rgba(255,193,7,0.2)', 
                        line: {width: 0}
                    }
                ],
                annotations: [
                    {
                        x: 5.25,
                        y: 6.25,
                        text: 'Borderline<br>Region',
                        showarrow: false,
                        font: {size: 14, color: '#FF5722'}
                    }
                ],
                height: 400
            };
            
            Plotly.newPlot('borderline-explorer', [trace], layout);
        }
        
        // Initialize all visualizations
        window.onload = function() {
            createDimensionDistribution();
            createClusteringMethod('hierarchical');
            createClusterComparison('comparison');
            createFeatureRadar();
            createDemocracyTrends('all');
            createUSNorwayComparison();
            createBorderlineExplorer();
            
            // Set up event listeners for interactive controls
            document.querySelectorAll('[data-method]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-method]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusteringMethod(this.dataset.method);
                });
            });
            
            document.querySelectorAll('[data-view]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusterComparison(this.dataset.view);
                });
            });
            
            document.querySelectorAll('[data-trend]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-trend]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createDemocracyTrends(this.dataset.trend);
                });
            });
            
            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, {
                threshold: 0.1
            });
            
            document.querySelectorAll('.story-section').forEach(section => {
                observer.observe(section);
            });
            
            // Smooth scrolling for nav links
            document.querySelectorAll('.nav-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
        };
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Discovers Democracy | Interactive Story</title>
    <!-- Modern visualization libraries -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary colors */
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            
            /* Regime colors */
            --full-democracy: #4cc9f0;
            --flawed-democracy: #4895ef;
            --hybrid-regime: #f9c74f;
            --authoritarian: #f94144;
            
            /* Backgrounds */
            --bg-main: #fdfeff;
            --bg-card: #ffffff;
            --bg-dark: #212529;
            
            /* Text colors */
            --text-primary: #2b2d42;
            --text-secondary: #586069;
            --text-light: #f8f9fa;
            
            /* UI elements */
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 4rem 0 6rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1.5" fill="rgba(255,255,255,0.2)"/></svg>');
            background-size: 30px 30px;
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        .author-info {
            display: inline-block;
            background-color: rgba(255,255,255,0.15);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            margin-top: 1rem;
        }

        /* Navigation */
        .story-nav {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-around;
            padding: 1rem;
            margin-top: -3rem;
            margin-bottom: 3rem;
            position: relative;
            z-index: 10;
            box-shadow: var(--box-shadow);
        }

        .nav-item {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.75rem 1.25rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .nav-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .nav-item.active {
            background-color: var(--primary);
            color: white;
        }

        /* Story Sections */
        .story-section {
            margin-bottom: 5rem;
            scroll-margin-top: 2rem;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px); /* Start below final position */
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            opacity: 0.2;
            margin-right: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary);
            flex: 1;
        }

        /* General Layout Components */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            height: 100%;
        }

        .text-card {
            padding: 2rem;
        }

        .vis-card {
            height: 450px;
            overflow: hidden;
        }

        /* Insights Cards */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .insight-card {
            background-color: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            min-height: 220px;
            transition: var(--transition);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
        }

        .insight-card:nth-child(1)::before {
            background-color: var(--full-democracy);
        }

        .insight-card:nth-child(2)::before {
            background-color: var(--flawed-democracy);
        }

        .insight-card:nth-child(3)::before {
            background-color: var(--hybrid-regime);
        }

        .insight-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* Feature Importance Bars */
        .feature-bar {
            height: 2rem;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin-bottom: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        .feature-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .feature-label {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Interactive Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-button {
            background-color: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1.25rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-button:hover {
            background-color: var(--primary);
            color: white;
        }

        .control-button.active {
            background-color: var(--primary);
            color: white;
        }

        /* Country Explorer */
        .country-selector {
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            width: 100%;
            margin-bottom: 1rem;
            font-family: inherit;
        }

        .country-card {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .country-info {
            flex: 1;
        }

        .country-name {
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .regime-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        /* Borderline Cases Section */
        .borderline-cases {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .borderline-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            border-left: 5px solid var(--accent);
            transition: var(--transition);
        }
        
        .borderline-card:hover {
            transform: translateY(-5px);
        }
        
        .probability-bar {
            height: 8px;
            background-color: #f1f5f9;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--flawed-democracy) 0%, var(--hybrid-regime) 100%);
        }

        /* Media Queries */
        @media (max-width: 992px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .story-nav {
                flex-wrap: wrap;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        /* Animation Classes */
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-content p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <h1>How Machine Learning Discovered Democracy</h1>
            <h2>An Interactive Journey Through Unsupervised Clustering of Political Regimes</h2>
            <div class="author-info">By Rosalina Torres, Data Analytics Engineer | MS Candidate</div>
        </div>
    </header>
    
    <div class="container">
        <nav class="story-nav">
            <a href="#data" class="nav-item">The Data</a>
            <a href="#approach" class="nav-item">Unsupervised Approach</a>
            <a href="#discovery" class="nav-item">The Discovery</a>
            <a href="#us-downgrade" class="nav-item">US Downgrade</a>
            <a href="#features" class="nav-item">Key Features</a>
            <a href="#borderline" class="nav-item">Borderline Cases</a>
            <a href="#insights" class="nav-item">Insights</a>
        </nav>
        
        <!-- Section 1: The Data -->
        <section id="data" class="story-section">
            <div class="section-header">
                <div class="section-number">01</div>
                <h3 class="section-title">The Raw Political Data</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>The Economist Intelligence Unit's <strong>Democracy Index</strong> measures political systems worldwide using five key <!-- Country Explorer -->
<div class="card vis-card" style="min-height: 500px;">
    <h3>Country Explorer</h3>
    <div style="margin-bottom: 15px;">
        <label for="country-selector" style="display: block; margin-bottom: 5px;">Select a country:</label>
        <select id="country-selector" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ddd;"></select>
    </div>
    <div id="country-info" style="margin-bottom: 15px; padding: 15px; border-radius: 8px; background-color: #f8f9fa;"></div>
    <div id="radar-chart" style="height: 350px;"></div>
</div>dimensions:</p>
                    <ul style="margin-top: 1rem; margin-left: 1.5rem;">
                        <li><strong>Electoral Process and Pluralism</strong>: Free and fair elections, universal suffrage</li>
                        <li><strong>Functioning of Government</strong>: Checks and balances, transparency</li>
                        <li><strong>Political Participation</strong>: Voter turnout, citizen engagement</li>
                        <li><strong>Political Culture</strong>: Democratic values, peaceful transitions</li>
                        <li><strong>Civil Liberties</strong>: Free speech, association, rule of law</li>
                    </ul>
                    <p style="margin-top: 1.5rem;">For my analysis, I removed all regime classifications and labels, giving the machine learning algorithms access only to the raw dimension scores. This created a <strong>truly unsupervised learning scenario</strong> - could AI identify meaningful political patterns on its own?</p>
                </div>
                <div class="card vis-card" id="dimension-distribution">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 2: Unsupervised Approach -->
        <section id="approach" class="story-section">
            <div class="section-header">
                <div class="section-number">02</div>
                <h3 class="section-title">The Unsupervised Approach</h3>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-method="hierarchical">Hierarchical Clustering</button>
                <button class="control-button" data-method="kmeans">K-Means</button>
                <button class="control-button" data-method="gaussian">Gaussian Mixture</button>
            </div>
            
            <div class="two-column">
                <div class="card vis-card" id="clustering-method">
                    <!-- Visualization will be inserted here -->
                </div>
                <div class="card text-card">
                    <p>Unsupervised machine learning allows us to discover patterns without predetermined labels. I applied multiple clustering algorithms to the democracy data:</p>
                    
                    <div id="method-description" style="margin-top: 1.5rem;">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Hierarchical Clustering</h4>
                        <p>This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.</p>
                    </div>
                    
                    <p style="margin-top: 1.5rem;">Before clustering, data was <strong>standardized</strong> to ensure all dimensions contributed equally to the analysis. This let the natural structure emerge without bias toward any particular dimension.</p>
                </div>
            </div>
        </section>
        
        <!-- Section 3: The Discovery -->
        <section id="discovery" class="story-section">
            <div class="section-header">
                <div class="section-number">03</div>
                <h3 class="section-title">The Amazing Discovery</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p style="font-size: 1.25rem; text-align: center;">Without being told about democratic regime types, the machine learning algorithms <strong>naturally discovered four distinct clusters</strong> that closely match expert classifications!</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-view="comparison">Compare Both</button>
                <button class="control-button" data-view="machine">Machine Clusters</button>
                <button class="control-button" data-view="expert">Expert Labels</button>
            </div>
            
            <div class="card vis-card" style="height: 550px;" id="cluster-comparison">
                <!-- Visualization will be inserted here -->
            </div>
            
            <div style="margin-top: 2rem; text-align: center; background-color: #f8fafc; padding: 1.5rem; border-radius: var(--border-radius);">
                <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Adjusted Rand Index (ARI) measures similarity between clusterings</div>
                <div class="feature-bar" style="max-width: 500px; margin: 0 auto;">
                    <div class="feature-label">Hierarchical Clustering</div>
                    <div class="feature-fill" style="width: 78%; background-color: var(--primary);">0.78</div>
                </div>
                <div class="feature-bar" style="max-width: 500px; margin: 0.75rem auto;">
                    <div class="feature-label">K-Means</div>
                    <div class="feature-fill" style="width: 57%; background-color: var(--accent);">0.57</div>
                </div>
                <p style="margin-top: 0.75rem; font-style: italic;">Higher ARI values indicate better alignment with expert classifications (max = 1.0)</p>
            </div>
        </section>
        
        <!-- Section 4: US Democracy Downgrade -->
        <section id="us-downgrade" class="story-section">
            <div class="section-header">
                <div class="section-number">04</div>
                <h3 class="section-title">The US Democracy Downgrade</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most significant findings revealed by the clustering analysis was the confirmation of the United States' downgrade from a <span style="color: var(--full-democracy); font-weight: 500;">Full Democracy</span> to a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>. This transition, which occurred in 2016, was independently detected by the machine learning algorithm.</p>
            </div>
            
            <div class="controls">
                <button class="control-button active" data-trend="all">All Countries</button>
                <button class="control-button" data-trend="compare">US vs Norway</button>
                <button class="control-button" data-trend="borderline">US vs Borderline Cases</button>
            </div>
            
            <div class="card vis-card" style="height: 500px;" id="democracy-trends">
                <!-- Trend visualization will be inserted here -->
            </div>
            
            <div class="two-column" style="margin-top: 2rem;">
                <div class="card text-card">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Dimensional Analysis: US vs Norway</h4>
                    <p>While the US maintains strong scores in <strong>Electoral Process</strong> (9.17) and <strong>Civil Liberties</strong> (8.24), it shows significant weaknesses in:</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li><strong>Functioning of Government</strong>: 6.43 (vs. Norway's 9.64)</li>
                        <li><strong>Political Culture</strong>: 6.25 (vs. Norway's 10.00)</li>
                    </ul>
                    <p style="margin-top: 1rem;">These dimensional gaps are precisely what the machine learning algorithms detected, placing the US firmly in a different cluster than full democracies.</p>
                </div>
                <div class="card vis-card" id="us-norway-comparison">
                    <!-- US vs Norway radar chart will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 5: Key Features -->
        <section id="features" class="story-section">
            <div class="section-header">
                <div class="section-number">05</div>
                <h3 class="section-title">The Critical Dimensions</h3>
            </div>
            
            <div class="two-column">
                <div class="card text-card">
                    <p>Not all democratic dimensions were equally important in clustering countries. The machine learning algorithms revealed which aspects most strongly differentiate political regimes:</p>
                    
                    <div style="margin-top: 1.5rem;" id="feature-bars">
                        <div class="feature-bar">
                            <div class="feature-label">Civil Liberties</div>
                            <div class="feature-fill" style="width: 90%;">0.90</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Electoral Process</div>
                            <div class="feature-fill" style="width: 86%;">0.86</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Functioning of Government</div>
                            <div class="feature-fill" style="width: 75%;">0.75</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Culture</div>
                            <div class="feature-fill" style="width: 72%;">0.72</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-label">Political Participation</div>
                            <div class="feature-fill" style="width: 64%;">0.64</div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 1.5rem; font-style: italic;">Feature importance was derived from the clustering algorithms' sensitivity to each dimension.</p>
                </div>
                <div class="card vis-card" id="feature-radar">
                    <!-- Visualization will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Section 6: Borderline Cases -->
        <section id="borderline" class="story-section">
            <div class="section-header">
                <div class="section-number">06</div>
                <h3 class="section-title">Discovering Borderline Cases</h3>
            </div>
            
            <div class="card text-card" style="margin-bottom: 2rem;">
                <p>One of the most fascinating discoveries was identifying countries that exist at the boundaries between regime types. These <strong>borderline cases</strong> reveal political systems in transition or with unique characteristics that don't fit neatly into a single category.</p>
                
                <p style="margin-top: 1rem;">The machine learning model assigned these countries <strong>probability scores</strong> for belonging to different clusters, revealing their ambiguous status.</p>
            </div>
            
            <div class="borderline-cases">
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Hungary</h4>
                    <p>Officially classified as a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span>, but machine learning detected characteristics of a <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span>.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 53%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>53% Flawed Democracy</span>
                        <span>47% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Poland</h4>
                    <p>Despite its <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> label, machine learning found significant <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> patterns.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 51%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>51% Flawed Democracy</span>
                        <span>49% Hybrid Regime</span>
                    </div>
                </div>
                
                <div class="borderline-card">
                    <h4 style="margin-bottom: 0.5rem;">Mexico</h4>
                    <p>Officially a <span style="color: var(--flawed-democracy); font-weight: 500;">Flawed Democracy</span> but showing strong indicators of <span style="color: var(--hybrid-regime); font-weight: 500;">Hybrid Regime</span> characteristics.</p>
                    <div class="probability-bar">
                        <div class="probability-fill" style="width: 48%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span>48% Flawed Democracy</span>
                        <span>52% Hybrid Regime</span>
                    </div>
                </div>
            </div>
            
            <div class="card vis-card" style="margin-top: 2rem;" id="borderline-explorer">
                <!-- Visualization will be inserted here -->
            </div>
        </section>
        
        <!-- Section 7: Key Insights -->
        <section id="insights" class="story-section">
            <div class="section-header">
                <div class="section-number">07</div>
                <h3 class="section-title">Key Research Insights</h3>
            </div>
            
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-title">Natural Patterns in Political Data</div>
                    <p>Unsupervised machine learning naturally discovered four distinct clusters that closely align with expert-defined regime types. This validates that democratic classifications reflect inherent patterns in political data.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Hierarchical Classification Works Best</div>
                    <p>Hierarchical clustering outperformed other algorithms, suggesting that democratic systems exist in a nested relationship rather than as completely separate categories. Democracy exists on a spectrum, not in discrete boxes.</p>
                </div>
                
                <div class="insight-card">
                    <div class="insight-title">Data-Driven Early Warning System</div>
                    <p>Machine learning discovered borderline cases before political scientists recognized their ambiguous status. This suggests AI could serve as an early warning system for democratic backsliding or advancement.</p>
                </div>
            </div>
            
            <div class="card text-card" style="margin-top: 2rem; text-align: center;">
                <p style="font-size: 1.5rem; font-weight: 300; color: var(--primary);">When treated with care, <strong>data can speak</strong> — and sometimes, it echoes justice</p>
                
                <p style="margin-top: 1.5rem;">What's most remarkable isn't simply that machines can classify regimes—it's that they can discover the inherent structure of democracy independently, with no human guidance.</p>
                
                <p style="margin-top: 1rem;">This adds a powerful new perspective to political science: the patterns of democracy are not merely human constructs, but are embedded in the data itself.</p>
            </div>
        </section>
        
        <div style="margin-top: 3rem; text-align: center;">
            <a href="index.html" style="display: inline-block; padding: 1rem 2rem; background-color: var(--primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 500; box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3); transition: var(--transition);">
                Return to Main Dashboard
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Data source: Economist Intelligence Unit Democracy Index</p>
            <p>Compiled by Rosalina Torres as part of democracy clustering analysis project</p>
            <p>Data Analytics Engineering, MS Candidate</p>
            <p>© 2025 | Northeastern University</p>
        </div>
    </footer>

    <script>
        // Data for the visualizations
        const regimeColors = {
            'Full Democracy': '#4cc9f0',
            'Flawed Democracy': '#4895ef',
            'Hybrid Regime': '#f9c74f',
            'Authoritarian': '#f94144',
            'Cluster 1': '#4cc9f0',
            'Cluster 2': '#4895ef',
            'Cluster 3': '#f9c74f',
            'Cluster 4': '#f94144'
        };
        
        const countries = [
            {name: 'Norway', electoral: 10.00, civil: 9.71, functioning: 9.64, participation: 10.00, culture: 10.00, score: 9.81, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'New Zealand', electoral: 10.00, civil: 9.71, functioning: 9.29, participation: 8.89, culture: 10.00, score: 9.61, expertLabel: 'Full Democracy', mlCluster: 'Cluster 1'},
            {name: 'United States', electoral: 9.17, civil: 8.24, functioning: 6.43, participation: 7.78, culture: 6.25, score: 7.85, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'France', electoral: 9.58, civil: 8.82, functioning: 6.79, participation: 7.78, culture: 6.88, score: 7.99, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 2'},
            {name: 'Hungary', electoral: 7.83, civil: 6.47, functioning: 5.71, participation: 5.00, culture: 5.63, score: 6.12, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Poland', electoral: 7.83, civil: 7.06, functioning: 5.36, participation: 5.56, culture: 4.38, score: 6.09, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Mexico', electoral: 7.50, civil: 5.59, functioning: 5.36, participation: 7.22, culture: 4.38, score: 6.07, expertLabel: 'Flawed Democracy', mlCluster: 'Cluster 3', isBorderline: true},
            {name: 'Turkey', electoral: 5.83, civil: 3.24, functioning: 5.00, participation: 5.56, culture: 5.00, score: 5.04, expertLabel: 'Hybrid Regime', mlCluster: 'Cluster 3'},
            {name: 'Russia', electoral: 2.17, civil: 2.94, functioning: 1.79, participation: 5.00, culture: 3.13, score: 2.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'},
            {name: 'China', electoral: 0.00, civil: 1.18, functioning: 4.29, participation: 3.33, culture: 2.50, score: 1.94, expertLabel: 'Authoritarian', mlCluster: 'Cluster 4'}
        ];

        // Sample cluster statistics
        const clusterStats = {
            'hierarchical': {
                name: 'Hierarchical Clustering',
                ari: 0.78,
                description: 'This algorithm builds a tree of clusters, grouping countries based on their similarity. It excelled at capturing the nuanced relationships between different democratic systems, achieving the highest alignment with expert regime classifications.',
                visualization: 'tree'
            },
            'kmeans': {
                name: 'K-Means Clustering',
                ari: 0.57,
                description: 'K-Means partitions countries into distinct clusters while minimizing within-cluster variance. While effective, it was less nuanced than hierarchical methods, particularly for countries at regime boundaries.',
                visualization: 'scatter'
            },
            'gaussian': {
                name: 'Gaussian Mixture',
                ari: 0.52,
                description: 'This model assumes countries come from a mixture of gaussian distributions. It provides probability estimates for cluster membership, making it useful for identifying borderline cases, but had lower overall accuracy.',
                visualization: 'ellipse'
            }
        };
        
        // Create dimension distribution visualization
        function createDimensionDistribution() {
            // Prepare data
            const dimensions = ['Electoral Process', 'Functioning of Govt', 'Political Participation', 'Political Culture', 'Civil Liberties'];
            
            // Calculate averages by regime type
            const regimeTypes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            const averagesByRegime = {};
            
            regimeTypes.forEach(regime => {
                averagesByRegime[regime] = {
                    electoral: 0,
                    functioning: 0,
                    participation: 0,
                    culture: 0,
                    civil: 0,
                    count: 0
                };
            });
            
            countries.forEach(country => {
                const regime = country.expertLabel;
                averagesByRegime[regime].electoral += country.electoral;
                averagesByRegime[regime].functioning += country.functioning;
                averagesByRegime[regime].participation += country.participation;
                averagesByRegime[regime].culture += country.culture;
                averagesByRegime[regime].civil += country.civil;
                averagesByRegime[regime].count += 1;
            });
            
            regimeTypes.forEach(regime => {
                if(averagesByRegime[regime].count > 0) {
                    averagesByRegime[regime].electoral /= averagesByRegime[regime].count;
                    averagesByRegime[regime].functioning /= averagesByRegime[regime].count;
                    averagesByRegime[regime].participation /= averagesByRegime[regime].count;
                    averagesByRegime[regime].culture /= averagesByRegime[regime].count;
                    averagesByRegime[regime].civil /= averagesByRegime[regime].count;
                }
            });
            
            // Create radar chart data
            const data = regimeTypes.map(regime => {
                return {
                    type: 'scatterpolar',
                    r: [
                        averagesByRegime[regime].electoral,
                        averagesByRegime[regime].functioning,
                        averagesByRegime[regime].participation,
                        averagesByRegime[regime].culture,
                        averagesByRegime[regime].civil
                    ],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {
                        color: regimeColors[regime]
                    },
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2
                },
                margin: {
                    l: 50,
                    r: 50,
                    t: 50,
                    b: 50
                },
                title: 'Democracy Dimensions by Regime Type'
            };
            
            Plotly.newPlot('dimension-distribution', data, layout);
        }
        
        // Create clustering methods visualization
        function createClusteringMethod(method) {
            const methodInfo = clusterStats[method];
            
            let data, layout;
            
            // Different visualizations based on method type
            if (method === 'hierarchical') {
                // Create a dendrogram-like visualization
                data = [{
                    type: 'scatter',
                    mode: 'markers+text',
                    x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                    y: [1, 2, 1, 3, 2, 1, 2, 3, 4, 3],
                    text: countries.map(c => c.name),
                    textposition: 'top center',
                    marker: {
                        size: 10,
                        color: countries.map(c => regimeColors[c.expertLabel])
                    },
                    hoverinfo: 'text',
                    name: 'Countries'
                }];
                
                // Add connecting lines to simulate dendrogram
                const shapes = [
                    {type: 'line', x0: 1, y0: 1, x1: 3, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 3, y0: 1, x1: 6, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 6, y0: 1, x1: 8, y1: 1, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 2, y0: 2, x1: 5, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 5, y0: 2, x1: 7, y1: 2, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 4, y0: 3, x1: 9, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 8, y0: 3, x1: 10, y1: 3, line: {color: 'gray', width: 1}},
                    {type: 'line', x0: 9, y0: 3, x1: 9, y1: 4, line: {color: 'gray', width: 1}}
                ];
                
                layout = {
                    title: 'Hierarchical Clustering (ARI = 0.78)',
                    shapes: shapes,
                    showlegend: false,
                    xaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    yaxis: {showticklabels: false, zeroline: false, showgrid: false},
                    annotations: [{
                        x: 5,
                        y: 4.5,
                        text: 'Countries are grouped in a hierarchical structure<br>based on similarity across all dimensions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'kmeans') {
                // Create a k-means visualization with centroids
                const centroids = [
                    {x: 9.5, y: 9.5, label: 'Cluster 1'},
                    {x: 8.5, y: 7.5, label: 'Cluster 2'},
                    {x: 6.5, y: 5.0, label: 'Cluster 3'},
                    {x: 1.5, y: 2.0, label: 'Cluster 4'}
                ];
                
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    },
                    {
                        type: 'scatter',
                        x: centroids.map(c => c.x),
                        y: centroids.map(c => c.y),
                        mode: 'markers',
                        marker: {
                            size: 15,
                            color: centroids.map(c => regimeColors[c.label]),
                            symbol: 'x',
                            line: {width: 2, color: 'black'}
                        },
                        hoverinfo: 'text',
                        text: centroids.map(c => `${c.label} Centroid`),
                        name: 'Centroids'
                    }
                ];
                
                layout = {
                    title: 'K-Means Clustering (ARI = 0.57)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'X marks show cluster centroids',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            } else if (method === 'gaussian') {
                // Gaussian mixture visualization with probability ellipses
                data = [
                    {
                        type: 'scatter',
                        x: countries.map(c => c.electoral),
                        y: countries.map(c => c.civil),
                        mode: 'markers+text',
                        text: countries.map(c => c.name),
                        textposition: 'top center',
                        marker: {
                            size: countries.map(c => c.score * 1.5),
                            color: countries.map(c => regimeColors[c.mlCluster]),
                            opacity: 0.7
                        },
                        hoverinfo: 'text',
                        name: 'Countries'
                    }
                ];
                
                // Add ellipse shapes representing Gaussian distributions
                const shapes = [
                    {type: 'circle', x0: 8.5, y0: 8.5, x1: 10.5, y1: 10.5, fillcolor: regimeColors['Cluster 1'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 7.5, y0: 6.5, x1: 9.5, y1: 8.5, fillcolor: regimeColors['Cluster 2'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 5.5, y0: 3.5, x1: 7.5, y1: 5.5, fillcolor: regimeColors['Cluster 3'] + '30', line: {width: 0}},
                    {type: 'circle', x0: 0.5, y0: 0.5, x1: 2.5, y1: 2.5, fillcolor: regimeColors['Cluster 4'] + '30', line: {width: 0}}
                ];
                
                layout = {
                    title: 'Gaussian Mixture Model (ARI = 0.52)',
                    xaxis: {title: 'Electoral Process', range: [0, 10]},
                    yaxis: {title: 'Civil Liberties', range: [0, 10]},
                    shapes: shapes,
                    annotations: [{
                        x: 5,
                        y: 9,
                        text: 'Colored regions show probability distributions',
                        showarrow: false,
                        font: {size: 12}
                    }],
                    margin: {l: 40, r: 40, t: 60, b: 40},
                    height: 400
                };
            }
            
            Plotly.newPlot('clustering-method', data, layout);
            
            // Update the method description
            document.getElementById('method-description').innerHTML = `
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">${methodInfo.name} (ARI = ${methodInfo.ari})</h4>
                <p>${methodInfo.description}</p>
            `;
        }
        
        // Create cluster comparison visualization
        function createClusterComparison(view = 'comparison') {
            const data = [];
            
            if (view === 'comparison' || view === 'machine') {
                // ML-discovered clusters
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral),
                    y: countries.map(c => c.civil),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.mlCluster]),
                        line: {
                            color: 'white',
                            width: 1
                        }
                    },
                    text: countries.map(c => `${c.name}<br>ML Cluster: ${c.mlCluster}<br>Score: ${c.score}`),
                    name: 'Machine Learning Clusters',
                    hoverinfo: 'text'
                });
            }
            
            if (view === 'comparison' || view === 'expert') {
                // Expert-defined regimes
                const xOffset = view === 'comparison' ? 0.3 : 0;
                data.push({
                    type: 'scatter',
                    x: countries.map(c => c.electoral + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    y: countries.map(c => c.civil + (view === 'comparison' ? (c.isBorderline ? -0.3 : 0) : 0)),
                    mode: 'markers',
                    marker: {
                        size: countries.map(c => c.score * 2),
                        color: countries.map(c => regimeColors[c.expertLabel]),
                        symbol: view === 'comparison' ? 'circle-open' : 'circle',
                        line: {
                            color: 'black',
                            width: view === 'comparison' ? 2 : 0
                        }
                    },
                    text: countries.map(c => `${c.name}<br>Expert Label: ${c.expertLabel}<br>Score: ${c.score}`),
                    name: 'Expert Classifications',
                    hoverinfo: 'text'
                });
            }
            
            // Regime boundary lines
            const shapes = [
                {type: 'line', x0: 0, y0: 8.01, x1: 10, y1: 8.01, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 8.01, y0: 0, x1: 8.01, y1: 10, line: {color: regimeColors['Full Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 6.01, x1: 10, y1: 6.01, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 6.01, y0: 0, x1: 6.01, y1: 10, line: {color: regimeColors['Flawed Democracy'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 0, y0: 4.01, x1: 10, y1: 4.01, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}},
                {type: 'line', x0: 4.01, y0: 0, x1: 4.01, y1: 10, line: {color: regimeColors['Hybrid Regime'], width: 1, dash: 'dash'}}
            ];
            
            const layout = {
                title: view === 'comparison' ? 'Machine Learning Clusters vs Expert Classifications' :
                       view === 'machine' ? 'Machine-Discovered Clusters (No Labels Used)' : 
                       'Expert-Defined Regime Types',
                xaxis: {title: 'Electoral Process', range: [0, 10]},
                yaxis: {title: 'Civil Liberties', range: [0, 10]},
                shapes: shapes,
                height: 500,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                annotations: view === 'comparison' ? [
                    {
                        x: 8.5,
                        y: 1,
                        text: 'Filled circles: ML clusters<br>Open circles: Expert labels',
                        showarrow: false,
                        bgcolor: 'white',
                        borderpad: 4
                    },
                    {
                        x: 2,
                        y: 9,
                        text: 'ARI = 0.78',
                        showarrow: false,
                        font: {size: 14, weight: 'bold'},
                        bgcolor: 'white',
                        borderpad: 4
                    }
                ] : []
            };
            
            Plotly.newPlot('cluster-comparison', data, layout);
        }
        
        // Create feature radar plot
        function createFeatureRadar() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            // Create average values for each regime type
            const regimes = ['Full Democracy', 'Flawed Democracy', 'Hybrid Regime', 'Authoritarian'];
            
            const traces = regimes.map(regime => {
                // Filter countries by regime
                const filteredCountries = countries.filter(c => c.expertLabel === regime);
                
                // Calculate averages
                const electoral = filteredCountries.reduce((sum, c) => sum + c.electoral, 0) / filteredCountries.length;
                const civil = filteredCountries.reduce((sum, c) => sum + c.civil, 0) / filteredCountries.length;
                const functioning = filteredCountries.reduce((sum, c) => sum + c.functioning, 0) / filteredCountries.length;
                const participation = filteredCountries.reduce((sum, c) => sum + c.participation, 0) / filteredCountries.length;
                const culture = filteredCountries.reduce((sum, c) => sum + c.culture, 0) / filteredCountries.length;
                
                return {
                    type: 'scatterpolar',
                    r: [electoral, civil, functioning, participation, culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: regime,
                    line: {color: regimeColors[regime]},
                    fillcolor: regimeColors[regime] + '40'
                };
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democracy Dimensions by Regime Type',
                legend: {
                    orientation: 'h',
                    y: -0.2
                }
            };
            
            Plotly.newPlot('feature-radar', traces, layout);
        }
        
        // Create democracy trends visualization
        function createDemocracyTrends(trendType = 'all') {
            const years = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];
            
            // Democracy index scores over time
            const trends = {
                'Norway': [9.93, 9.93, 9.87, 9.87, 9.87, 9.81, 9.81, 9.81, 9.75, 9.81],
                'United States': [8.05, 7.98, 7.98, 7.98, 7.96, 7.96, 7.92, 7.85, 7.85, 7.85],
                'Sweden': [9.45, 9.39, 9.39, 9.39, 9.39, 9.26, 9.26, 9.39, 9.39, 9.39],
                'New Zealand': [9.26, 9.26, 9.26, 9.26, 9.26, 9.25, 9.37, 9.37, 9.61, 9.61],
                'Hungary': [7.53, 7.25, 7.00, 6.84, 6.64, 6.63, 6.56, 6.50, 6.12, 6.12],
                'Poland': [7.09, 7.09, 7.09, 6.67, 6.67, 6.62, 6.57, 6.49, 6.09, 6.09],
                'Mexico': [6.55, 6.47, 6.47, 6.41, 6.19, 6.09, 6.09, 6.07, 6.07, 6.07]
            };
            
            // Full Democracy threshold
            const fullDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(8.01),
                mode: 'lines',
                name: 'Full Democracy Threshold',
                line: {
                    color: 'rgba(76, 201, 240, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            // Flawed Democracy threshold
            const flawedDemocracyLine = {
                type: 'scatter',
                x: years,
                y: Array(years.length).fill(6.01),
                mode: 'lines',
                name: 'Flawed Democracy Threshold',
                line: {
                    color: 'rgba(247, 37, 133, 0.5)',
                    width: 1,
                    dash: 'dash'
                }
            };
            
            const data = [fullDemocracyLine, flawedDemocracyLine];
            
            if (trendType === 'all') {
                // Add all countries
                Object.keys(trends).forEach(country => {
                    // Choose color based on average score
                    const avgScore = trends[country].reduce((a, b) => a + b, 0) / trends[country].length;
                    let color;
                    if (avgScore >= 8.01) color = regimeColors['Full Democracy'];
                    else if (avgScore >= 6.01) color = regimeColors['Flawed Democracy'];
                    else if (avgScore >= 4.01) color = regimeColors['Hybrid Regime'];
                    else color = regimeColors['Authoritarian'];
                    
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: color,
                            width: country === 'United States' ? 3 : 2
                        },
                        marker: {
                            size: country === 'United States' ? 8 : 6
                        }
                    });
                });
            } else if (trendType === 'compare') {
                // Add only US and Norway
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['Norway'],
                    mode: 'lines+markers',
                    name: 'Norway',
                    line: {
                        color: regimeColors['Full Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
            } else if (trendType === 'borderline') {
                // Add US and borderline countries
                data.push({
                    type: 'scatter',
                    x: years,
                    y: trends['United States'],
                    mode: 'lines+markers',
                    name: 'United States',
                    line: {
                        color: regimeColors['Flawed Democracy'],
                        width: 3
                    },
                    marker: {
                        size: 8
                    }
                });
                
                ['Hungary', 'Poland', 'Mexico'].forEach(country => {
                    data.push({
                        type: 'scatter',
                        x: years,
                        y: trends[country],
                        mode: 'lines+markers',
                        name: country,
                        line: {
                            color: '#FF5722',
                            width: 2,
                            dash: 'solid'
                        },
                        marker: {
                            size: 6
                        }
                    });
                });
            }
            
            // Add US downgrade annotation
            const annotations = [{
                x: 2016,
                y: 7.98,
                text: 'US Downgraded to<br>Flawed Democracy',
                showarrow: true,
                arrowhead: 5,
                ax: 0,
                ay: -40
            }];
            
            const layout = {
                title: 'Democracy Index Trends (2015-2024)',
                xaxis: {title: 'Year', tickmode: 'array', tickvals: years},
                yaxis: {title: 'Democracy Index Score', range: [5.5, 10]},
                annotations: annotations,
                legend: {
                    orientation: 'h',
                    y: -0.15
                },
                hovermode: 'closest'
            };
            
            Plotly.newPlot('democracy-trends', data, layout);
        }
        
        // Create US vs Norway radar comparison
        function createUSNorwayComparison() {
            const dimensions = ['Electoral Process', 'Civil Liberties', 'Functioning of Govt', 'Political Participation', 'Political Culture'];
            
            const us = {
                electoral: 9.17,
                civil: 8.24,
                functioning: 6.43,
                participation: 7.78,
                culture: 6.25
            };
            
            const norway = {
                electoral: 10.0,
                civil: 9.71,
                functioning: 9.64,
                participation: 10.0,
                culture: 10.0
            };
            
            const data = [
                {
                    type: 'scatterpolar',
                    r: [us.electoral, us.civil, us.functioning, us.participation, us.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'United States',
                    line: {color: regimeColors['Flawed Democracy']},
                    fillcolor: regimeColors['Flawed Democracy'] + '40'
                },
                {
                    type: 'scatterpolar',
                    r: [norway.electoral, norway.civil, norway.functioning, norway.participation, norway.culture],
                    theta: dimensions,
                    fill: 'toself',
                    name: 'Norway',
                    line: {color: regimeColors['Full Democracy']},
                    fillcolor: regimeColors['Full Democracy'] + '40'
                }
            ];
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true,
                title: 'Democratic Dimensions Comparison'
            };
            
            Plotly.newPlot('us-norway-comparison', data, layout);
        }
        
        // Create borderline explorer
        function createBorderlineExplorer() {
            const borderlineCountries = countries.filter(c => c.isBorderline);
            
            // Add a couple more for demonstration
            borderlineCountries.push({
                name: 'Tunisia',
                electoral: 7.50,
                civil: 6.47,
                functioning: 5.36,
                participation: 6.11,
                culture: 5.63,
                score: 6.08,
                expertLabel: 'Flawed Democracy',
                mlCluster: 'Cluster 3',
                isBorderline: true
            });
            
            // Prepare data for scatter plot
            const trace = {
                type: 'scatter',
                x: borderlineCountries.map(c => c.functioning),
                y: borderlineCountries.map(c => c.civil),
                mode: 'markers+text',
                text: borderlineCountries.map(c => c.name),
                textposition: 'top',
                marker: {
                    size: borderlineCountries.map(c => c.score * 3),
                    color: borderlineCountries.map(c => '#FF5722'),
                    opacity: 0.7,
                    line: {
                        color: 'white',
                        width: 2
                    }
                },
                name: 'Borderline Countries'
            };
            
            const layout = {
                title: 'Borderline Countries: Functioning of Government vs Civil Liberties',
                xaxis: {title: 'Functioning of Government', range: [4, 7]},
                yaxis: {title: 'Civil Liberties', range: [5, 8]},
                shapes: [
                    // Hybrid/Flawed border region
                    {
                        type: 'rect',
                        x0: 4, 
                        y0: 5, 
                        x1: 6.5, 
                        y1: 7.5, 
                        fillcolor: 'rgba(255,193,7,0.2)', 
                        line: {width: 0}
                    }
                ],
                annotations: [
                    {
                        x: 5.25,
                        y: 6.25,
                        text: 'Borderline<br>Region',
                        showarrow: false,
                        font: {size: 14, color: '#FF5722'}
                    }
                ],
                height: 400
            };
            
            Plotly.newPlot('borderline-explorer', [trace], layout);
        }
        
        // Initialize all visualizations
        window.onload = function() {
            createDimensionDistribution();
            createClusteringMethod('hierarchical');
            createClusterComparison('comparison');
            createFeatureRadar();
            createDemocracyTrends('all');
            createUSNorwayComparison();
            createBorderlineExplorer();
            
            // Set up event listeners for interactive controls
            document.querySelectorAll('[data-method]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-method]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusteringMethod(this.dataset.method);
                });
            });
            
            document.querySelectorAll('[data-view]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createClusterComparison(this.dataset.view);
                });
            });
            
            document.querySelectorAll('[data-trend]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-trend]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    createDemocracyTrends(this.dataset.trend);
                });
            });
            
            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, {
                threshold: 0.1
            });
            
            document.querySelectorAll('.story-section').forEach(section => {
                observer.observe(section);
            });
            
            // Smooth scrolling for nav links
            document.querySelectorAll('.nav-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
        };
    </script>
</body>
</html>
