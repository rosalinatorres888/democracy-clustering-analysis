<!DOCTYPE html>
<html>
<head>
    <title>Democracy Index Clustering Analysis</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
            line-height: 1.6;
        }
        .chart { 
            width: 100%; 
            height: 500px; 
            margin-bottom: 20px; 
        }
        h1, h2 { 
            color: #333; 
            text-align: center;
        }
        h3 {
            margin-top: 0;
        }
        .controls { 
            margin: 20px auto; 
            text-align: center;
            padding: 15px; 
            background: #f5f5f5; 
            border-radius: 4px; 
            max-width: 600px;
        }
        select, button { 
            padding: 8px 16px; 
            margin: 0 10px; 
            font-size: 16px;
        }
        .tab-buttons {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }
        .tab-button {
            padding: 10px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .tab-button.active {
            background: #4285f4;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .description {
            max-width: 800px;
            margin: 20px auto;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        ul {
            margin-left: 20px;
            padding-left: 20px;
        }
        .color-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <h1>Democracy Index Clustering Analysis</h1>
    
    <div class="controls">
        <select id="colorby">
            <option value="cluster">Color by Cluster</option>
            <option value="category">Color by Original Category</option>
        </select>
        <button id="reset">Reset View</button>
    </div>
    
    <div class="tab-buttons">
        <button class="tab-button active" data-tab="cluster">Clustering Results</button>
        <button class="tab-button" data-tab="importance">Feature Importance</button>
        <button class="tab-button" data-tab="ari">ARI Comparison</button>
        <button class="tab-button" data-tab="radar">Regime Fingerprints</button>
    </div>
    
   <div id="cluster-tab" class="tab-content active">
    <h2>Regime Type Fingerprints (K-Means Centroids)</h2>
    <div id="radar-chart" class="chart">
        <!-- You would typically insert your chart via JavaScript here, but for now you can use an image -->
        <img src="path/to/radar-chart.png" alt="Radar chart showing regime type fingerprints" width="100%">
    </div>
    <div class="description">
        <h3>Cluster Centroids Analysis</h3>
        <p>This radar chart displays the average values (centroids) for each feature across regime types. Full democracies show high values across all dimensions, while authoritarian regimes have particularly low scores in Electoral Process and Civil Liberties. Hybrid regimes and flawed democracies show more intermediate patterns, with flawed democracies maintaining stronger electoral processes and civil liberties despite moderate scores in other areas.</p>
        
        <p>The radar chart reveals distinctive patterns that characterize each regime type:</p>
        
        <ul>
            <li><span class="color-dot" style="background-color: #4CAF50;"></span> <strong>Full Democracy</strong> - High scores across all dimensions</li>
            <li><span class="color-dot" style="background-color: #2196F3;"></span> <strong>Flawed Democracy</strong> - Strong electoral process but weaker in other areas</li>
            <li><span class="color-dot" style="background-color: #FFC107;"></span> <strong>Hybrid Regime</strong> - Uneven development across democratic dimensions</li>
            <li><span class="color-dot" style="background-color: #F44336;"></span> <strong>Authoritarian</strong> - Low scores, particularly in electoral process</li>
        </ul>
        
        <p>This visualization complements the cluster scatter plot by showing the distinctive "fingerprint" of each regime type across all five dimensions in the Democracy Index.</p>
    </div>
</div>
    
    <div id="importance-tab" class="tab-content">
        <h2>Feature Importance</h2>
        <div id="importance-chart" class="chart"></div>
        <div class="description">
            <h3>What is Feature Importance?</h3>
            <p>Feature importance measures how much each variable contributes to the clustering outcome. Higher values indicate features that more strongly distinguish between different regime types.</p>
            
            <p>This analysis reveals that Electoral Process and Civil Liberties are the most influential dimensions in separating regime types, while Political Participation shows comparatively less variance between clusters.</p>
            
            <p>Understanding which features drive cluster formation helps identify the critical dimensions that differentiate political regimes and highlights where democratic development tends to progress or stagnate. For policymakers focused on democratic development, these key dimensions represent leverage points for potential reform efforts.</p>
        </div>
    </div>
    
    <div id="ari-tab" class="tab-content">
        <h2>Adjusted Rand Index Comparison</h2>
        <div id="ari-chart" class="chart"></div>
        <div class="description">
            <h3>What is Adjusted Rand Index?</h3>
            <p>The Adjusted Rand Index (ARI) measures the similarity between two clusterings, adjusted for chance. It ranges from -1 to 1, where:</p>
            
            <ul>
                <li>1 indicates perfect agreement between clusterings</li>
                <li>0 indicates random clustering</li>
                <li>Negative values indicate worse than random clustering</li>
            </ul>
            
            <p>Higher ARI values indicate better alignment between the algorithmic clusters and expert-defined regime classifications. The K-Means algorithm shows stronger agreement with expert classifications (0.78) compared to Hierarchical clustering (0.72), suggesting it better captures the natural groupings in the democracy data.</p>
        </div>
    </div>
    
    <div id="radar-tab" class="tab-content">
        <h2>Regime Type Fingerprints (K-Means Centroids)</h2>
        <div id="radar-chart" class="chart"></div>
        <div class="description">
            <h3>Cluster Centroids Analysis</h3>
            <p>This radar chart displays the average values (centroids) for each feature across regime types. Full democracies show high values across all dimensions, while authoritarian regimes have particularly low scores in Electoral Process and Civil Liberties. Hybrid regimes and flawed democracies show more intermediate patterns, with flawed democracies maintaining stronger electoral processes and civil liberties despite moderate scores in other areas.</p>
        </div>
    </div>
    
    <script>
        // Sample data
        const countries = [
            {country: "Norway", electoral_process: 10.00, functioning_government: 9.64, political_participation: 10.00, political_culture: 10.00, civil_liberties: 9.71, cluster: 2, original_category: "Full democracy"},
            {country: "Iceland", electoral_process: 10.00, functioning_government: 9.29, political_participation: 8.89, political_culture: 10.00, civil_liberties: 9.71, cluster: 2, original_category: "Full democracy"},
            {country: "Sweden", electoral_process: 9.58, functioning_government: 9.64, political_participation: 8.33, political_culture: 10.00, civil_liberties: 9.41, cluster: 2, original_category: "Full democracy"},
            {country: "New Zealand", electoral_process: 10.00, functioning_government: 9.29, political_participation: 8.89, political_culture: 8.13, civil_liberties: 10.00, cluster: 2, original_category: "Full democracy"},
            {country: "United States", electoral_process: 9.17, functioning_government: 7.14, political_participation: 7.78, political_culture: 7.50, civil_liberties: 8.24, cluster: 3, original_category: "Flawed democracy"},
            {country: "France", electoral_process: 9.58, functioning_government: 7.50, political_participation: 7.78, political_culture: 5.63, civil_liberties: 8.53, cluster: 3, original_category: "Flawed democracy"},
            {country: "South Korea", electoral_process: 9.17, functioning_government: 7.86, political_participation: 7.22, political_culture: 7.50, civil_liberties: 8.24, cluster: 3, original_category: "Flawed democracy"},
            {country: "Tunisia", electoral_process: 6.42, functioning_government: 5.71, political_participation: 7.78, political_culture: 6.25, civil_liberties: 5.88, cluster: 0, original_category: "Hybrid regime"},
            {country: "Ukraine", electoral_process: 6.17, functioning_government: 3.21, political_participation: 6.67, political_culture: 6.25, civil_liberties: 6.18, cluster: 0, original_category: "Hybrid regime"},
            {country: "Georgia", electoral_process: 7.83, functioning_government: 3.57, political_participation: 6.11, political_culture: 4.38, civil_liberties: 5.59, cluster: 0, original_category: "Hybrid regime"},
            {country: "Russia", electoral_process: 2.17, functioning_government: 1.79, political_participation: 5.00, political_culture: 2.50, civil_liberties: 3.24, cluster: 1, original_category: "Authoritarian"},
            {country: "China", electoral_process: 0.00, functioning_government: 5.00, political_participation: 3.89, political_culture: 6.25, civil_liberties: 1.47, cluster: 1, original_category: "Authoritarian"},
            {country: "Saudi Arabia", electoral_process: 0.00, functioning_government: 2.86, political_participation: 2.22, political_culture: 3.13, civil_liberties: 1.47, cluster: 1, original_category: "Authoritarian"},
            {country: "North Korea", electoral_process: 0.00, functioning_government: 2.50, political_participation: 1.67, political_culture: 1.25, civil_liberties: 0.00, cluster: 1, original_category: "Authoritarian"}
        ];
        
        // Colors and names
        const clusterColors = ['#FFC107', '#F44336', '#4CAF50', '#2196F3'];
        const clusterNames = ['Hybrid Regime', 'Authoritarian', 'Full Democracy', 'Flawed Democracy'];
        
        const categoryColors = {
            'Full democracy': '#4CAF50',
            'Flawed democracy': '#2196F3',
            'Hybrid regime': '#FFC107',
            'Authoritarian': '#F44336'
        };
        
        // Create scatter plot
        function createScatterPlot(colorBy = 'cluster') {
            const traces = [];
            
            if (colorBy === 'cluster') {
                // Group by clusters
                for (let i = 0; i < 4; i++) {
                    const clusterData = countries.filter(d => d.cluster === i);
                    traces.push({
                        x: clusterData.map(d => d.electoral_process),
                        y: clusterData.map(d => d.functioning_government),
                        text: clusterData.map(d => `<b>${d.country}</b><br>Electoral Process: ${d.electoral_process}<br>Functioning of Gov: ${d.functioning_government}`),
                        mode: 'markers',
                        name: clusterNames[i],
                        marker: {
                            size: 12,
                            color: clusterColors[i]
                        },
                        type: 'scatter',
                        hoverinfo: 'text'
                    });
                }
            } else {
                // Group by original categories
                const categories = [...new Set(countries.map(d => d.original_category))];
                categories.forEach(category => {
                    const categoryData = countries.filter(d => d.original_category === category);
                    traces.push({
                        x: categoryData.map(d => d.electoral_process),
                        y: categoryData.map(d => d.functioning_government),
                        text: categoryData.map(d => `<b>${d.country}</b><br>Electoral Process: ${d.electoral_process}<br>Functioning of Gov: ${d.functioning_government}`),
                        mode: 'markers',
                        name: category,
                        marker: {
                            size: 12,
                            color: categoryColors[category]
                        },
                        type: 'scatter',
                        hoverinfo: 'text'
                    });
                });
            }
            
            Plotly.newPlot('cluster-chart', traces, {
                title: 'Democracy Index K-Means Clustering',
                xaxis: { title: 'Electoral Process & Pluralism', range: [-0.5, 10.5] },
                yaxis: { title: 'Functioning of Government', range: [-0.5, 10.5] },
                hovermode: 'closest'
            });
        }
        
        // Feature importance chart
        function createFeatureImportanceChart() {
            const featureImportance = [
                {feature: 'Electoral Process', importance: 0.85},
                {feature: 'Civil Liberties', importance: 0.78},
                {feature: 'Functioning of Government', importance: 0.75},
                {feature: 'Political Culture', importance: 0.62},
                {feature: 'Political Participation', importance: 0.58}
            ];
            
            Plotly.newPlot('importance-chart', [{
                x: featureImportance.map(d => d.importance),
                y: featureImportance.map(d => d.feature),
                type: 'bar',
                orientation: 'h',
                marker: {color: '#8884d8'}
            }], {
                title: 'Feature Importance in Clustering',
                xaxis: { title: 'Importance Score' },
                margin: { l: 150 }
            });
        }
        
        // ARI comparison chart
        function createARIChart() {
            Plotly.newPlot('ari-chart', [{
                x: ['K-Means', 'Hierarchical'],
                y: [0.78, 0.72],
                type: 'bar',
                marker: {
                    color: ['#8884d8', '#82ca9d']
                }
            }], {
                title: 'Adjusted Rand Index Comparison',
                yaxis: { 
                    title: 'ARI Score',
                    range: [0, 1] 
                }
            });
        }
        
        // Radar chart
        function createRadarChart() {
            // Calculate centroids for each cluster
            const centroids = {};
            const features = ['electoral_process', 'functioning_government', 'political_participation', 'political_culture', 'civil_liberties'];
            
            // Calculate the average values for each feature per cluster
            clusterNames.forEach((name, idx) => {
                const clusterData = countries.filter(d => d.cluster === idx);
                centroids[name] = {};
                
                features.forEach(feature => {
                    centroids[name][feature] = clusterData.reduce((sum, d) => sum + d[feature], 0) / clusterData.length;
                });
            });
            
            // Create radar chart data
            const radarData = [];
            
            Object.keys(centroids).forEach(cluster => {
                radarData.push({
                    type: 'scatterpolar',
                    r: features.map(f => centroids[cluster][f]),
                    theta: ['Electoral Process', 'Functioning of Government', 'Political Participation', 'Political Culture', 'Civil Liberties'],
                    fill: 'toself',
                    name: cluster,
                    line: {
                        color: clusterColors[clusterNames.indexOf(cluster)]
                    }
                });
            });
            
            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 10]
                    }
                },
                showlegend: true
            };
            
            Plotly.newPlot('radar-chart', radarData, layout);
        }
        
        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons and content
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Show corresponding content
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId + '-tab').classList.add('active');
            });
        });
        
        // Color by dropdown
        document.getElementById('colorby').addEventListener('change', function() {
            createScatterPlot(this.value);
        });
        
        // Reset button
        document.getElementById('reset').addEventListener('click', function() {
            document.getElementById('colorby').value = 'cluster';
            createScatterPlot('cluster');
            
            // Activate first tab
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector('.tab-button[data-tab="cluster"]').classList.add('active');
            document.getElementById('cluster-tab').classList.add('active');
        });
        
        // Initialize all charts
        createScatterPlot();
        createFeatureImportanceChart();
        createARIChart();
        createRadarChart();
    </script>
</body>
</html>
